/*! For license information please see module.js.LICENSE.txt */
define(["react","@grafana/ui","lodash","@grafana/data","@emotion/css","@grafana/runtime"],(function(e,t,r,s,n,a){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=110)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=s},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,r){var s=r(26),n="object"==typeof self&&self&&self.Object===Object&&self,a=s||n||Function("return this")();e.exports=a},function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,r){var s=r(25),n=r(50),a=r(51),o=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):a(e)}},function(e,t,r){var s=r(59),n=r(60),a=r(61),o=r(62),l=r(63);function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}i.prototype.clear=s,i.prototype.delete=n,i.prototype.get=a,i.prototype.has=o,i.prototype.set=l,e.exports=i},function(e,t,r){var s=r(12);e.exports=function(e,t){for(var r=e.length;r--;)if(s(e[r][0],t))return r;return-1}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,r){var s=r(16)(Object,"create");e.exports=s},function(e,t,r){var s=r(78);e.exports=function(e,t){var r=e.__data__;return s(t)?r["string"==typeof t?"string":"hash"]:r.map}},function(e,t,r){!function(e,t){for(var r in t)e[r]=t[r]}(t,function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=7)}([function(e,t){e.exports=r(42)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unbox=t.doubleQuoted=t.box=t.track=t.tracking=t.trackingComments=t.lexerAny=t.lexer=void 0;const s=r(0),n=r(3),a={};for(const e of n.sqlKeywords)a["kw_"+e.toLowerCase()]=e;var o;t.lexer=(0,s.compile)({word:{match:/[eE](?!')[A-Za-z0-9_]*|[a-df-zA-DF-Z_][A-Za-z0-9_]*/,type:(e=>{const t=(0,s.keywords)(e);return e=>t(e.toUpperCase())})(a),value:e=>e.toLowerCase()},wordQuoted:{match:/"(?:[^"\*]|"")+"/,type:()=>"quoted_word",value:e=>e.substring(1,e.length-1)},string:{match:/'(?:[^']|\'\')*'/,value:e=>e.substring(1,e.length-1).replace(/''/g,"'")},eString:{match:/\b(?:e|E)'(?:[^'\\]|[\r\n\s]|(?:\\\s)|(?:\\\n)|(?:\\.)|(?:\'\'))+'/,value:e=>e.substring(2,e.length-1).replace(/''/g,"'").replace(/\\([\s\n])/g,(e,t)=>t).replace(/\\./g,e=>JSON.parse('"'+e+'"'))},qparam:{match:/\$\d+/},commentLine:/\-\-.*?$[\s\r\n]*/,commentFullOpen:/\/\*/,commentFullClose:/\*\/[\s\r\n]*/,star:"*",comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lparen:"(",rparen:")",lbracket:"[",rbracket:"]",semicolon:";",dot:/\.(?!\d)/,op_cast:"::",op_colon:":",op_plus:"+",op_eq:"=",op_neq:{match:/(?:!=)|(?:\<\>)/,value:()=>"!="},op_membertext:"->>",op_member:"->",op_minus:"-",op_div:/\//,op_not_ilike:/\!~~\*/,op_not_like:/\!~~/,op_ilike:/~~\*/,op_like:/~~/,op_mod:"%",op_exp:"^",op_additive:{match:["||","-","#-","&&"]},op_compare:{match:[">",">=","<","<=","@>","<@","?","?|","?&","#>>",">>","<<","~","~*","!~","!~*"]},ops_others:{match:["|","&","^","#"]},codeblock:{match:/\$\$(?:.|[\s\t\n\v\f\r])*?\$\$/s,lineBreaks:!0,value:e=>e.substring(2,e.length-2)}}),t.lexer.next=(o=t.lexer.next,()=>{let e,r=null;for(;e=o.call(t.lexer);){if("commentFullOpen"===e.type){if(null===r){r={nested:0,offset:e.offset,text:e.text};continue}r.nested++}if(null==r){if("space"!==e.type){if("commentLine"!==e.type)break;null==l||l.push(i(e))}}else if(r.text+=e.text,"commentFullClose"===e.type){if(0===r.nested){null==l||l.push(i(r)),r=null;continue}r.nested--}}if(c&&e){const t=e.offset,r={start:t,end:t+e.text.length};e._location=r}return e}),t.lexerAny=t.lexer;let l=null;const i=({offset:e,text:t})=>({_location:{start:e,end:e+t.length},comment:t});t.trackingComments=function(e){if(l)throw new Error("WAT ? Recursive comments tracking 🤔🤨 ?");try{l=[];const t=e();return{comments:l,ast:t}}finally{l=null}};let c=!1;function p(e,t){if(!c||!t||"object"!=typeof t)return t;const r=y(e,!0),s=y(e,!1);if(!r||!s)return t;if(r===s)t._location=r;else{const e={start:r.start,end:s.end};t._location=e}return t}t.tracking=function(e){if(c)return e();try{return c=!0,e()}finally{c=!1}},t.track=p;const u=Symbol("_literal"),m=Symbol("_doublequoted");function y(e,t){if(!e)return null;if(Array.isArray(e)){const r=t?1:-1;for(let s=t?0:e.length-1;s>=0&&s<e.length;s+=r){const r=y(e[s],t);if(r)return r}return null}return"object"!=typeof e?null:e._location}t.box=function(e,t,r){return c||r?p(e,{[u]:t,[m]:r}):t},t.doubleQuoted=function(e){const t=function e(t){return Array.isArray(t)&&1===t.length&&(t=e(t[0])),Array.isArray(t)&&!t.length?null:t}(e);if("object"==typeof e&&(null==t?void 0:t[m]))return{doubleQuoted:!0}},t.unbox=function(e){var t;return"object"==typeof e&&null!==(t=null==e?void 0:e[u])&&void 0!==t?t:e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AstDefaultMapper=t.arrayNilMap=t.assignChanged=t.astMapper=void 0;const s=r(6);function n(e,t){if(!e)return e;let r=!1;for(const s of Object.keys(t))if(e[s]!==t[s]){r=!0;break}return r?(0,s.trimNullish)({...e,...t},0):e}function a(e,t){if(!(null==e?void 0:e.length))return e;let r=!1,s=e;for(let n=0;n<e.length;n++){const a=e[n],o=t(a);r||o&&o===a||(r=!0,s=e.slice(0,n)),o&&(r&&s.push(o))}return s}function o(e){switch(null==e?void 0:e.type){case"select":case"delete":case"insert":case"update":case"union":case"union all":case"with":return!0;default:return!1}}t.astMapper=function(e){const t=new l;return t.wrapped=e(t),t},t.assignChanged=n,t.arrayNilMap=a;class l{super(){return new c(this)}statement(e){switch(e.type){case"alter table":return this.alterTable(e);case"alter index":return this.alterIndex(e);case"commit":case"start transaction":case"rollback":return this.transaction(e);case"create index":return this.createIndex(e);case"create table":return this.createTable(e);case"truncate table":return this.truncateTable(e);case"delete":return this.delete(e);case"insert":return this.insert(e);case"with":return this.with(e);case"with recursive":return this.withRecursive(e);case"select":return this.selection(e);case"update":return this.update(e);case"create extension":return this.createExtension(e);case"tablespace":return this.tablespace(e);case"set":return this.setGlobal(e);case"set timezone":return this.setTimezone(e);case"create sequence":return this.createSequence(e);case"alter sequence":return this.alterSequence(e);case"begin":return this.begin(e);case"drop table":case"drop index":case"drop sequence":case"drop type":case"drop trigger":return this.drop(e);case"create enum":return this.createEnum(e);case"create composite type":return this.createCompositeType(e);case"union":case"union all":return this.union(e);case"show":return this.show(e);case"prepare":return this.prepare(e);case"deallocate":return this.deallocate(e);case"create view":return this.createView(e);case"create materialized view":return this.createMaterializedView(e);case"refresh materialized view":return this.refreshMaterializedView(e);case"create schema":return this.createSchema(e);case"raise":return this.raise(e);case"comment":return this.comment(e);case"do":return this.do(e);case"create function":return this.createFunction(e);case"drop function":return this.dropFunction(e);case"values":return this.values(e);default:throw s.NotSupported.never(e)}}comment(e){return e}createView(e){const t=this.select(e.query);if(!t)return null;const r=this.tableRef(e.name);return r?n(e,{query:t,name:r}):null}createMaterializedView(e){const t=this.select(e.query);if(!t)return null;const r=this.tableRef(e.name);return r?n(e,{query:t,name:r}):null}refreshMaterializedView(e){return e}do(e){return e}createFunction(e){const t=a(e.arguments,e=>n(e,{type:this.dataType(e.type)}));let r;if(e.returns)switch(e.returns.kind){case"table":r=n(e.returns,{columns:a(e.returns.columns,e=>{const t=this.dataType(e.type);return t&&n(e,{type:t})})});break;case void 0:case null:case"array":r=this.dataType(e.returns);break;default:throw s.NotSupported.never(e.returns)}return n(e,{returns:r,arguments:t})}dropFunction(e){const t=a(e.arguments,e=>n(e,{type:this.dataType(e.type)}));return n(e,{arguments:t})}show(e){return e}createEnum(e){return e}createCompositeType(e){const t=a(e.attributes,e=>n(e,{dataType:this.dataType(e.dataType)}));return n(e,{attributes:t})}drop(e){return e}alterSequence(e){return"set options"===e.change.type&&e.change.as&&this.dataType(e.change.as),e}begin(e){return e}createSequence(e){return e.options.as&&this.dataType(e.options.as),e}tablespace(e){return e}setGlobal(e){return e}setTimezone(e){return e}update(e){if(!e)return e;const t=this.tableRef(e.table);if(!t)return null;const r=e.from&&this.from(e.from),s=e.where&&this.expr(e.where),o=a(e.sets,e=>this.set(e));if(!(null==o?void 0:o.length))return null;return n(e,{table:t,where:s,sets:o,from:r,returning:a(e.returning,e=>this.selectionColumn(e))})}insert(e){var t,r;const o=this.tableRef(e.into);if(!o)return null;const l=e.insert&&this.select(e.insert);if(!l)return null;const i=a(e.returning,e=>this.selectionColumn(e));let c=null===(t=e.onConflict)||void 0===t?void 0:t.on;switch(null==c?void 0:c.type){case"on constraint":break;case"on expr":c=n(c,{exprs:a(c.exprs,e=>this.expr(e))});break;case null:case void 0:break;default:throw s.NotSupported.never(c)}let p=null===(r=e.onConflict)||void 0===r?void 0:r.do;if(p&&"do nothing"!==p){const e=a(p.sets,e=>this.set(e));(null==e?void 0:e.length)?p.sets!==e&&(p={sets:e}):p="do nothing"}return n(e,{into:o,insert:l,returning:i,onConflict:p?n(e.onConflict,{do:p,on:c}):e.onConflict})}raise(e){return n(e,{formatExprs:e.formatExprs&&a(e.formatExprs,e=>this.expr(e)),using:e.using&&a(e.using,e=>n(e,{value:this.expr(e.value)}))})}delete(e){const t=this.tableRef(e.from);if(!t)return null;return n(e,{where:e.where&&this.expr(e.where),returning:a(e.returning,e=>this.selectionColumn(e)),from:t})}createSchema(e){return e}createTable(e){const t=a(e.columns,e=>{switch(e.kind){case"column":return this.createColumn(e);case"like table":return this.likeTable(e);default:throw s.NotSupported.never(e)}});return(null==t?void 0:t.length)?n(e,{columns:t}):null}likeTable(e){const t=this.tableRef(e.like);return t?n(e,{like:t}):null}truncateTable(e){return e}constraint(e){switch(e.type){case"not null":case"null":case"primary key":case"unique":case"add generated":return e;case"default":{const t=this.expr(e.default);return t?n(e,{default:t}):null}case"check":{const t=this.expr(e.expr);return t?n(e,{expr:t}):null}case"reference":{const t=this.tableRef(e.foreignTable);return t?n(e,{foreignTable:t}):null}default:throw s.NotSupported.never(e)}}set(e){const t=this.expr(e.value);return t?n(e,{value:t}):null}dataType(e){return e}tableRef(e){return e}transaction(e){return e}createExtension(e){return e}createIndex(e){const t=a(e.expressions,e=>{const t=this.expr(e.expression);return t===e.expression?e:t?{...e,expression:t}:null});return(null==t?void 0:t.length)?n(e,{expressions:t}):null}prepare(e){const t=this.statement(e.statement);return t?n(e,{args:a(e.args,e=>this.dataType(e)),statement:t}):null}deallocate(e){return e}alterIndex(e){return e}alterTable(e){var t;const r=this.tableRef(e.table);if(!r)return null;let s=[],a=!1;for(let r=0;r<((null===(t=e.changes)||void 0===t?void 0:t.length)||0);r++){const t=e.changes[r],n=this.tableAlteration(t,e.table);a=a||n!=t,n&&s.push(n)}return s.length?a?n(e,{table:r,changes:s}):e:null}tableAlteration(e,t){switch(e.type){case"add column":return this.addColumn(e,t);case"add constraint":return this.addConstraint(e,t);case"alter column":return this.alterColumn(e,t);case"rename":return this.renameTable(e,t);case"rename column":return this.renameColumn(e,t);case"rename constraint":return this.renameConstraint(e,t);case"drop column":return this.dropColumn(e,t);case"drop constraint":return this.dropConstraint(e,t);case"owner":return this.setTableOwner(e,t);default:throw s.NotSupported.never(e)}}dropColumn(e,t){return e}dropConstraint(e,t){return e}setTableOwner(e,t){return e}renameConstraint(e,t){return e}renameColumn(e,t){return e}renameTable(e,t){return e}alterColumn(e,t){let r;switch(e.alter.type){case"set default":r=this.setColumnDefault(e.alter,t,e.column);break;case"set type":r=this.setColumnType(e.alter,t,e.column);break;case"drop default":case"set not null":case"drop not null":r=this.alterColumnSimple(e.alter,t,e.column);break;case"add generated":r=this.alterColumnAddGenerated(e.alter,t,e.column);break;default:throw s.NotSupported.never(e.alter)}return r?n(e,{alter:r}):null}setColumnType(e,t,r){return n(e,{dataType:this.dataType(e.dataType)})}alterColumnAddGenerated(e,t,r){return e}alterColumnSimple(e,t,r){return e}setColumnDefault(e,t,r){const s=this.expr(e.default);return s?n(e,{default:s}):null}addConstraint(e,t){return e}addColumn(e,t){const r=this.createColumn(e.column);return r?n(e,{column:r}):null}createColumn(e){var t;const r=this.dataType(e.dataType);if(!r)return null;return n(e,{dataType:r,constraints:null!==(t=a(e.constraints,e=>this.constraint(e)))&&void 0!==t?t:void 0})}select(e){switch(e.type){case"select":return this.selection(e);case"union":case"union all":return this.union(e);case"with":return this.with(e);case"values":return this.values(e);case"with recursive":return this.withRecursive(e);default:throw s.NotSupported.never(e)}}selection(e){var t,r;const s=a(e.from,e=>this.from(e)),o=a(e.columns,e=>this.selectionColumn(e)),l=e.where&&this.expr(e.where),i=a(e.groupBy,e=>this.expr(e)),c=this.orderBy(e.orderBy),p=n(e.limit,{limit:this.expr(null===(t=e.limit)||void 0===t?void 0:t.limit),offset:this.expr(null===(r=e.limit)||void 0===r?void 0:r.offset)});return n(e,{from:s,columns:o,where:l,groupBy:i,orderBy:c,limit:p})}orderBy(e){return a(e,e=>{const t=this.expr(e.by);return t?t===e.by?e:{...e,by:t}:null})}union(e){const t=this.select(e.left),r=this.select(e.right);return t&&r?n(e,{left:t,right:r}):null!=t?t:r}with(e){const t=a(e.bind,e=>{const t=this.statement(e.statement);return o(t)?n(e,{statement:t}):null});if(!t)return null;const r=this.statement(e.in);return o(r)?n(e,{bind:t,in:r}):null}withRecursive(e){const t=this.union(e.bind);if(!t)return null;if("union"!==t.type&&"union all"!==t.type)return null;const r=this.statement(e.in);return o(r)?n(e,{bind:t,in:r}):null}from(e){switch(e.type){case"table":return this.fromTable(e);case"statement":return this.fromStatement(e);case"call":return this.fromCall(e);default:throw s.NotSupported.never(e)}}fromCall(e){const t=this.call(e);return t&&"call"===t.type?n(e,t):null}fromStatement(e){const t=this.select(e.statement);if(!t)return null;return n(e,{statement:t,join:e.join&&this.join(e.join)})}values(e){const t=a(e.values,e=>a(e,e=>this.expr(e)));return(null==t?void 0:t.length)?n(e,{values:t}):null}join(e){const t=e.on&&this.expr(e.on);return t||e.using?n(e,{on:t}):e}fromTable(e){const t=this.tableRef(e.name);if(!t)return null;return n(e,{name:t,join:e.join&&this.join(e.join)})}selectionColumn(e){const t=this.expr(e.expr);return t?n(e,{expr:t}):null}expr(e){if(!e)return e;switch(e.type){case"binary":return this.binary(e);case"unary":return this.unary(e);case"ref":return this.ref(e);case"string":case"numeric":case"integer":case"boolean":case"constant":case"null":return this.constant(e);case"list":case"array":return this.array(e);case"array select":return this.arraySelect(e);case"call":return this.call(e);case"cast":return this.cast(e);case"case":return this.case(e);case"member":return this.member(e);case"arrayIndex":return this.arrayIndex(e);case"ternary":return this.ternary(e);case"select":case"union":case"union all":case"with":case"with recursive":return this.select(e);case"keyword":return this.valueKeyword(e);case"parameter":return this.parameter(e);case"extract":return this.extract(e);case"overlay":return this.callOverlay(e);case"substring":return this.callSubstring(e);case"values":return this.values(e);case"default":return this.default(e);default:throw s.NotSupported.never(e)}}arraySelect(e){const t=this.select(e.select);return t?n(e,{select:t}):null}extract(e){const t=this.expr(e.from);return t?n(e,{from:t}):null}valueKeyword(e){return e}ternary(e){const t=this.expr(e.value),r=this.expr(e.lo),s=this.expr(e.hi);return t&&r&&s?n(e,{value:t,lo:r,hi:s}):null}parameter(e){return e}arrayIndex(e){const t=this.expr(e.array),r=this.expr(e.index);return t&&r?n(e,{array:t,index:r}):null}member(e){const t=this.expr(e.operand);return t?n(e,{operand:t}):null}case(e){const t=e.value&&this.expr(e.value),r=a(e.whens,e=>{const t=this.expr(e.when),r=this.expr(e.value);return t&&r?n(e,{value:r,when:t}):null});if(!(null==r?void 0:r.length))return null;return n(e,{value:t,whens:r,else:e.else&&this.expr(e.else)})}cast(e){const t=this.expr(e.operand);return t?n(e,{operand:t}):null}call(e){const t=a(e.args,e=>this.expr(e));if(!t)return null;return n(e,{args:t,orderBy:this.orderBy(e.orderBy),filter:this.expr(e.filter)})}callSubstring(e){return n(e,{value:this.expr(e.value),from:this.expr(e.from),for:this.expr(e.for)})}callOverlay(e){return n(e,{value:this.expr(e.value),placing:this.expr(e.placing),from:this.expr(e.from),for:this.expr(e.for)})}array(e){const t=a(e.expressions,e=>this.expr(e));return t?n(e,{expressions:t}):null}constant(e){return e}default(e){return e}ref(e){return e}unary(e){const t=this.expr(e.operand);return t?n(e,{operand:t}):null}binary(e){const t=this.expr(e.left),r=this.expr(e.right);return t&&r?n(e,{left:t,right:r}):null}}t.AstDefaultMapper=l;const i=l.prototype;for(const e of Object.getOwnPropertyNames(i)){const t=i[e];"constructor"!==e&&"super"!==e&&"function"==typeof t&&Object.defineProperty(i,e,{configurable:!1,get:()=>function(...r){var s;if(this.skipNext)return this.skipNext=!1,t.apply(this,r);const n=null===(s=this.wrapped)||void 0===s?void 0:s[e];return n?n.apply(this.wrapped,r):t.apply(this,r)}})}class c extends l{constructor(e){super(),this.parent=e}}for(const e of Object.getOwnPropertyNames(i)){const t=i[e];"constructor"!==e&&"super"!==e&&"function"==typeof t&&Object.defineProperty(c.prototype,e,{configurable:!1,get:()=>function(...e){return this.parent.skipNext=!0,t.apply(this.parent,e)}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sqlKeywords=void 0,t.sqlKeywords=["ALL","ANALYSE","ANALYZE","AND","ANY","ARRAY","AS","ASC","ASYMMETRIC","AUTHORIZATION","BINARY","BOTH","CASE","CAST","CHECK","COLLATE","COLLATION","CONCURRENTLY","CONSTRAINT","CREATE","CROSS","CURRENT_CATALOG","CURRENT_DATE","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","DEFAULT","DEFERRABLE","DESC","DISTINCT","DO","ELSE","END","EXCEPT","FALSE","FETCH","FOR","FOREIGN","FREEZE","FROM","FULL","GRANT","GROUP","HAVING","ILIKE","IN","INITIALLY","INNER","INTERSECT","INTO","IS","ISNULL","JOIN","LATERAL","LEADING","LEFT","LIKE","LIMIT","LOCALTIME","LOCALTIMESTAMP","NATURAL","NOT","NOTNULL","NULL","OFFSET","ON","ONLY","OR","ORDER","OUTER","OVERLAPS","PLACING","PRIMARY","REFERENCES","RETURNING","RIGHT","SELECT","SESSION_USER","SIMILAR","SOME","SYMMETRIC","TABLE","TABLESAMPLE","THEN","TO","TRAILING","TRUE","UNION","UNIQUE","USER","USING","VARIADIC","VERBOSE","WHEN","WHERE","WINDOW","WITH","PRECISION"]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intervalToString=t.normalizeInterval=t.buildInterval=void 0;const s=[["years",12],["months",30],["days",24],["hours",60],["minutes",60],["seconds",1e3],["milliseconds",0]];function n(e){var t,r,n,a,o,l,i,c,p;const u={...e};for(let e=0;e<s.length;e++){const[a,o]=s[e],l=null!==(t=u[a])&&void 0!==t?t:0,i=l>=0?Math.floor(l):Math.ceil(l);if(!l||i===l)continue;const c=null===(r=s[e+1])||void 0===r?void 0:r[0];c&&(u[c]=(null!==(n=u[c])&&void 0!==n?n:0)+o*(l-i)),u[a]=i}if(u.months||u.years){const e=(null!==(a=u.months)&&void 0!==a?a:0)+12*(null!==(o=u.years)&&void 0!==o?o:0);u.months=e%12,u.years=(e-u.months)/12}let m=3600*(null!==(l=u.hours)&&void 0!==l?l:0)+60*(null!==(i=u.minutes)&&void 0!==i?i:0)+(null!==(c=u.seconds)&&void 0!==c?c:0)+(null!==(p=u.milliseconds)&&void 0!==p?p:0)/1e3,y=1;m<0&&(y=-1,m=-m),m>=3600?(u.hours=y*Math.floor(m/3600),m-=y*u.hours*3600):delete u.hours,m>=60?(u.minutes=y*Math.floor(m/60),m-=y*u.minutes*60):delete u.minutes,m>0?(u.seconds=y*Math.floor(m),m-=y*u.seconds):delete u.seconds,m>0?u.milliseconds=y*Math.round(1e3*m):delete u.milliseconds;for(const[e]of s)u[e]||delete u[e];return u}function a(e){return(e=Math.abs(e))<10?"0"+e:e.toString()}function o(e){return e&&e<0}t.buildInterval=function(e,t){var r;const s={};if("invalid"===t)throw new Error(`invalid input syntax for type interval: "${e}"`);for(const[e,n]of function*e(t){if("number"==typeof t[1])yield t;else for(const r of t)yield*e(r)}(t))s[e]=(null!==(r=s[e])&&void 0!==r?r:0)+n;return s},t.normalizeInterval=n,t.intervalToString=function(e){var t,r,s;const l=[];if((e=n(e)).years&&l.push(1===e.years?"1 year":e.years+" years"),e.months&&l.push(1===e.months?"1 month":e.months+" months"),e.days&&l.push(1===e.days?"1 day":e.days+" days"),e.hours||e.minutes||e.seconds||e.milliseconds){let n=`${a(null!==(t=e.hours)&&void 0!==t?t:0)}:${a(null!==(r=e.minutes)&&void 0!==r?r:0)}:${a(null!==(s=e.seconds)&&void 0!==s?s:0)}`;e.milliseconds&&(n+=(e.milliseconds/1e3).toString().substr(1)),(o(e.hours)||o(e.minutes)||o(e.seconds)||o(e.milliseconds))&&(n="-"+n),l.push(n)}return l.join(" ")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.astVisitor=void 0;const s=r(2);class n{super(){return new o(this)}}const a=s.AstDefaultMapper.prototype;for(const e of Object.getOwnPropertyNames(a)){const t=a[e];"constructor"!==e&&"super"!==e&&"function"==typeof t&&Object.defineProperty(n.prototype,e,{configurable:!1,get:()=>function(...r){const s=this.visitor[e];return s?(s.apply(this.visitor,r),r[0]):t.apply(this,r)}})}class o{constructor(e){this.parent=e}}for(const e of Object.getOwnPropertyNames(a)){const t=a[e];"constructor"!==e&&"super"!==e&&"function"==typeof t&&Object.defineProperty(o.prototype,e,{configurable:!1,get:()=>function(...e){return t.apply(this.parent,e)}})}t.astVisitor=function(e){return(0,s.astMapper)(t=>{const r=new n;return r.mapper=t,r.visitor=e(r),r})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trimNullish=t.NotSupported=void 0;class s extends Error{constructor(e){super("Not supported"+(e?": "+e:""))}static never(e,t){return new s(`${null!=t?t:""} ${JSON.stringify(e)}`)}}t.NotSupported=s,t.trimNullish=function e(t,r=5){if(r<0)return t;if(t instanceof Array&&t.forEach(t=>e(t,r-1)),"object"!=typeof t||t instanceof Date)return t;if(!t)return t;for(const s of Object.keys(t)){const n=t[s];null==n?delete t[s]:e(n,r-1)}return t}},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,n)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeInterval=t.intervalToString=t.toSql=t.astMapper=t.assignChanged=t.arrayNilMap=t.astVisitor=t.parseWithComments=t.parseIntervalLiteral=t.parseGeometricLiteral=t.parseArrayLiteral=t.parseFirst=t.parse=void 0;var a=r(8);Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return a.parse}}),Object.defineProperty(t,"parseFirst",{enumerable:!0,get:function(){return a.parseFirst}}),Object.defineProperty(t,"parseArrayLiteral",{enumerable:!0,get:function(){return a.parseArrayLiteral}}),Object.defineProperty(t,"parseGeometricLiteral",{enumerable:!0,get:function(){return a.parseGeometricLiteral}}),Object.defineProperty(t,"parseIntervalLiteral",{enumerable:!0,get:function(){return a.parseIntervalLiteral}}),Object.defineProperty(t,"parseWithComments",{enumerable:!0,get:function(){return a.parseWithComments}});var o=r(5);Object.defineProperty(t,"astVisitor",{enumerable:!0,get:function(){return o.astVisitor}});var l=r(2);Object.defineProperty(t,"arrayNilMap",{enumerable:!0,get:function(){return l.arrayNilMap}}),Object.defineProperty(t,"assignChanged",{enumerable:!0,get:function(){return l.assignChanged}}),Object.defineProperty(t,"astMapper",{enumerable:!0,get:function(){return l.astMapper}});var i=r(19);Object.defineProperty(t,"toSql",{enumerable:!0,get:function(){return i.toSql}}),n(r(21),t);var c=r(4);Object.defineProperty(t,"intervalToString",{enumerable:!0,get:function(){return c.intervalToString}}),Object.defineProperty(t,"normalizeInterval",{enumerable:!0,get:function(){return c.normalizeInterval}})},function(e,t,r){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.parseGeometricLiteral=t.parseIntervalLiteral=t.parseArrayLiteral=t.parse=t.parseWithComments=t.parseFirst=void 0;const n=r(9),a=s(r(10)),o=s(r(11)),l=s(r(13)),i=s(r(15)),c=s(r(17)),p=r(4),u=r(1);let m,y,b,_,f;function $(e,t){m||(m=n.Grammar.fromCompiled(a.default));const r="string"==typeof t?t:null==t?void 0:t.entry,s="string"==typeof t?null:t,o=()=>d(e,m,r);let l=(null==s?void 0:s.locationTracking)?(0,u.tracking)(o):o();return"string"==typeof t||Array.isArray(l)||(l=[l]),l}function d(e,t,r){try{t.start=null!=r?r:"main";const s=new n.Parser(t);s.feed(e);const a=s.finish();if(!a.length)throw new Error("Unexpected end of input");if(1!==a.length)throw new Error(`💀 Ambiguous SQL syntax: Please file an issue stating the request that has failed at https://github.com/oguimbal/pgsql-ast-parser:\n\n        ${e}\n\n        `);return a[0]}catch(e){if("string"!=typeof(null==e?void 0:e.message))throw e;let t=e.message,r=null;const s=[],n=/A (.+) token based on:/g;let a;for(;a=n.exec(t);)r=null!=r?r:t.substr(0,a.index),s.push(`    - A "${a[1]}" token`);throw r&&(t=r+s.join("\n")+"\n\n"),e.message=t,e}}t.parseFirst=function(e){return $(e)[0]},t.parseWithComments=function(e,t){return(0,u.trackingComments)(()=>$(e,t))},t.parse=$,t.parseArrayLiteral=function(e){return y||(y=n.Grammar.fromCompiled(o.default)),d(e,y)},t.parseIntervalLiteral=function(e){if(e.startsWith("P"))return f||(f=n.Grammar.fromCompiled(c.default)),(0,p.buildInterval)(e,d(e,f));{_||(_=n.Grammar.fromCompiled(i.default));const t=e.toLowerCase();return(0,p.buildInterval)(e,d(t,_))}},t.parseGeometricLiteral=function(e,t){return b||(b=n.Grammar.fromCompiled(l.default)),d(e,b,t)}},function(e,t){e.exports=r(43)},function(e,t,r){"use strict";function s(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),a=r(1);function o(e){return l(e,void 0)}function l(e,t){const r=_(e);return t&&0!==t.length?(0,a.track)(e,{name:r,columns:t.map(e=>({name:_(e)}))}):(0,a.track)(e,{name:r})}function i(e){const t=_(e);return(0,a.track)(e,{value:t})}function c(e){return Array.isArray(e)&&1===e.length&&(e=c(e[0])),Array.isArray(e)&&!e.length?null:(0,a.unbox)(e)}const p=e=>t=>(0,a.track)(t,t[e]),u=e=>Array.isArray(e)?(0,a.track)(e[e.length-1],e[e.length-1]):e;function m(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...m(r));return t}return e?[e]:[]}function y(e){var t;return null!==(t=null==(e=(0,a.unbox)(e))?void 0:e.value)&&void 0!==t?t:e}function b(e){return m((0,a.unbox)(e)).filter(e=>!!e).map(e=>y(e)).filter(e=>"string"==typeof e).map(e=>e.trim()).filter(e=>!!e)}function _(e,t){return b(e).join(t||"")}function f(e){const t={};for(const[r,s]of e)t[r]=s;return t}const $={sensitivity:"accent"},d=e=>(t,r,s)=>{const n=y(t[0]);return o=e,0===n.localeCompare(o,void 0,$)?(0,a.box)(t,e):s;var o},h=d,x=(...e)=>{const t=new Set(e);return(e,r,s)=>{const n="string"==typeof e[0]?e[0]:e[0].value;return t.has(n)?n:s}};function w(e,t){const r=new Set,s=t.map(a.unbox);for(const[t,n]of s){if(r.has(t))throw new Error("conflicting or redundant options");r.add(t),e[t]=(0,a.unbox)(n)}}const v={Lexer:n.lexerAny,ParserRules:[{name:"lparen",symbols:[n.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"rparen",symbols:[n.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:c},{name:"dot",symbols:[n.lexerAny.has("dot")?{type:"dot"}:dot],postprocess:s},{name:"float",symbols:[n.lexerAny.has("float")?{type:"float"}:float],postprocess:e=>(0,a.box)(e,parseFloat(c(e)))},{name:"int",symbols:[n.lexerAny.has("int")?{type:"int"}:int],postprocess:e=>(0,a.box)(e,parseInt(c(e),10))},{name:"comma",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:s},{name:"star",symbols:[n.lexerAny.has("star")?{type:"star"}:star],postprocess:e=>(0,a.box)(e,e[0].value)},{name:"string$subexpression$1",symbols:[n.lexerAny.has("string")?{type:"string"}:string]},{name:"string$subexpression$1",symbols:[n.lexerAny.has("eString")?{type:"eString"}:eString]},{name:"string",symbols:["string$subexpression$1"],postprocess:e=>(0,a.box)(e,c(e[0]).value)},{name:"ident",symbols:["word"],postprocess:p(0)},{name:"word",symbols:[n.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary],postprocess:e=>(0,a.box)(e,"primary")},{name:"word",symbols:[n.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:e=>(0,a.box)(e,"unique")},{name:"word",symbols:[n.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:e=>(0,a.box)(e,e[0].value,!0)},{name:"word",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:e=>(0,a.box)(e,e[0].value)},{name:"collist_paren",symbols:["lparen","collist","rparen"],postprocess:p(1)},{name:"collist$ebnf$1",symbols:[]},{name:"collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:u},{name:"collist$ebnf$1",symbols:["collist$ebnf$1","collist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"collist",symbols:["ident","collist$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"kw_between",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("between")},{name:"kw_conflict",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("conflict")},{name:"kw_nothing",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("nothing")},{name:"kw_begin",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("begin")},{name:"kw_if",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("if")},{name:"kw_exists",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("exists")},{name:"kw_key",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("key")},{name:"kw_index",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("index")},{name:"kw_extension",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("extension")},{name:"kw_schema",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("schema")},{name:"kw_nulls",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("nulls")},{name:"kw_first",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("first")},{name:"kw_last",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("last")},{name:"kw_start",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("start")},{name:"kw_restart",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("restart")},{name:"kw_filter",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("filter")},{name:"kw_commit",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("commit")},{name:"kw_tablespace",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("tablespace")},{name:"kw_transaction",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("transaction")},{name:"kw_work",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("work")},{name:"kw_read",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("read")},{name:"kw_write",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("write")},{name:"kw_isolation",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("isolation")},{name:"kw_level",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("level")},{name:"kw_serializable",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("serializable")},{name:"kw_rollback",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("rollback")},{name:"kw_insert",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("insert")},{name:"kw_value",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("value")},{name:"kw_values",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("values")},{name:"kw_update",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("update")},{name:"kw_column",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("column")},{name:"kw_set",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("set")},{name:"kw_version",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("version")},{name:"kw_alter",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("alter")},{name:"kw_rename",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("rename")},{name:"kw_sequence",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("sequence")},{name:"kw_temp",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("temp")},{name:"kw_temporary",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("temporary")},{name:"kw_add",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("add")},{name:"kw_owner",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("owner")},{name:"kw_owned",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("owned")},{name:"kw_including",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("including")},{name:"kw_excluding",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("excluding")},{name:"kw_none",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("none")},{name:"kw_drop",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("drop")},{name:"kw_operator",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("operator")},{name:"kw_minvalue",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("minvalue")},{name:"kw_maxvalue",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("maxvalue")},{name:"kw_data",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("data")},{name:"kw_type",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("type")},{name:"kw_trigger",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("trigger")},{name:"kw_delete",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("delete")},{name:"kw_cache",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("cache")},{name:"kw_cascade",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("cascade")},{name:"kw_no",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("no")},{name:"kw_timestamp",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("timestamp")},{name:"kw_cycle",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("cycle")},{name:"kw_function",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("function")},{name:"kw_returns",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("returns")},{name:"kw_language",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("language")},{name:"kw_out",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("out")},{name:"kw_inout",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("inout")},{name:"kw_variadic",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("variadic")},{name:"kw_action",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("action")},{name:"kw_restrict",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("restrict")},{name:"kw_truncate",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("truncate")},{name:"kw_increment",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("increment")},{name:"kw_by",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("by")},{name:"kw_row",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("row")},{name:"kw_rows",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("rows")},{name:"kw_next",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("next")},{name:"kw_match",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("match")},{name:"kw_replace",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("replace")},{name:"kw_recursive",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("recursive")},{name:"kw_view",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("view")},{name:"kw_cascaded",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("cascaded")},{name:"kw_unlogged",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("unlogged")},{name:"kw_global",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("global")},{name:"kw_option",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("option")},{name:"kw_materialized",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("materialized")},{name:"kw_partial",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("partial")},{name:"kw_partition",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("partition")},{name:"kw_simple",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("simple")},{name:"kw_generated",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("generated")},{name:"kw_always",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("always")},{name:"kw_identity",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("identity")},{name:"kw_name",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("name")},{name:"kw_enum",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("enum")},{name:"kw_show",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("show")},{name:"kw_ordinality",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("ordinality")},{name:"kw_overriding",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("overriding")},{name:"kw_over",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("over")},{name:"kw_system",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("system")},{name:"kw_comment",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("comment")},{name:"kw_time",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("time")},{name:"kw_at",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("at")},{name:"kw_zone",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("zone")},{name:"kw_interval",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("interval")},{name:"kw_hour",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("hour")},{name:"kw_minute",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("minute")},{name:"kw_local",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("local")},{name:"kw_prepare",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("prepare")},{name:"kw_deallocate",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("deallocate")},{name:"kw_raise",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("raise")},{name:"kw_continue",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("continue")},{name:"kw_share",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("share")},{name:"kw_refresh",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:d("refresh")},{name:"kw_ifnotexists",symbols:["kw_if",n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,"kw_exists"]},{name:"kw_ifexists",symbols:["kw_if","kw_exists"]},{name:"kw_withordinality",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_ordinality"]},{name:"kw_not_null",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not,n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"kw_primary_key",symbols:[n.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary,"kw_key"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$2",symbols:["int"]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"data_type$ebnf$1$subexpression$1$macrocall$2"],postprocess:u},{name:"data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type$ebnf$1$subexpression$1$macrocall$1",symbols:["data_type$ebnf$1$subexpression$1$macrocall$2","data_type$ebnf$1$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"data_type$ebnf$1$subexpression$1",symbols:["lparen","data_type$ebnf$1$subexpression$1$macrocall$1","rparen"],postprocess:p(1)},{name:"data_type$ebnf$1",symbols:["data_type$ebnf$1$subexpression$1"],postprocess:s},{name:"data_type$ebnf$1",symbols:[],postprocess:()=>null},{name:"data_type$ebnf$2$subexpression$1",symbols:[n.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,n.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$1"]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2",symbols:[n.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,n.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"data_type$ebnf$2$subexpression$1$ebnf$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1","data_type$ebnf$2$subexpression$1$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type$ebnf$2$subexpression$1",symbols:["data_type$ebnf$2$subexpression$1$ebnf$1"]},{name:"data_type$ebnf$2",symbols:["data_type$ebnf$2$subexpression$1"],postprocess:s},{name:"data_type$ebnf$2",symbols:[],postprocess:()=>null},{name:"data_type",symbols:["data_type_simple","data_type$ebnf$1","data_type$ebnf$2"],postprocess:e=>{let t=e[2];let r;if(r={...c(e[0]),...Array.isArray(e[1])&&e[1].length?{config:e[1].map(c)}:{}},t){"kw_array"===t[0].type&&(t=[["array"]]);for(const e of t[0])r={kind:"array",arrayOf:r}}return(0,a.track)(e,r)}},{name:"data_type_list$ebnf$1",symbols:[]},{name:"data_type_list$ebnf$1$subexpression$1",symbols:["comma","data_type"],postprocess:u},{name:"data_type_list$ebnf$1",symbols:["data_type_list$ebnf$1","data_type_list$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"data_type_list",symbols:["data_type","data_type_list$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"data_type_simple",symbols:["data_type_text"],postprocess:e=>(0,a.track)(e,{name:_(e," ")})},{name:"data_type_simple",symbols:["data_type_numeric"],postprocess:e=>(0,a.track)(e,{name:_(e," ")})},{name:"data_type_simple",symbols:["data_type_date"]},{name:"data_type_simple",symbols:["qualified_name_mark_quotes"]},{name:"data_type_numeric$subexpression$1",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("double")},{name:"data_type_numeric",symbols:["data_type_numeric$subexpression$1",n.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"data_type_text$subexpression$1",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:x("character","bit")},{name:"data_type_text$subexpression$2",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("varying")},{name:"data_type_text",symbols:["data_type_text$subexpression$1","data_type_text$subexpression$2"]},{name:"data_type_date$subexpression$1",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:x("timestamp","time")},{name:"data_type_date$subexpression$2",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$2",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("without")},{name:"data_type_date$subexpression$3",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("time")},{name:"data_type_date$subexpression$4",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$1","data_type_date$subexpression$2","data_type_date$subexpression$3","data_type_date$subexpression$4"],postprocess:e=>(0,a.track)(e,{name:_(e," ")})},{name:"data_type_date$subexpression$5",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:x("timestamp","time")},{name:"data_type_date$subexpression$6",symbols:["lparen","int","rparen"],postprocess:p(1)},{name:"data_type_date$subexpression$7",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"data_type_date$subexpression$7",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("without")},{name:"data_type_date$subexpression$8",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("time")},{name:"data_type_date$subexpression$9",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:h("zone")},{name:"data_type_date",symbols:["data_type_date$subexpression$5","data_type_date$subexpression$6","data_type_date$subexpression$7","data_type_date$subexpression$8","data_type_date$subexpression$9"],postprocess:e=>(0,a.track)(e,{name:`timestamp ${_(e[2])} time zone`,config:[(0,a.unbox)(e[1])]})},{name:"ident_aliased$subexpression$1",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"ident"],postprocess:u},{name:"ident_aliased",symbols:["ident_aliased$subexpression$1"]},{name:"ident_aliased",symbols:["ident"],postprocess:c},{name:"table_ref",symbols:["qualified_name"],postprocess:c},{name:"qcolumn$ebnf$1$subexpression$1",symbols:["dot","ident"],postprocess:u},{name:"qcolumn$ebnf$1",symbols:["qcolumn$ebnf$1$subexpression$1"],postprocess:s},{name:"qcolumn$ebnf$1",symbols:[],postprocess:()=>null},{name:"qcolumn",symbols:["ident","dot","ident","qcolumn$ebnf$1"],postprocess:e=>e[3]?(0,a.track)(e,{schema:(0,a.unbox)(e[0]),table:(0,a.unbox)(e[2]),column:(0,a.unbox)(e[3])}):(0,a.track)(e,{table:(0,a.unbox)(e[0]),column:(0,a.unbox)(e[2])})},{name:"table_ref_aliased$ebnf$1",symbols:["ident_aliased"],postprocess:s},{name:"table_ref_aliased$ebnf$1",symbols:[],postprocess:()=>null},{name:"table_ref_aliased",symbols:["table_ref","table_ref_aliased$ebnf$1"],postprocess:e=>{const t=c(e[1]);return(0,a.track)(e,{...c(e[0]),...t?{alias:t}:{}})}},{name:"qualified_name",symbols:["qname_ident"],postprocess:e=>(0,a.track)(e,{name:_(e)})},{name:"qualified_name",symbols:["ident","dot","ident_extended"],postprocess:e=>{const t=_(e[0]),r=_(e[2]);return(0,a.track)(e,{schema:t,name:r})}},{name:"qualified_name",symbols:[n.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:e=>(0,a.track)(e,{name:"current_schema"})},{name:"qualified_name_mark_quotes",symbols:["qname_ident"],postprocess:e=>(0,a.track)(e,{name:_(e),...(0,a.doubleQuoted)(e)})},{name:"qualified_name_mark_quotes",symbols:["ident","dot","ident_extended"],postprocess:e=>{const t=_(e[0]),r=_(e[2]);return(0,a.track)(e,{schema:t,name:r,...(0,a.doubleQuoted)(e[2])})}},{name:"qualified_name_mark_quotes",symbols:[n.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema],postprocess:e=>(0,a.track)(e,{name:"current_schema"})},{name:"qname_ident",symbols:["ident"]},{name:"qname_ident",symbols:[n.lexerAny.has("kw_precision")?{type:"kw_precision"}:kw_precision]},{name:"qname",symbols:["qualified_name"],postprocess:c},{name:"any_keyword",symbols:[n.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_analyse")?{type:"kw_analyse"}:kw_analyse]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_analyze")?{type:"kw_analyze"}:kw_analyze]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_asymmetric")?{type:"kw_asymmetric"}:kw_asymmetric]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_authorization")?{type:"kw_authorization"}:kw_authorization]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_binary")?{type:"kw_binary"}:kw_binary]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_both")?{type:"kw_both"}:kw_both]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_collation")?{type:"kw_collation"}:kw_collation]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_except")?{type:"kw_except"}:kw_except]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_freeze")?{type:"kw_freeze"}:kw_freeze]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_grant")?{type:"kw_grant"}:kw_grant]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_having")?{type:"kw_having"}:kw_having]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_initially")?{type:"kw_initially"}:kw_initially]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_intersect")?{type:"kw_intersect"}:kw_intersect]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_lateral")?{type:"kw_lateral"}:kw_lateral]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_leading")?{type:"kw_leading"}:kw_leading]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_natural")?{type:"kw_natural"}:kw_natural]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_overlaps")?{type:"kw_overlaps"}:kw_overlaps]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_primary")?{type:"kw_primary"}:kw_primary]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_similar")?{type:"kw_similar"}:kw_similar]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_symmetric")?{type:"kw_symmetric"}:kw_symmetric]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_tablesample")?{type:"kw_tablesample"}:kw_tablesample]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_trailing")?{type:"kw_trailing"}:kw_trailing]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_variadic")?{type:"kw_variadic"}:kw_variadic]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_verbose")?{type:"kw_verbose"}:kw_verbose]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_window")?{type:"kw_window"}:kw_window]},{name:"any_keyword",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with]},{name:"ident_extended",symbols:["ident"]},{name:"ident_extended",symbols:["any_keyword"]},{name:"select_statement$ebnf$1",symbols:["select_from"],postprocess:s},{name:"select_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$2",symbols:["select_where"],postprocess:s},{name:"select_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$3",symbols:["select_groupby"],postprocess:s},{name:"select_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$4",symbols:["select_order_by"],postprocess:s},{name:"select_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$5",symbols:["select_limit_offset"],postprocess:s},{name:"select_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"select_statement$ebnf$6",symbols:["select_for"],postprocess:s},{name:"select_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"select_statement",symbols:["select_what","select_statement$ebnf$1","select_statement$ebnf$2","select_statement$ebnf$3","select_statement$ebnf$4","select_statement$ebnf$5","select_statement$ebnf$6"],postprocess:e=>{let[t,r,s,n,o,l,i]=e;return r=c(r),n=n&&(1===n.length&&"list"===n[0].type?n[0].expressions:n),(0,a.track)(e,{...t,...r?{from:Array.isArray(r)?r:[r]}:{},...n?{groupBy:n}:{},...l?{limit:c(l)}:{},...o?{orderBy:o}:{},...s?{where:s}:{},...i?{for:i[1]}:{},type:"select"})}},{name:"select_from",symbols:[n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_items"],postprocess:u},{name:"select_from_items$ebnf$1",symbols:[]},{name:"select_from_items$ebnf$1$subexpression$1",symbols:["comma","select_from_item"],postprocess:u},{name:"select_from_items$ebnf$1",symbols:["select_from_items$ebnf$1","select_from_items$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_from_items",symbols:["select_from_item","select_from_items$ebnf$1"],postprocess:([e,t])=>[...e,...m(t)||[]]},{name:"select_from_item",symbols:["select_from_subject"]},{name:"select_from_item",symbols:["select_from_item_joins"],postprocess:p(0)},{name:"select_from_item_joins$subexpression$1",symbols:["select_from_item"],postprocess:p(0)},{name:"select_from_item_joins",symbols:["select_from_item_joins$subexpression$1","select_table_join"],postprocess:m},{name:"select_from_item_joins",symbols:["lparen","select_from_item_joins","rparen"],postprocess:p(1)},{name:"select_from_subject",symbols:["stb_table"],postprocess:c},{name:"select_from_subject",symbols:["stb_statement"],postprocess:c},{name:"select_from_subject",symbols:["stb_call"],postprocess:c},{name:"stb_opts$ebnf$1",symbols:["collist_paren"],postprocess:s},{name:"stb_opts$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_opts",symbols:["ident_aliased","stb_opts$ebnf$1"],postprocess:e=>(0,a.track)(e,{alias:_(e[0]),...e[1]&&{columnNames:(0,a.unbox)(e[1]).map(o)}})},{name:"stb_table$ebnf$1",symbols:["stb_opts"],postprocess:s},{name:"stb_table$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_table",symbols:["table_ref","stb_table$ebnf$1"],postprocess:e=>(0,a.track)(e,{type:"table",name:(0,a.track)(e,{...e[0],...e[1]})})},{name:"stb_statement",symbols:["selection_paren","stb_opts"],postprocess:e=>(0,a.track)(e,{type:"statement",statement:c(e[0]),...e[1]})},{name:"select_values",symbols:["kw_values","insert_values"],postprocess:e=>(0,a.track)(e,{type:"values",values:e[1]})},{name:"stb_call$ebnf$1",symbols:["kw_withordinality"],postprocess:s},{name:"stb_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call$ebnf$2",symbols:["stb_call_alias"],postprocess:s},{name:"stb_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"stb_call",symbols:["expr_function_call","stb_call$ebnf$1","stb_call$ebnf$2"],postprocess:e=>{const t=e[1],r=e[2];return t||r?(0,a.track)(e,{...e[0],...t&&{withOrdinality:!0},alias:r?l(r[0],r[1]):void 0}):e[0]}},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as],postprocess:s},{name:"stb_call_alias$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias$subexpression$1",symbols:["stb_call_alias$subexpression$1$ebnf$1","ident"],postprocess:u},{name:"stb_call_alias$ebnf$1",symbols:["stb_call_alias_list"],postprocess:s},{name:"stb_call_alias$ebnf$1",symbols:[],postprocess:()=>null},{name:"stb_call_alias",symbols:["stb_call_alias$subexpression$1","stb_call_alias$ebnf$1"]},{name:"stb_call_alias_list",symbols:["lparen","stb_call_alias_list_raw","rparen"],postprocess:p(1)},{name:"stb_call_alias_list_raw$ebnf$1",symbols:[]},{name:"stb_call_alias_list_raw$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:u},{name:"stb_call_alias_list_raw$ebnf$1",symbols:["stb_call_alias_list_raw$ebnf$1","stb_call_alias_list_raw$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"stb_call_alias_list_raw",symbols:["ident","stb_call_alias_list_raw$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"select_table_join$ebnf$1",symbols:["select_table_join_clause"],postprocess:s},{name:"select_table_join$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_table_join",symbols:["select_join_op",n.lexerAny.has("kw_join")?{type:"kw_join"}:kw_join,"select_from_subject","select_table_join$ebnf$1"],postprocess:e=>(0,a.track)(e,{...c(e[2]),join:{type:_(e[0]," "),...e[3]&&c(e[3])}})},{name:"select_table_join_clause",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"expr"],postprocess:e=>(0,a.track)(e,{on:u(e)})},{name:"select_table_join_clause$macrocall$2",symbols:["ident"]},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:[]},{name:"select_table_join_clause$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"select_table_join_clause$macrocall$2"],postprocess:u},{name:"select_table_join_clause$macrocall$1$ebnf$1",symbols:["select_table_join_clause$macrocall$1$ebnf$1","select_table_join_clause$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_table_join_clause$macrocall$1",symbols:["select_table_join_clause$macrocall$2","select_table_join_clause$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"select_table_join_clause",symbols:[n.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"lparen","select_table_join_clause$macrocall$1","rparen"],postprocess:e=>(0,a.track)(e,{using:e[2].map(o)})},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[n.lexerAny.has("kw_inner")?{type:"kw_inner"}:kw_inner],postprocess:s},{name:"select_join_op$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$1",symbols:["select_join_op$subexpression$1$ebnf$1"],postprocess:e=>(0,a.box)(e,"INNER JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$1"]},{name:"select_join_op$subexpression$2",symbols:[n.lexerAny.has("kw_cross")?{type:"kw_cross"}:kw_cross],postprocess:e=>(0,a.box)(e,"CROSS JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$2"]},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[n.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:s},{name:"select_join_op$subexpression$3$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$3",symbols:[n.lexerAny.has("kw_left")?{type:"kw_left"}:kw_left,"select_join_op$subexpression$3$ebnf$1"],postprocess:e=>(0,a.box)(e,"LEFT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$3"]},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[n.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:s},{name:"select_join_op$subexpression$4$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$4",symbols:[n.lexerAny.has("kw_right")?{type:"kw_right"}:kw_right,"select_join_op$subexpression$4$ebnf$1"],postprocess:e=>(0,a.box)(e,"RIGHT JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$4"]},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[n.lexerAny.has("kw_outer")?{type:"kw_outer"}:kw_outer],postprocess:s},{name:"select_join_op$subexpression$5$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_join_op$subexpression$5",symbols:[n.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full,"select_join_op$subexpression$5$ebnf$1"],postprocess:e=>(0,a.box)(e,"FULL JOIN")},{name:"select_join_op",symbols:["select_join_op$subexpression$5"]},{name:"select_what$ebnf$1",symbols:["select_distinct"],postprocess:s},{name:"select_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_what$ebnf$2",symbols:["select_expr_list_aliased"],postprocess:s},{name:"select_what$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_what",symbols:[n.lexerAny.has("kw_select")?{type:"kw_select"}:kw_select,"select_what$ebnf$1","select_what$ebnf$2"],postprocess:e=>(0,a.track)(e,{columns:e[2],...e[1]&&{distinct:(0,a.unbox)(e[1])}})},{name:"select_expr_list_aliased$ebnf$1",symbols:[]},{name:"select_expr_list_aliased$ebnf$1$subexpression$1",symbols:["comma","select_expr_list_item"],postprocess:u},{name:"select_expr_list_aliased$ebnf$1",symbols:["select_expr_list_aliased$ebnf$1","select_expr_list_aliased$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_expr_list_aliased",symbols:["select_expr_list_item","select_expr_list_aliased$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"select_expr_list_item$ebnf$1",symbols:["ident_aliased"],postprocess:s},{name:"select_expr_list_item$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_expr_list_item",symbols:["expr","select_expr_list_item$ebnf$1"],postprocess:e=>(0,a.track)(e,{expr:e[0],...e[1]?{alias:o(e[1])}:{}})},{name:"select_distinct",symbols:[n.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:e=>(0,a.box)(e,"all")},{name:"select_distinct$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"lparen","expr_list_raw","rparen"],postprocess:p(2)},{name:"select_distinct$ebnf$1",symbols:["select_distinct$ebnf$1$subexpression$1"],postprocess:s},{name:"select_distinct$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_distinct",symbols:[n.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct,"select_distinct$ebnf$1"],postprocess:e=>(0,a.box)(e,e[1]||"distinct")},{name:"select_where",symbols:[n.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:u},{name:"select_groupby",symbols:[n.lexerAny.has("kw_group")?{type:"kw_group"}:kw_group,"kw_by","expr_list_raw"],postprocess:u},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$1",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1$subexpression$1"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_offset"]},{name:"select_limit_offset$ebnf$1$subexpression$2",symbols:["select_limit"]},{name:"select_limit_offset$ebnf$1",symbols:["select_limit_offset$ebnf$1","select_limit_offset$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"select_limit_offset",symbols:["select_limit_offset$ebnf$1"],postprocess:(e,t)=>{const r=c(e);if(!Array.isArray(r))return(0,a.track)(e,r);if(2!=r.length)return t;const s=c(r[0]),n=c(r[1]);return s.offset&&n.offset||s.limit&&n.limit?t:(0,a.track)(e,{...s,...n})}},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_row"]},{name:"select_offset$ebnf$1$subexpression$1",symbols:["kw_rows"]},{name:"select_offset$ebnf$1",symbols:["select_offset$ebnf$1$subexpression$1"],postprocess:s},{name:"select_offset$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_offset",symbols:[n.lexerAny.has("kw_offset")?{type:"kw_offset"}:kw_offset,"expr_nostar","select_offset$ebnf$1"],postprocess:e=>(0,a.track)(e,{offset:c(e[1])})},{name:"select_limit$subexpression$1",symbols:["select_limit_1"]},{name:"select_limit$subexpression$1",symbols:["select_limit_2"]},{name:"select_limit",symbols:["select_limit$subexpression$1"],postprocess:e=>(0,a.track)(e,{limit:c(e)})},{name:"select_limit_1",symbols:[n.lexerAny.has("kw_limit")?{type:"kw_limit"}:kw_limit,"expr_nostar"],postprocess:u},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_first"]},{name:"select_limit_2$ebnf$1$subexpression$1",symbols:["kw_next"]},{name:"select_limit_2$ebnf$1",symbols:["select_limit_2$ebnf$1$subexpression$1"],postprocess:s},{name:"select_limit_2$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_limit_2$subexpression$1",symbols:["kw_row"]},{name:"select_limit_2$subexpression$1",symbols:["kw_rows"]},{name:"select_limit_2",symbols:[n.lexerAny.has("kw_fetch")?{type:"kw_fetch"}:kw_fetch,"select_limit_2$ebnf$1","expr_nostar","select_limit_2$subexpression$1",n.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:p(2)},{name:"select_for$subexpression$1",symbols:["kw_update"],postprocess:e=>(0,a.track)(e,{type:"update"})},{name:"select_for$subexpression$1",symbols:["kw_no","kw_key","kw_update"],postprocess:e=>(0,a.track)(e,{type:"no key update"})},{name:"select_for$subexpression$1",symbols:["kw_share"],postprocess:e=>(0,a.track)(e,{type:"share"})},{name:"select_for$subexpression$1",symbols:["kw_key","kw_share"],postprocess:e=>(0,a.track)(e,{type:"key share"})},{name:"select_for",symbols:[n.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"select_for$subexpression$1"]},{name:"select_order_by$subexpression$1",symbols:[n.lexerAny.has("kw_order")?{type:"kw_order"}:kw_order,"kw_by"]},{name:"select_order_by$ebnf$1",symbols:[]},{name:"select_order_by$ebnf$1$subexpression$1",symbols:["comma","select_order_by_expr"],postprocess:u},{name:"select_order_by$ebnf$1",symbols:["select_order_by$ebnf$1","select_order_by$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"select_order_by",symbols:["select_order_by$subexpression$1","select_order_by_expr","select_order_by$ebnf$1"],postprocess:([e,t,r])=>[t,...r||[]]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"select_order_by_expr$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"select_order_by_expr$ebnf$1",symbols:["select_order_by_expr$ebnf$1$subexpression$1"],postprocess:s},{name:"select_order_by_expr$ebnf$1",symbols:[],postprocess:()=>null},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"select_order_by_expr$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"select_order_by_expr$ebnf$2$subexpression$1",symbols:["kw_nulls","select_order_by_expr$ebnf$2$subexpression$1$subexpression$1"],postprocess:u},{name:"select_order_by_expr$ebnf$2",symbols:["select_order_by_expr$ebnf$2$subexpression$1"],postprocess:s},{name:"select_order_by_expr$ebnf$2",symbols:[],postprocess:()=>null},{name:"select_order_by_expr",symbols:["expr","select_order_by_expr$ebnf$1","select_order_by_expr$ebnf$2"],postprocess:e=>(0,a.track)(e,{by:e[0],...e[1]&&{order:_(e[1]).toUpperCase()},...e[2]&&{nulls:_(e[2]).toUpperCase()}})},{name:"expr",symbols:["expr_nostar"],postprocess:c},{name:"expr",symbols:["expr_star"],postprocess:c},{name:"expr_nostar",symbols:["expr_paren"],postprocess:c},{name:"expr_nostar",symbols:["expr_or"],postprocess:c},{name:"expr_paren$subexpression$1",symbols:["expr_or_select"]},{name:"expr_paren$subexpression$1",symbols:["expr_list_many"]},{name:"expr_paren",symbols:["lparen","expr_paren$subexpression$1","rparen"],postprocess:p(1)},{name:"expr_or$macrocall$2$macrocall$2",symbols:[n.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or]},{name:"expr_or$macrocall$2$macrocall$1",symbols:["expr_or$macrocall$2$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_or$macrocall$2",symbols:["expr_or$macrocall$2$macrocall$1"]},{name:"expr_or$macrocall$3",symbols:["expr_or"]},{name:"expr_or$macrocall$4",symbols:["expr_and"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_or$macrocall$3"]},{name:"expr_or$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_or$macrocall$4"]},{name:"expr_or$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$1$subexpression$1","expr_or$macrocall$2","expr_or$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_or$macrocall$1",symbols:["expr_or$macrocall$4"],postprocess:c},{name:"expr_or",symbols:["expr_or$macrocall$1"]},{name:"expr_and$macrocall$2$macrocall$2",symbols:[n.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_and$macrocall$2$macrocall$1",symbols:["expr_and$macrocall$2$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_and$macrocall$2",symbols:["expr_and$macrocall$2$macrocall$1"]},{name:"expr_and$macrocall$3",symbols:["expr_and"]},{name:"expr_and$macrocall$4",symbols:["expr_not"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_and$macrocall$3"]},{name:"expr_and$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_and$macrocall$4"]},{name:"expr_and$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$1$subexpression$1","expr_and$macrocall$2","expr_and$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_and$macrocall$1",symbols:["expr_and$macrocall$4"],postprocess:c},{name:"expr_and",symbols:["expr_and$macrocall$1"]},{name:"expr_not$macrocall$2$macrocall$2",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not]},{name:"expr_not$macrocall$2$macrocall$1",symbols:["expr_not$macrocall$2$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_not$macrocall$2",symbols:["expr_not$macrocall$2$macrocall$1"]},{name:"expr_not$macrocall$3",symbols:["expr_not"]},{name:"expr_not$macrocall$4",symbols:["expr_eq"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_not$macrocall$3"]},{name:"expr_not$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$2","expr_not$macrocall$1$subexpression$1"],postprocess:e=>(0,a.track)(e,{type:"unary",...c(e[0]),operand:c(e[1])})},{name:"expr_not$macrocall$1",symbols:["expr_not$macrocall$4"],postprocess:c},{name:"expr_not",symbols:["expr_not$macrocall$1"]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"expr_eq$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_neq")?{type:"op_neq"}:op_neq]},{name:"expr_eq$macrocall$2$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$2"]},{name:"expr_eq$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["expr_eq$macrocall$2$macrocall$1$macrocall$1"],postprocess:c},{name:"expr_eq$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_eq$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,a.track)(e,{op:(_(e[4]," ")||"<error>").toUpperCase(),opSchema:_(e[2])})},{name:"expr_eq$macrocall$2",symbols:["expr_eq$macrocall$2$macrocall$1"]},{name:"expr_eq$macrocall$3",symbols:["expr_eq"]},{name:"expr_eq$macrocall$4",symbols:["expr_is"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_eq$macrocall$3"]},{name:"expr_eq$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_eq$macrocall$4"]},{name:"expr_eq$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$1$subexpression$1","expr_eq$macrocall$2","expr_eq$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_eq$macrocall$1",symbols:["expr_eq$macrocall$4"],postprocess:c},{name:"expr_eq",symbols:["expr_eq$macrocall$1"]},{name:"expr_star",symbols:["star"],postprocess:e=>(0,a.track)(e,{type:"ref",name:"*"})},{name:"expr_is$subexpression$1",symbols:["expr_is"]},{name:"expr_is$subexpression$1",symbols:["expr_paren"]},{name:"expr_is$subexpression$2",symbols:[n.lexerAny.has("kw_isnull")?{type:"kw_isnull"}:kw_isnull]},{name:"expr_is$subexpression$2",symbols:[n.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"expr_is",symbols:["expr_is$subexpression$1","expr_is$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"unary",op:"IS NULL",operand:c(e[0])})},{name:"expr_is$subexpression$3",symbols:["expr_is"]},{name:"expr_is$subexpression$3",symbols:["expr_paren"]},{name:"expr_is$subexpression$4",symbols:[n.lexerAny.has("kw_notnull")?{type:"kw_notnull"}:kw_notnull]},{name:"expr_is$subexpression$4",symbols:[n.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"kw_not_null"]},{name:"expr_is",symbols:["expr_is$subexpression$3","expr_is$subexpression$4"],postprocess:e=>(0,a.track)(e,{type:"unary",op:"IS NOT NULL",operand:c(e[0])})},{name:"expr_is$subexpression$5",symbols:["expr_is"]},{name:"expr_is$subexpression$5",symbols:["expr_paren"]},{name:"expr_is$ebnf$1",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:s},{name:"expr_is$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_is$subexpression$6",symbols:[n.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"expr_is$subexpression$6",symbols:[n.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"expr_is",symbols:["expr_is$subexpression$5",n.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"expr_is$ebnf$1","expr_is$subexpression$6"],postprocess:e=>(0,a.track)(e,{type:"unary",op:"IS "+b([e[2],e[3]]).join(" ").toUpperCase(),operand:c(e[0])})},{name:"expr_is",symbols:["expr_compare"],postprocess:c},{name:"expr_compare$macrocall$2$macrocall$2",symbols:[n.lexerAny.has("op_compare")?{type:"op_compare"}:op_compare]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$2"]},{name:"expr_compare$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["expr_compare$macrocall$2$macrocall$1$macrocall$1"],postprocess:c},{name:"expr_compare$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_compare$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,a.track)(e,{op:(_(e[4]," ")||"<error>").toUpperCase(),opSchema:_(e[2])})},{name:"expr_compare$macrocall$2",symbols:["expr_compare$macrocall$2$macrocall$1"]},{name:"expr_compare$macrocall$3",symbols:["expr_compare"]},{name:"expr_compare$macrocall$4",symbols:["expr_range"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_compare$macrocall$3"]},{name:"expr_compare$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_compare$macrocall$4"]},{name:"expr_compare$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$1$subexpression$1","expr_compare$macrocall$2","expr_compare$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_compare$macrocall$1",symbols:["expr_compare$macrocall$4"],postprocess:c},{name:"expr_compare",symbols:["expr_compare$macrocall$1"]},{name:"expr_range$macrocall$2",symbols:["ops_between"]},{name:"expr_range$macrocall$3",symbols:[n.lexerAny.has("kw_and")?{type:"kw_and"}:kw_and]},{name:"expr_range$macrocall$4",symbols:["expr_range"]},{name:"expr_range$macrocall$5",symbols:["expr_others"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_range$macrocall$4"]},{name:"expr_range$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_range$macrocall$5"]},{name:"expr_range$macrocall$1$subexpression$3",symbols:["expr_paren"]},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$1$subexpression$1","expr_range$macrocall$2","expr_range$macrocall$1$subexpression$2","expr_range$macrocall$3","expr_range$macrocall$1$subexpression$3"],postprocess:e=>(0,a.track)(e,{type:"ternary",value:c(e[0]),lo:c(e[2]),hi:c(e[4]),op:(b(e[1]).join(" ")||"<error>").toUpperCase()})},{name:"expr_range$macrocall$1",symbols:["expr_range$macrocall$5"],postprocess:c},{name:"expr_range",symbols:["expr_range$macrocall$1"]},{name:"expr_others$macrocall$2$macrocall$2",symbols:[n.lexerAny.has("ops_others")?{type:"ops_others"}:ops_others]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$2"]},{name:"expr_others$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_others$macrocall$2$macrocall$1",symbols:["expr_others$macrocall$2$macrocall$1$macrocall$1"],postprocess:c},{name:"expr_others$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_others$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,a.track)(e,{op:(_(e[4]," ")||"<error>").toUpperCase(),opSchema:_(e[2])})},{name:"expr_others$macrocall$2",symbols:["expr_others$macrocall$2$macrocall$1"]},{name:"expr_others$macrocall$3",symbols:["expr_others"]},{name:"expr_others$macrocall$4",symbols:["expr_like"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_others$macrocall$3"]},{name:"expr_others$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_others$macrocall$4"]},{name:"expr_others$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$1$subexpression$1","expr_others$macrocall$2","expr_others$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_others$macrocall$1",symbols:["expr_others$macrocall$4"],postprocess:c},{name:"expr_others",symbols:["expr_others$macrocall$1"]},{name:"expr_like$macrocall$2$macrocall$2",symbols:["ops_like"]},{name:"expr_like$macrocall$2$macrocall$1",symbols:["expr_like$macrocall$2$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_like$macrocall$2",symbols:["expr_like$macrocall$2$macrocall$1"]},{name:"expr_like$macrocall$3",symbols:["expr_like"]},{name:"expr_like$macrocall$4",symbols:["expr_in"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_like$macrocall$3"]},{name:"expr_like$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_like$macrocall$4"]},{name:"expr_like$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$1$subexpression$1","expr_like$macrocall$2","expr_like$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_like$macrocall$1",symbols:["expr_like$macrocall$4"],postprocess:c},{name:"expr_like",symbols:["expr_like$macrocall$1"]},{name:"expr_in$macrocall$2$macrocall$2",symbols:["ops_in"]},{name:"expr_in$macrocall$2$macrocall$1",symbols:["expr_in$macrocall$2$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_in$macrocall$2",symbols:["expr_in$macrocall$2$macrocall$1"]},{name:"expr_in$macrocall$3",symbols:["expr_in"]},{name:"expr_in$macrocall$4",symbols:["expr_add"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_in$macrocall$3"]},{name:"expr_in$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_in$macrocall$4"]},{name:"expr_in$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$1$subexpression$1","expr_in$macrocall$2","expr_in$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_in$macrocall$1",symbols:["expr_in$macrocall$4"],postprocess:c},{name:"expr_in",symbols:["expr_in$macrocall$1"]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_add$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_additive")?{type:"op_additive"}:op_additive]},{name:"expr_add$macrocall$2$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$2"]},{name:"expr_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_add$macrocall$2$macrocall$1",symbols:["expr_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:c},{name:"expr_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_add$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,a.track)(e,{op:(_(e[4]," ")||"<error>").toUpperCase(),opSchema:_(e[2])})},{name:"expr_add$macrocall$2",symbols:["expr_add$macrocall$2$macrocall$1"]},{name:"expr_add$macrocall$3",symbols:["expr_add"]},{name:"expr_add$macrocall$4",symbols:["expr_mult"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_add$macrocall$3"]},{name:"expr_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_add$macrocall$4"]},{name:"expr_add$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$1$subexpression$1","expr_add$macrocall$2","expr_add$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_add$macrocall$1",symbols:["expr_add$macrocall$4"],postprocess:c},{name:"expr_add",symbols:["expr_add$macrocall$1"]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("star")?{type:"star"}:star]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_div")?{type:"op_div"}:op_div]},{name:"expr_mult$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_mod")?{type:"op_mod"}:op_mod]},{name:"expr_mult$macrocall$2$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$2"]},{name:"expr_mult$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["expr_mult$macrocall$2$macrocall$1$macrocall$1"],postprocess:c},{name:"expr_mult$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_mult$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,a.track)(e,{op:(_(e[4]," ")||"<error>").toUpperCase(),opSchema:_(e[2])})},{name:"expr_mult$macrocall$2",symbols:["expr_mult$macrocall$2$macrocall$1"]},{name:"expr_mult$macrocall$3",symbols:["expr_mult"]},{name:"expr_mult$macrocall$4",symbols:["expr_exp"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_mult$macrocall$3"]},{name:"expr_mult$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_mult$macrocall$4"]},{name:"expr_mult$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$1$subexpression$1","expr_mult$macrocall$2","expr_mult$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_mult$macrocall$1",symbols:["expr_mult$macrocall$4"],postprocess:c},{name:"expr_mult",symbols:["expr_mult$macrocall$1"]},{name:"expr_exp$macrocall$2$macrocall$2",symbols:[n.lexerAny.has("op_exp")?{type:"op_exp"}:op_exp]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$2"]},{name:"expr_exp$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["expr_exp$macrocall$2$macrocall$1$macrocall$1"],postprocess:c},{name:"expr_exp$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_exp$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,a.track)(e,{op:(_(e[4]," ")||"<error>").toUpperCase(),opSchema:_(e[2])})},{name:"expr_exp$macrocall$2",symbols:["expr_exp$macrocall$2$macrocall$1"]},{name:"expr_exp$macrocall$3",symbols:["expr_exp"]},{name:"expr_exp$macrocall$4",symbols:["expr_unary_add"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_exp$macrocall$3"]},{name:"expr_exp$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_exp$macrocall$4"]},{name:"expr_exp$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$1$subexpression$1","expr_exp$macrocall$2","expr_exp$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_exp$macrocall$1",symbols:["expr_exp$macrocall$4"],postprocess:c},{name:"expr_exp",symbols:["expr_exp$macrocall$1"]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_plus")?{type:"op_plus"}:op_plus]},{name:"expr_unary_add$macrocall$2$macrocall$2$subexpression$1",symbols:[n.lexerAny.has("op_minus")?{type:"op_minus"}:op_minus]},{name:"expr_unary_add$macrocall$2$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2$subexpression$1"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$2"]},{name:"expr_unary_add$macrocall$2$macrocall$1$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["expr_unary_add$macrocall$2$macrocall$1$macrocall$1"],postprocess:c},{name:"expr_unary_add$macrocall$2$macrocall$1",symbols:["kw_operator","lparen","ident","dot","expr_unary_add$macrocall$2$macrocall$2","rparen"],postprocess:e=>(0,a.track)(e,{op:(_(e[4]," ")||"<error>").toUpperCase(),opSchema:_(e[2])})},{name:"expr_unary_add$macrocall$2",symbols:["expr_unary_add$macrocall$2$macrocall$1"]},{name:"expr_unary_add$macrocall$3",symbols:["expr_unary_add"]},{name:"expr_unary_add$macrocall$4",symbols:["expr_various_constructs"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_unary_add$macrocall$3"]},{name:"expr_unary_add$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$2","expr_unary_add$macrocall$1$subexpression$1"],postprocess:e=>(0,a.track)(e,{type:"unary",...c(e[0]),operand:c(e[1])})},{name:"expr_unary_add$macrocall$1",symbols:["expr_unary_add$macrocall$4"],postprocess:c},{name:"expr_unary_add",symbols:["expr_unary_add$macrocall$1"]},{name:"expr_various_constructs$macrocall$2$macrocall$2",symbols:["various_binaries"]},{name:"expr_various_constructs$macrocall$2$macrocall$1",symbols:["expr_various_constructs$macrocall$2$macrocall$2"],postprocess:e=>(0,a.track)(e,{op:(_(e," ")||"<error>").toUpperCase()})},{name:"expr_various_constructs$macrocall$2",symbols:["expr_various_constructs$macrocall$2$macrocall$1"]},{name:"expr_various_constructs$macrocall$3",symbols:["expr_various_constructs"]},{name:"expr_various_constructs$macrocall$4",symbols:["expr_array_index"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_various_constructs$macrocall$3"]},{name:"expr_various_constructs$macrocall$1$subexpression$1",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_various_constructs$macrocall$4"]},{name:"expr_various_constructs$macrocall$1$subexpression$2",symbols:["expr_paren"]},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$1$subexpression$1","expr_various_constructs$macrocall$2","expr_various_constructs$macrocall$1$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"binary",left:c(e[0]),right:c(e[2]),...c(e[1])})},{name:"expr_various_constructs$macrocall$1",symbols:["expr_various_constructs$macrocall$4"],postprocess:c},{name:"expr_various_constructs",symbols:["expr_various_constructs$macrocall$1"]},{name:"expr_array_index$subexpression$1",symbols:["expr_array_index"]},{name:"expr_array_index$subexpression$1",symbols:["expr_paren"]},{name:"expr_array_index",symbols:["expr_array_index$subexpression$1",n.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_nostar",n.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>(0,a.track)(e,{type:"arrayIndex",array:c(e[0]),index:c(e[2])})},{name:"expr_array_index",symbols:["expr_member"],postprocess:c},{name:"expr_member$subexpression$1",symbols:["expr_member"]},{name:"expr_member$subexpression$1",symbols:["expr_paren"]},{name:"expr_member$subexpression$2",symbols:["string"]},{name:"expr_member$subexpression$2",symbols:["int"]},{name:"expr_member",symbols:["expr_member$subexpression$1","ops_member","expr_member$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"member",operand:c(e[0]),op:e[1],member:c(e[2])})},{name:"expr_member$subexpression$3",symbols:["expr_member"]},{name:"expr_member$subexpression$3",symbols:["expr_paren"]},{name:"expr_member",symbols:["expr_member$subexpression$3",n.lexerAny.has("op_cast")?{type:"op_cast"}:op_cast,"data_type"],postprocess:e=>(0,a.track)(e,{type:"cast",operand:c(e[0]),to:e[2]})},{name:"expr_member",symbols:[n.lexerAny.has("kw_cast")?{type:"kw_cast"}:kw_cast,"lparen","expr_nostar",n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type","rparen"],postprocess:e=>(0,a.track)(e,{type:"cast",operand:c(e[2]),to:e[4]})},{name:"expr_member",symbols:["data_type","string"],postprocess:e=>(0,a.track)(e,{type:"cast",operand:(0,a.track)(e[1],{type:"string",value:(0,a.unbox)(e[1])}),to:(0,a.unbox)(e[0])})},{name:"expr_member",symbols:["expr_dot"],postprocess:c},{name:"expr_dot$subexpression$1",symbols:["word"]},{name:"expr_dot$subexpression$1",symbols:["star"]},{name:"expr_dot",symbols:["qname",n.lexerAny.has("dot")?{type:"dot"}:dot,"expr_dot$subexpression$1"],postprocess:e=>(0,a.track)(e,{type:"ref",table:c(e[0]),name:_(e[2])})},{name:"expr_dot",symbols:["expr_final"],postprocess:c},{name:"expr_final",symbols:["expr_basic"]},{name:"expr_final",symbols:["expr_primary"]},{name:"expr_basic",symbols:["expr_special_calls"]},{name:"expr_basic",symbols:["expr_call"]},{name:"expr_basic",symbols:["expr_array"]},{name:"expr_basic",symbols:["expr_case"]},{name:"expr_basic",symbols:["expr_extract"]},{name:"expr_basic",symbols:["word"],postprocess:e=>(0,a.track)(e,{type:"ref",name:c(e[0])})},{name:"expr_array$ebnf$1",symbols:["expr_subarray_items"],postprocess:s},{name:"expr_array$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_array",symbols:[n.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,n.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_array$ebnf$1",n.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:e=>(0,a.track)(e,{type:"array",expressions:e[2]||[]})},{name:"expr_array",symbols:[n.lexerAny.has("kw_array")?{type:"kw_array"}:kw_array,"lparen","selection","rparen"],postprocess:e=>(0,a.track)(e,{type:"array select",select:c(e[2])})},{name:"expr_subarray$ebnf$1",symbols:["expr_subarray_items"],postprocess:s},{name:"expr_subarray$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_subarray",symbols:[n.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket,"expr_subarray$ebnf$1",n.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket],postprocess:p(1)},{name:"expr_subarray_items$macrocall$2",symbols:["expr_list_item"]},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$2"],postprocess:u},{name:"expr_subarray_items$macrocall$1$ebnf$1",symbols:["expr_subarray_items$macrocall$1$ebnf$1","expr_subarray_items$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_subarray_items$macrocall$1",symbols:["expr_subarray_items$macrocall$2","expr_subarray_items$macrocall$1$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$1"],postprocess:e=>e[0].map(c)},{name:"expr_subarray_items$macrocall$4",symbols:["expr_subarray"]},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:[]},{name:"expr_subarray_items$macrocall$3$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"expr_subarray_items$macrocall$4"],postprocess:u},{name:"expr_subarray_items$macrocall$3$ebnf$1",symbols:["expr_subarray_items$macrocall$3$ebnf$1","expr_subarray_items$macrocall$3$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_subarray_items$macrocall$3",symbols:["expr_subarray_items$macrocall$4","expr_subarray_items$macrocall$3$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"expr_subarray_items",symbols:["expr_subarray_items$macrocall$3"],postprocess:e=>e[0].map(e=>(0,a.track)(e,{type:"array",expressions:e[0].map(c)}))},{name:"expr_function_call$ebnf$1",symbols:["expr_list_raw"],postprocess:s},{name:"expr_function_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_function_call",symbols:["expr_fn_name","lparen","expr_function_call$ebnf$1","rparen"],postprocess:e=>(0,a.track)(e,{type:"call",function:c(e[0]),args:e[2]||[]})},{name:"expr_call$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_call$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_distinct")?{type:"kw_distinct"}:kw_distinct]},{name:"expr_call$ebnf$1",symbols:["expr_call$ebnf$1$subexpression$1"],postprocess:s},{name:"expr_call$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$2",symbols:["expr_list_raw"],postprocess:s},{name:"expr_call$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$3",symbols:["select_order_by"],postprocess:s},{name:"expr_call$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$4$subexpression$1",symbols:["kw_filter","lparen",n.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr","rparen"],postprocess:p(3)},{name:"expr_call$ebnf$4",symbols:["expr_call$ebnf$4$subexpression$1"],postprocess:s},{name:"expr_call$ebnf$4",symbols:[],postprocess:()=>null},{name:"expr_call$ebnf$5",symbols:["expr_call_over"],postprocess:s},{name:"expr_call$ebnf$5",symbols:[],postprocess:()=>null},{name:"expr_call",symbols:["expr_fn_name","lparen","expr_call$ebnf$1","expr_call$ebnf$2","expr_call$ebnf$3","rparen","expr_call$ebnf$4","expr_call$ebnf$5"],postprocess:e=>(0,a.track)(e,{type:"call",function:c(e[0]),...e[2]&&{distinct:_(e[2])},args:e[3]||[],...e[4]&&{orderBy:e[4]},...e[6]&&{filter:c(e[6])},...e[7]&&{over:c(e[7])}})},{name:"expr_call_over$ebnf$1$subexpression$1",symbols:["kw_partition","kw_by","expr_list_raw"],postprocess:u},{name:"expr_call_over$ebnf$1",symbols:["expr_call_over$ebnf$1$subexpression$1"],postprocess:s},{name:"expr_call_over$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_call_over$ebnf$2",symbols:["select_order_by"],postprocess:s},{name:"expr_call_over$ebnf$2",symbols:[],postprocess:()=>null},{name:"expr_call_over",symbols:["kw_over","lparen","expr_call_over$ebnf$1","expr_call_over$ebnf$2","rparen"],postprocess:e=>(0,a.track)(e,{...e[2]&&{partitionBy:e[2]},...e[3]&&{orderBy:e[3]}})},{name:"expr_extract$subexpression$1",symbols:["word"],postprocess:h("extract")},{name:"expr_extract",symbols:["expr_extract$subexpression$1","lparen","word",n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr","rparen"],postprocess:e=>(0,a.track)(e,{type:"extract",field:o(e[2]),from:e[4]})},{name:"expr_primary",symbols:["float"],postprocess:e=>(0,a.track)(e,{type:"numeric",value:(0,a.unbox)(e[0])})},{name:"expr_primary",symbols:["int"],postprocess:e=>(0,a.track)(e,{type:"integer",value:(0,a.unbox)(e[0])})},{name:"expr_primary",symbols:["string"],postprocess:e=>(0,a.track)(e,{type:"string",value:(0,a.unbox)(e[0])})},{name:"expr_primary",symbols:[n.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true],postprocess:e=>(0,a.track)(e,{type:"boolean",value:!0})},{name:"expr_primary",symbols:[n.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false],postprocess:e=>(0,a.track)(e,{type:"boolean",value:!1})},{name:"expr_primary",symbols:[n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:e=>(0,a.track)(e,{type:"null"})},{name:"expr_primary",symbols:["value_keyword"],postprocess:e=>(0,a.track)(e,{type:"keyword",keyword:_(e)})},{name:"expr_primary",symbols:[n.lexerAny.has("qparam")?{type:"qparam"}:qparam],postprocess:e=>(0,a.track)(e,{type:"parameter",name:_(e[0])})},{name:"expr_primary",symbols:[n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,a.track)(e,{type:"default"})},{name:"ops_like",symbols:["ops_like_keywors"]},{name:"ops_like",symbols:["ops_like_operators"]},{name:"ops_like_keywors$ebnf$1",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:s},{name:"ops_like_keywors$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_like_keywors$subexpression$1",symbols:[n.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like]},{name:"ops_like_keywors$subexpression$1",symbols:[n.lexerAny.has("kw_ilike")?{type:"kw_ilike"}:kw_ilike]},{name:"ops_like_keywors",symbols:["ops_like_keywors$ebnf$1","ops_like_keywors$subexpression$1"]},{name:"ops_like_operators$subexpression$1",symbols:[n.lexerAny.has("op_like")?{type:"op_like"}:op_like],postprocess:()=>"LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$1"]},{name:"ops_like_operators$subexpression$2",symbols:[n.lexerAny.has("op_ilike")?{type:"op_ilike"}:op_ilike],postprocess:()=>"ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$2"]},{name:"ops_like_operators$subexpression$3",symbols:[n.lexerAny.has("op_not_like")?{type:"op_not_like"}:op_not_like],postprocess:()=>"NOT LIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$3"]},{name:"ops_like_operators$subexpression$4",symbols:[n.lexerAny.has("op_not_ilike")?{type:"op_not_ilike"}:op_not_ilike],postprocess:()=>"NOT ILIKE"},{name:"ops_like_operators",symbols:["ops_like_operators$subexpression$4"]},{name:"ops_in$ebnf$1",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:s},{name:"ops_in$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_in",symbols:["ops_in$ebnf$1",n.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"ops_between$ebnf$1",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:s},{name:"ops_between$ebnf$1",symbols:[],postprocess:()=>null},{name:"ops_between",symbols:["ops_between$ebnf$1","kw_between"]},{name:"ops_member$subexpression$1",symbols:[n.lexerAny.has("op_member")?{type:"op_member"}:op_member]},{name:"ops_member$subexpression$1",symbols:[n.lexerAny.has("op_membertext")?{type:"op_membertext"}:op_membertext]},{name:"ops_member",symbols:["ops_member$subexpression$1"],postprocess:e=>{var t;return null===(t=c(e))||void 0===t?void 0:t.value}},{name:"expr_list_item",symbols:["expr_or_select"],postprocess:c},{name:"expr_list_item",symbols:["expr_star"],postprocess:c},{name:"expr_list_raw$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:[]},{name:"expr_list_raw$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw$macrocall$2"],postprocess:u},{name:"expr_list_raw$macrocall$1$ebnf$1",symbols:["expr_list_raw$macrocall$1$ebnf$1","expr_list_raw$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_list_raw$macrocall$1",symbols:["expr_list_raw$macrocall$2","expr_list_raw$macrocall$1$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"expr_list_raw",symbols:["expr_list_raw$macrocall$1"],postprocess:([e])=>e.map(c)},{name:"expr_list_raw_many$macrocall$2",symbols:["expr_list_item"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:u},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1$subexpression$1"]},{name:"expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"expr_list_raw_many$macrocall$2"],postprocess:u},{name:"expr_list_raw_many$macrocall$1$ebnf$1",symbols:["expr_list_raw_many$macrocall$1$ebnf$1","expr_list_raw_many$macrocall$1$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_list_raw_many$macrocall$1",symbols:["expr_list_raw_many$macrocall$2","expr_list_raw_many$macrocall$1$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"expr_list_raw_many",symbols:["expr_list_raw_many$macrocall$1"],postprocess:([e])=>e.map(c)},{name:"expr_or_select",symbols:["expr_nostar"],postprocess:c},{name:"expr_or_select",symbols:["selection"],postprocess:c},{name:"expr_list_many",symbols:["expr_list_raw_many"],postprocess:e=>(0,a.track)(e,{type:"list",expressions:e[0]})},{name:"expr_case$ebnf$1",symbols:["expr_nostar"],postprocess:s},{name:"expr_case$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_case$ebnf$2",symbols:[]},{name:"expr_case$ebnf$2",symbols:["expr_case$ebnf$2","expr_case_whens"],postprocess:e=>e[0].concat([e[1]])},{name:"expr_case$ebnf$3",symbols:["expr_case_else"],postprocess:s},{name:"expr_case$ebnf$3",symbols:[],postprocess:()=>null},{name:"expr_case",symbols:[n.lexerAny.has("kw_case")?{type:"kw_case"}:kw_case,"expr_case$ebnf$1","expr_case$ebnf$2","expr_case$ebnf$3",n.lexerAny.has("kw_end")?{type:"kw_end"}:kw_end],postprocess:e=>(0,a.track)(e,{type:"case",value:e[1],whens:e[2],else:e[3]})},{name:"expr_case_whens",symbols:[n.lexerAny.has("kw_when")?{type:"kw_when"}:kw_when,"expr_nostar",n.lexerAny.has("kw_then")?{type:"kw_then"}:kw_then,"expr_nostar"],postprocess:e=>(0,a.track)(e,{when:e[1],value:e[3]})},{name:"expr_case_else",symbols:[n.lexerAny.has("kw_else")?{type:"kw_else"}:kw_else,"expr_nostar"],postprocess:u},{name:"expr_fn_name$subexpression$1$ebnf$1$subexpression$1",symbols:["word",n.lexerAny.has("dot")?{type:"dot"}:dot]},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:["expr_fn_name$subexpression$1$ebnf$1$subexpression$1"],postprocess:s},{name:"expr_fn_name$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"expr_fn_name$subexpression$1",symbols:["expr_fn_name$subexpression$1$ebnf$1","word_or_keyword"],postprocess:e=>(0,a.track)(e,{name:(0,a.unbox)(c(e[1])),...e[0]&&{schema:_(e[0][0])}})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$1"]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[n.lexerAny.has("kw_any")?{type:"kw_any"}:kw_any]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[n.lexerAny.has("kw_some")?{type:"kw_some"}:kw_some]},{name:"expr_fn_name$subexpression$2$subexpression$1",symbols:[n.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"expr_fn_name$subexpression$2",symbols:["expr_fn_name$subexpression$2$subexpression$1"],postprocess:e=>(0,a.track)(e,{name:_(c(e))})},{name:"expr_fn_name",symbols:["expr_fn_name$subexpression$2"]},{name:"word_or_keyword",symbols:["word"]},{name:"word_or_keyword",symbols:["value_keyword"],postprocess:e=>(0,a.box)(e,_(e))},{name:"value_keyword",symbols:[n.lexerAny.has("kw_current_catalog")?{type:"kw_current_catalog"}:kw_current_catalog]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_current_date")?{type:"kw_current_date"}:kw_current_date]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_current_role")?{type:"kw_current_role"}:kw_current_role]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_current_schema")?{type:"kw_current_schema"}:kw_current_schema]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_current_timestamp")?{type:"kw_current_timestamp"}:kw_current_timestamp]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_current_time")?{type:"kw_current_time"}:kw_current_time]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_localtimestamp")?{type:"kw_localtimestamp"}:kw_localtimestamp]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_localtime")?{type:"kw_localtime"}:kw_localtime]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"value_keyword",symbols:[n.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"expr_special_calls",symbols:["spe_overlay"]},{name:"expr_special_calls",symbols:["spe_substring"]},{name:"spe_overlay$subexpression$1",symbols:["word"],postprocess:h("overlay")},{name:"spe_overlay$subexpression$2",symbols:[n.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_overlay$subexpression$3",symbols:[n.lexerAny.has("kw_placing")?{type:"kw_placing"}:kw_placing,"expr_nostar"]},{name:"spe_overlay$subexpression$4",symbols:[n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_overlay$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_overlay$ebnf$1",symbols:["spe_overlay$ebnf$1$subexpression$1"],postprocess:s},{name:"spe_overlay$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_overlay",symbols:["spe_overlay$subexpression$1","spe_overlay$subexpression$2","spe_overlay$subexpression$3","spe_overlay$subexpression$4","spe_overlay$ebnf$1",n.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>(0,a.track)(e,{type:"overlay",value:e[1][1],placing:e[2][1],from:e[3][1],...e[4]&&{for:e[4][1]}})},{name:"spe_substring$subexpression$1",symbols:["word"],postprocess:h("substring")},{name:"spe_substring$subexpression$2",symbols:[n.lexerAny.has("lparen")?{type:"lparen"}:lparen,"expr_nostar"]},{name:"spe_substring$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"expr_nostar"]},{name:"spe_substring$ebnf$1",symbols:["spe_substring$ebnf$1$subexpression$1"],postprocess:s},{name:"spe_substring$ebnf$1",symbols:[],postprocess:()=>null},{name:"spe_substring$ebnf$2$subexpression$1",symbols:[n.lexerAny.has("kw_for")?{type:"kw_for"}:kw_for,"expr_nostar"]},{name:"spe_substring$ebnf$2",symbols:["spe_substring$ebnf$2$subexpression$1"],postprocess:s},{name:"spe_substring$ebnf$2",symbols:[],postprocess:()=>null},{name:"spe_substring",symbols:["spe_substring$subexpression$1","spe_substring$subexpression$2","spe_substring$ebnf$1","spe_substring$ebnf$2",n.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:e=>(0,a.track)(e,{type:"substring",value:e[1][1],...e[2]&&{from:e[2][1]},...e[3]&&{for:e[3][1]}})},{name:"various_binaries",symbols:["kw_at","kw_time","kw_zone"],postprocess:()=>"AT TIME ZONE"},{name:"createtable_statement$ebnf$1",symbols:["createtable_modifiers"],postprocess:s},{name:"createtable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:s},{name:"createtable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createtable_statement$ebnf$3",symbols:["createtable_opts"],postprocess:s},{name:"createtable_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createtable_statement",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createtable_statement$ebnf$1",n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"createtable_statement$ebnf$2","qname","lparen","createtable_declarationlist","rparen","createtable_statement$ebnf$3"],postprocess:e=>{const t=e[6].filter(e=>"kind"in e),r=e[6].filter(e=>!("kind"in e));return(0,a.track)(e,{type:"create table",...e[3]?{ifNotExists:!0}:{},name:e[4],columns:t,...c(e[1]),...r.length?{constraints:r}:{},...u(e)})}},{name:"createtable_modifiers",symbols:["kw_unlogged"],postprocess:e=>e[0]?{unlogged:!0}:{}},{name:"createtable_modifiers",symbols:["m_locglob"]},{name:"createtable_modifiers",symbols:["m_tmp"]},{name:"createtable_modifiers",symbols:["m_locglob","m_tmp"],postprocess:([e,t])=>({...e,...t})},{name:"m_locglob$subexpression$1",symbols:["kw_local"]},{name:"m_locglob$subexpression$1",symbols:["kw_global"]},{name:"m_locglob",symbols:["m_locglob$subexpression$1"],postprocess:e=>({locality:_(e)})},{name:"m_tmp$subexpression$1",symbols:["kw_temp"]},{name:"m_tmp$subexpression$1",symbols:["kw_temporary"]},{name:"m_tmp",symbols:["m_tmp$subexpression$1"],postprocess:e=>({temporary:!0})},{name:"createtable_declarationlist$ebnf$1",symbols:[]},{name:"createtable_declarationlist$ebnf$1$subexpression$1",symbols:["comma","createtable_declaration"],postprocess:u},{name:"createtable_declarationlist$ebnf$1",symbols:["createtable_declarationlist$ebnf$1","createtable_declarationlist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_declarationlist",symbols:["createtable_declaration","createtable_declarationlist$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_constraint"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_column"]},{name:"createtable_declaration$subexpression$1",symbols:["createtable_like"]},{name:"createtable_declaration",symbols:["createtable_declaration$subexpression$1"],postprocess:c},{name:"createtable_constraint$macrocall$2",symbols:["createtable_constraint_def"]},{name:"createtable_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:["createtable_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:s},{name:"createtable_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_constraint$macrocall$1",symbols:["createtable_constraint$macrocall$1$ebnf$1","createtable_constraint$macrocall$2"],postprocess:e=>{const t=e[0]&&o(e[0][1]);return t?(0,a.track)(e,{constraintName:t,...c(e[1])}):(0,a.track)(e,c(e[1]))}},{name:"createtable_constraint",symbols:["createtable_constraint$macrocall$1"],postprocess:c},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_unique"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_def_check"]},{name:"createtable_constraint_def",symbols:["createtable_constraint_foreignkey"]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:[n.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique]},{name:"createtable_constraint_def_unique$subexpression$1",symbols:["kw_primary_key"]},{name:"createtable_constraint_def_unique",symbols:["createtable_constraint_def_unique$subexpression$1","lparen","createtable_collist","rparen"],postprocess:e=>(0,a.track)(e,{type:_(e[0]," "),columns:e[2].map(o)})},{name:"createtable_constraint_def_check",symbols:[n.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:e=>(0,a.track)(e,{type:"check",expr:c(e[1])})},{name:"createtable_constraint_foreignkey",symbols:[n.lexerAny.has("kw_foreign")?{type:"kw_foreign"}:kw_foreign,"kw_key","collist_paren","createtable_references"],postprocess:e=>(0,a.track)(e,{type:"foreign key",localColumns:e[2].map(o),...e[3]})},{name:"createtable_references$ebnf$1",symbols:[]},{name:"createtable_references$ebnf$1",symbols:["createtable_references$ebnf$1","createtable_constraint_foreignkey_onsometing"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_references",symbols:[n.lexerAny.has("kw_references")?{type:"kw_references"}:kw_references,"table_ref","collist_paren","createtable_references$ebnf$1"],postprocess:e=>(0,a.track)(e,{foreignTable:c(e[1]),foreignColumns:e[2].map(o),...e[3].reduce((e,t)=>({...e,...t}),{})})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_delete","createtable_constraint_on_action"],postprocess:e=>(0,a.track)(e,{onDelete:u(e)})},{name:"createtable_constraint_foreignkey_onsometing",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_update","createtable_constraint_on_action"],postprocess:e=>(0,a.track)(e,{onUpdate:u(e)})},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:[n.lexerAny.has("kw_full")?{type:"kw_full"}:kw_full]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_partial"]},{name:"createtable_constraint_foreignkey_onsometing$subexpression$1",symbols:["kw_simple"]},{name:"createtable_constraint_foreignkey_onsometing",symbols:["kw_match","createtable_constraint_foreignkey_onsometing$subexpression$1"],postprocess:e=>(0,a.track)(e,{match:_(u(e))})},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_cascade"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$1",symbols:["kw_no","kw_action"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["createtable_constraint_on_action$subexpression$1$subexpression$1"]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_restrict"]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null]},{name:"createtable_constraint_on_action$subexpression$1$subexpression$2",symbols:[n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"createtable_constraint_on_action$subexpression$1",symbols:["kw_set","createtable_constraint_on_action$subexpression$1$subexpression$2"]},{name:"createtable_constraint_on_action",symbols:["createtable_constraint_on_action$subexpression$1"],postprocess:e=>_(e," ")},{name:"createtable_collist$ebnf$1",symbols:[]},{name:"createtable_collist$ebnf$1$subexpression$1",symbols:["comma","ident"],postprocess:u},{name:"createtable_collist$ebnf$1",symbols:["createtable_collist$ebnf$1","createtable_collist$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_collist",symbols:["ident","createtable_collist$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"createtable_column$ebnf$1",symbols:["createtable_collate"],postprocess:s},{name:"createtable_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column$ebnf$2",symbols:[]},{name:"createtable_column$ebnf$2",symbols:["createtable_column$ebnf$2","createtable_column_constraint"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_column",symbols:["word","data_type","createtable_column$ebnf$1","createtable_column$ebnf$2"],postprocess:e=>(0,a.track)(e,{kind:"column",name:o(e[0]),dataType:e[1],...e[2]?{collate:e[2][1]}:{},...e[3]&&e[3].length?{constraints:e[3]}:{}})},{name:"createtable_like$ebnf$1",symbols:[]},{name:"createtable_like$ebnf$1",symbols:["createtable_like$ebnf$1","createtable_like_opt"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_like",symbols:[n.lexerAny.has("kw_like")?{type:"kw_like"}:kw_like,"qname","createtable_like$ebnf$1"],postprocess:e=>(0,a.track)(e,{kind:"like table",like:e[1],options:e[2]})},{name:"createtable_like_opt$subexpression$1",symbols:["kw_including"]},{name:"createtable_like_opt$subexpression$1",symbols:["kw_excluding"]},{name:"createtable_like_opt",symbols:["createtable_like_opt$subexpression$1","createtable_like_opt_val"],postprocess:e=>(0,a.track)(e,{verb:_(e[0]),option:_(e[1])})},{name:"createtable_like_opt_val",symbols:["word"],postprocess:x("defaults","constraints","indexes","storage","comments")},{name:"createtable_like_opt_val",symbols:[n.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all]},{name:"createtable_column_constraint$macrocall$2",symbols:["createtable_column_constraint_def"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"word"]},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1$subexpression$1"],postprocess:s},{name:"createtable_column_constraint$macrocall$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtable_column_constraint$macrocall$1",symbols:["createtable_column_constraint$macrocall$1$ebnf$1","createtable_column_constraint$macrocall$2"],postprocess:e=>{const t=e[0]&&o(e[0][1]);return t?(0,a.track)(e,{constraintName:t,...c(e[1])}):(0,a.track)(e,c(e[1]))}},{name:"createtable_column_constraint",symbols:["createtable_column_constraint$macrocall$1"],postprocess:c},{name:"createtable_column_constraint_def",symbols:[n.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:e=>(0,a.track)(e,{type:"unique"})},{name:"createtable_column_constraint_def",symbols:["kw_primary_key"],postprocess:e=>(0,a.track)(e,{type:"primary key"})},{name:"createtable_column_constraint_def",symbols:["kw_not_null"],postprocess:e=>(0,a.track)(e,{type:"not null"})},{name:"createtable_column_constraint_def",symbols:[n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null],postprocess:e=>(0,a.track)(e,{type:"null"})},{name:"createtable_column_constraint_def",symbols:[n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>(0,a.track)(e,{type:"default",default:c(e[1])})},{name:"createtable_column_constraint_def",symbols:[n.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"expr_paren"],postprocess:e=>(0,a.track)(e,{type:"check",expr:c(e[1])})},{name:"createtable_column_constraint_def",symbols:["createtable_references"],postprocess:e=>(0,a.track)(e,{type:"reference",...c(e)})},{name:"createtable_column_constraint_def",symbols:["altercol_generated"]},{name:"createtable_collate",symbols:[n.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"]},{name:"createtable_opts$subexpression$1",symbols:["word"],postprocess:h("inherits")},{name:"createtable_opts$macrocall$2",symbols:["qname"]},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:[]},{name:"createtable_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"createtable_opts$macrocall$2"],postprocess:u},{name:"createtable_opts$macrocall$1$ebnf$1",symbols:["createtable_opts$macrocall$1$ebnf$1","createtable_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtable_opts$macrocall$1",symbols:["createtable_opts$macrocall$2","createtable_opts$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"createtable_opts",symbols:["createtable_opts$subexpression$1","lparen","createtable_opts$macrocall$1","rparen"],postprocess:e=>(0,a.track)(e,{inherits:e[2]})},{name:"createindex_statement$ebnf$1",symbols:[n.lexerAny.has("kw_unique")?{type:"kw_unique"}:kw_unique],postprocess:s},{name:"createindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:s},{name:"createindex_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$3",symbols:["word"],postprocess:s},{name:"createindex_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$4$subexpression$1",symbols:[n.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"ident"],postprocess:u},{name:"createindex_statement$ebnf$4",symbols:["createindex_statement$ebnf$4$subexpression$1"],postprocess:s},{name:"createindex_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$5",symbols:["createindex_with"],postprocess:s},{name:"createindex_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$6",symbols:["createindex_tblspace"],postprocess:s},{name:"createindex_statement$ebnf$6",symbols:[],postprocess:()=>null},{name:"createindex_statement$ebnf$7",symbols:["createindex_predicate"],postprocess:s},{name:"createindex_statement$ebnf$7",symbols:[],postprocess:()=>null},{name:"createindex_statement",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"createindex_statement$ebnf$1","kw_index","createindex_statement$ebnf$2","createindex_statement$ebnf$3",n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"table_ref","createindex_statement$ebnf$4","lparen","createindex_expressions","rparen","createindex_statement$ebnf$5","createindex_statement$ebnf$6","createindex_statement$ebnf$7"],postprocess:e=>(0,a.track)(e,{type:"create index",...e[1]&&{unique:!0},...e[3]&&{ifNotExists:!0},...e[4]&&{indexName:o(e[4])},table:e[6],...e[7]&&{using:o(e[7])},expressions:e[9],...e[11]&&{with:e[11]},...e[12]&&{tablespace:c(e[12])},...e[13]&&{where:c(e[13])}})},{name:"createindex_expressions$ebnf$1",symbols:[]},{name:"createindex_expressions$ebnf$1$subexpression$1",symbols:["comma","createindex_expression"],postprocess:u},{name:"createindex_expressions$ebnf$1",symbols:["createindex_expressions$ebnf$1","createindex_expressions$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createindex_expressions",symbols:["createindex_expression","createindex_expressions$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"createindex_expression$subexpression$1",symbols:["expr_basic"]},{name:"createindex_expression$subexpression$1",symbols:["expr_paren"]},{name:"createindex_expression$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_collate")?{type:"kw_collate"}:kw_collate,"qualified_name"],postprocess:u},{name:"createindex_expression$ebnf$1",symbols:["createindex_expression$ebnf$1$subexpression$1"],postprocess:s},{name:"createindex_expression$ebnf$1",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$2",symbols:["qualified_name"],postprocess:s},{name:"createindex_expression$ebnf$2",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[n.lexerAny.has("kw_asc")?{type:"kw_asc"}:kw_asc]},{name:"createindex_expression$ebnf$3$subexpression$1",symbols:[n.lexerAny.has("kw_desc")?{type:"kw_desc"}:kw_desc]},{name:"createindex_expression$ebnf$3",symbols:["createindex_expression$ebnf$3$subexpression$1"],postprocess:s},{name:"createindex_expression$ebnf$3",symbols:[],postprocess:()=>null},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_first"]},{name:"createindex_expression$ebnf$4$subexpression$1$subexpression$1",symbols:["kw_last"]},{name:"createindex_expression$ebnf$4$subexpression$1",symbols:["kw_nulls","createindex_expression$ebnf$4$subexpression$1$subexpression$1"],postprocess:u},{name:"createindex_expression$ebnf$4",symbols:["createindex_expression$ebnf$4$subexpression$1"],postprocess:s},{name:"createindex_expression$ebnf$4",symbols:[],postprocess:()=>null},{name:"createindex_expression",symbols:["createindex_expression$subexpression$1","createindex_expression$ebnf$1","createindex_expression$ebnf$2","createindex_expression$ebnf$3","createindex_expression$ebnf$4"],postprocess:e=>(0,a.track)(e,{expression:c(e[0]),...e[1]&&{collate:c(e[1])},...e[2]&&{opclass:c(e[2])},...e[3]&&{order:c(e[3]).value},...e[4]&&{nulls:c(e[4])}})},{name:"createindex_predicate",symbols:[n.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:u},{name:"createindex_with$macrocall$2",symbols:["createindex_with_item"]},{name:"createindex_with$macrocall$1$ebnf$1",symbols:[]},{name:"createindex_with$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"createindex_with$macrocall$2"],postprocess:u},{name:"createindex_with$macrocall$1$ebnf$1",symbols:["createindex_with$macrocall$1$ebnf$1","createindex_with$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createindex_with$macrocall$1",symbols:["createindex_with$macrocall$2","createindex_with$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"createindex_with",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"lparen","createindex_with$macrocall$1","rparen"],postprocess:p(2)},{name:"createindex_with_item$subexpression$1",symbols:["string"]},{name:"createindex_with_item$subexpression$1",symbols:["int"]},{name:"createindex_with_item",symbols:["ident",n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"createindex_with_item$subexpression$1"],postprocess:e=>(0,a.track)(e,{parameter:_(e[0]),value:c(e[2]).toString()})},{name:"createindex_tblspace",symbols:["kw_tablespace","ident"],postprocess:u},{name:"createextension_statement$ebnf$1",symbols:["kw_ifnotexists"],postprocess:s},{name:"createextension_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$2",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:s},{name:"createextension_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$3$subexpression$1",symbols:["kw_schema","word"],postprocess:u},{name:"createextension_statement$ebnf$3",symbols:["createextension_statement$ebnf$3$subexpression$1"],postprocess:s},{name:"createextension_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$4$subexpression$1",symbols:["kw_version","string"],postprocess:u},{name:"createextension_statement$ebnf$4",symbols:["createextension_statement$ebnf$4$subexpression$1"],postprocess:s},{name:"createextension_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"createextension_statement$ebnf$5$subexpression$1",symbols:[n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"string"],postprocess:u},{name:"createextension_statement$ebnf$5",symbols:["createextension_statement$ebnf$5$subexpression$1"],postprocess:s},{name:"createextension_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"createextension_statement",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_extension","createextension_statement$ebnf$1","word","createextension_statement$ebnf$2","createextension_statement$ebnf$3","createextension_statement$ebnf$4","createextension_statement$ebnf$5"],postprocess:e=>(0,a.track)(e,{type:"create extension",...e[2]?{ifNotExists:!0}:{},extension:o(e[3]),...e[5]?{schema:o(e[5])}:{},...e[6]?{version:i(e[6])}:{},...e[7]?{from:i(e[7])}:{}})},{name:"simplestatements_all",symbols:["simplestatements_start_transaction"]},{name:"simplestatements_all",symbols:["simplestatements_commit"]},{name:"simplestatements_all",symbols:["simplestatements_rollback"]},{name:"simplestatements_all",symbols:["simplestatements_tablespace"]},{name:"simplestatements_all",symbols:["simplestatements_set"]},{name:"simplestatements_all",symbols:["simplestatements_show"]},{name:"simplestatements_all",symbols:["simplestatements_begin"]},{name:"simplestatements_start_transaction$subexpression$1",symbols:["kw_start","kw_transaction"]},{name:"simplestatements_start_transaction",symbols:["simplestatements_start_transaction$subexpression$1"],postprocess:e=>(0,a.track)(e,{type:"start transaction"})},{name:"simplestatements_commit",symbols:["kw_commit"],postprocess:e=>(0,a.track)(e,{type:"commit"})},{name:"simplestatements_rollback",symbols:["kw_rollback"],postprocess:e=>(0,a.track)(e,{type:"rollback"})},{name:"simplestatements_tablespace",symbols:["kw_tablespace","word"],postprocess:e=>(0,a.track)(e,{type:"tablespace",tablespace:o(e[1])})},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_simple"]},{name:"simplestatements_set$subexpression$1",symbols:["simplestatements_set_timezone"]},{name:"simplestatements_set",symbols:["kw_set","simplestatements_set$subexpression$1"],postprocess:u},{name:"simplestatements_set_timezone",symbols:["kw_time","kw_zone","simplestatements_set_timezone_val"],postprocess:e=>(0,a.track)(e,{type:"set timezone",to:e[2]})},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["string"]},{name:"simplestatements_set_timezone_val$subexpression$1",symbols:["int"]},{name:"simplestatements_set_timezone_val",symbols:["simplestatements_set_timezone_val$subexpression$1"],postprocess:e=>(0,a.track)(e,{type:"value",value:c(e[0])})},{name:"simplestatements_set_timezone_val",symbols:["kw_local"],postprocess:e=>(0,a.track)(e,{type:"local"})},{name:"simplestatements_set_timezone_val",symbols:[n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,a.track)(e,{type:"default"})},{name:"simplestatements_set_timezone_val",symbols:["kw_interval","string","kw_hour",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"kw_minute"],postprocess:e=>(0,a.track)(e,{type:"interval",value:(0,a.unbox)(e[1])})},{name:"simplestatements_set_simple$subexpression$1",symbols:[n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq]},{name:"simplestatements_set_simple$subexpression$1",symbols:[n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to]},{name:"simplestatements_set_simple",symbols:["ident","simplestatements_set_simple$subexpression$1","simplestatements_set_val"],postprocess:e=>(0,a.track)(e,{type:"set",variable:o(e[0]),set:(0,a.unbox)(e[2])})},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw"],postprocess:c},{name:"simplestatements_set_val",symbols:[n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,a.track)(e,{type:"default"})},{name:"simplestatements_set_val$ebnf$1$subexpression$1",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1$subexpression$1"]},{name:"simplestatements_set_val$ebnf$1$subexpression$2",symbols:["comma","simplestatements_set_val_raw"]},{name:"simplestatements_set_val$ebnf$1",symbols:["simplestatements_set_val$ebnf$1","simplestatements_set_val$ebnf$1$subexpression$2"],postprocess:e=>e[0].concat([e[1]])},{name:"simplestatements_set_val",symbols:["simplestatements_set_val_raw","simplestatements_set_val$ebnf$1"],postprocess:e=>(0,a.track)(e,{type:"list",values:[e[0],...e[1]||[]]})},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["string"]},{name:"simplestatements_set_val_raw$subexpression$1",symbols:["int"]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$1"],postprocess:e=>(0,a.track)(e,{type:"value",value:c(e)})},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[n.lexerAny.has("word")?{type:"word"}:word]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[n.lexerAny.has("kw_true")?{type:"kw_true"}:kw_true]},{name:"simplestatements_set_val_raw$subexpression$2",symbols:[n.lexerAny.has("kw_false")?{type:"kw_false"}:kw_false]},{name:"simplestatements_set_val_raw",symbols:["simplestatements_set_val_raw$subexpression$2"],postprocess:e=>(0,a.track)(e,{type:"identifier",name:c(e).value})},{name:"simplestatements_set_val_raw",symbols:[n.lexerAny.has("quoted_word")?{type:"quoted_word"}:quoted_word],postprocess:e=>(0,a.track)(e,{type:"identifier",doubleQuoted:!0,name:c(e).value})},{name:"simplestatements_show",symbols:["kw_show","ident"],postprocess:e=>(0,a.track)(e,{type:"show",variable:o(e[1])})},{name:"create_schema$subexpression$1",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_schema"]},{name:"create_schema$ebnf$1",symbols:["kw_ifnotexists"],postprocess:s},{name:"create_schema$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_schema",symbols:["create_schema$subexpression$1","create_schema$ebnf$1","ident"],postprocess:e=>(0,a.track)(e,{type:"create schema",name:o(e[2]),...e[1]?{ifNotExists:!0}:{}})},{name:"raise_statement$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:x("debug","log","info","notice","warning","exception")},{name:"raise_statement$ebnf$1",symbols:["raise_statement$ebnf$1$subexpression$1"],postprocess:s},{name:"raise_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$2$subexpression$1",symbols:["comma","expr_list_raw"],postprocess:u},{name:"raise_statement$ebnf$2",symbols:["raise_statement$ebnf$2$subexpression$1"],postprocess:s},{name:"raise_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"raise_statement$ebnf$3",symbols:["raise_using"],postprocess:s},{name:"raise_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"raise_statement",symbols:["kw_raise","raise_statement$ebnf$1","string","raise_statement$ebnf$2","raise_statement$ebnf$3"],postprocess:e=>(0,a.track)(e,{type:"raise",format:_(e[2]),...e[1]&&{level:_(e[1])},...e[3]&&e[3].length&&{formatExprs:e[3]},...e[4]&&e[4].length&&{using:e[4]}})},{name:"raise_using$macrocall$2",symbols:["raise_using_one"]},{name:"raise_using$macrocall$1$ebnf$1",symbols:[]},{name:"raise_using$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"raise_using$macrocall$2"],postprocess:u},{name:"raise_using$macrocall$1$ebnf$1",symbols:["raise_using$macrocall$1$ebnf$1","raise_using$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"raise_using$macrocall$1",symbols:["raise_using$macrocall$2","raise_using$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"raise_using",symbols:[n.lexerAny.has("kw_using")?{type:"kw_using"}:kw_using,"raise_using$macrocall$1"],postprocess:u},{name:"raise_using_one",symbols:["raise_using_what",n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>(0,a.track)(e,{type:_(e[0]),value:e[2]})},{name:"raise_using_what",symbols:[n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"raise_using_what",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:x("message","detail","hint","errcode","column","constraint","datatype","schema")},{name:"comment_statement",symbols:["kw_comment",n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"comment_what",n.lexerAny.has("kw_is")?{type:"kw_is"}:kw_is,"string"],postprocess:e=>(0,a.track)(e,{type:"comment",comment:(0,a.unbox)(u(e)),on:c(e[2])})},{name:"comment_what",symbols:["comment_what_col"]},{name:"comment_what",symbols:["comment_what_nm"]},{name:"comment_what_nm$subexpression$1",symbols:[n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table]},{name:"comment_what_nm$subexpression$1",symbols:["kw_materialized","kw_view"]},{name:"comment_what_nm$subexpression$1",symbols:[n.lexerAny.has("word")?{type:"word"}:word],postprocess:x("database","index","trigger","type","view")},{name:"comment_what_nm",symbols:["comment_what_nm$subexpression$1","qualified_name"],postprocess:e=>(0,a.track)(e,{type:_(e[0]),name:e[1]})},{name:"comment_what_col",symbols:["kw_column","qcolumn"],postprocess:e=>(0,a.track)(e,{type:"column",column:u(e)})},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_transaction"]},{name:"simplestatements_begin$ebnf$1$subexpression$1",symbols:["kw_work"]},{name:"simplestatements_begin$ebnf$1",symbols:["simplestatements_begin$ebnf$1$subexpression$1"],postprocess:s},{name:"simplestatements_begin$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin$ebnf$2",symbols:[]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_isol"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_writ"]},{name:"simplestatements_begin$ebnf$2$subexpression$1",symbols:["simplestatements_begin_def"]},{name:"simplestatements_begin$ebnf$2",symbols:["simplestatements_begin$ebnf$2","simplestatements_begin$ebnf$2$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"simplestatements_begin",symbols:["kw_begin","simplestatements_begin$ebnf$1","simplestatements_begin$ebnf$2"],postprocess:e=>(0,a.track)(e,{type:"begin",...e[2].reduce((e,t)=>({...c(e),...c(t)}),{})})},{name:"simplestatements_begin_isol$subexpression$1",symbols:["kw_isolation","kw_level"]},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_serializable"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$1",symbols:["word"],postprocess:h("repeatable")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["simplestatements_begin_isol$subexpression$2$subexpression$1","kw_read"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$2",symbols:["word"],postprocess:h("committed")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$2"]},{name:"simplestatements_begin_isol$subexpression$2$subexpression$3",symbols:["word"],postprocess:h("uncommitted")},{name:"simplestatements_begin_isol$subexpression$2",symbols:["kw_read","simplestatements_begin_isol$subexpression$2$subexpression$3"]},{name:"simplestatements_begin_isol",symbols:["simplestatements_begin_isol$subexpression$1","simplestatements_begin_isol$subexpression$2"],postprocess:e=>(0,a.track)(e,{isolationLevel:_(e[1]," ")})},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read","kw_write"]},{name:"simplestatements_begin_writ$subexpression$1",symbols:["kw_read",n.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only]},{name:"simplestatements_begin_writ",symbols:["simplestatements_begin_writ$subexpression$1"],postprocess:e=>(0,a.track)(e,{writeable:_(e," ")})},{name:"simplestatements_begin_def$ebnf$1",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:s},{name:"simplestatements_begin_def$ebnf$1",symbols:[],postprocess:()=>null},{name:"simplestatements_begin_def",symbols:["simplestatements_begin_def$ebnf$1",n.lexerAny.has("kw_deferrable")?{type:"kw_deferrable"}:kw_deferrable],postprocess:e=>(0,a.track)(e,{deferrable:!e[0]})},{name:"insert_statement$subexpression$1",symbols:["kw_insert",n.lexerAny.has("kw_into")?{type:"kw_into"}:kw_into]},{name:"insert_statement$ebnf$1",symbols:["collist_paren"],postprocess:s},{name:"insert_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:["kw_system"]},{name:"insert_statement$ebnf$2$subexpression$1$subexpression$1",symbols:[n.lexerAny.has("kw_user")?{type:"kw_user"}:kw_user]},{name:"insert_statement$ebnf$2$subexpression$1",symbols:["kw_overriding","insert_statement$ebnf$2$subexpression$1$subexpression$1","kw_value"],postprocess:p(1)},{name:"insert_statement$ebnf$2",symbols:["insert_statement$ebnf$2$subexpression$1"],postprocess:s},{name:"insert_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection"]},{name:"insert_statement$ebnf$3$subexpression$1",symbols:["selection_paren"]},{name:"insert_statement$ebnf$3",symbols:["insert_statement$ebnf$3$subexpression$1"],postprocess:s},{name:"insert_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$4$subexpression$1",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,"kw_conflict","insert_on_conflict"],postprocess:u},{name:"insert_statement$ebnf$4",symbols:["insert_statement$ebnf$4$subexpression$1"],postprocess:s},{name:"insert_statement$ebnf$4",symbols:[],postprocess:()=>null},{name:"insert_statement$ebnf$5$subexpression$1",symbols:[n.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:u},{name:"insert_statement$ebnf$5",symbols:["insert_statement$ebnf$5$subexpression$1"],postprocess:s},{name:"insert_statement$ebnf$5",symbols:[],postprocess:()=>null},{name:"insert_statement",symbols:["insert_statement$subexpression$1","table_ref_aliased","insert_statement$ebnf$1","insert_statement$ebnf$2","insert_statement$ebnf$3","insert_statement$ebnf$4","insert_statement$ebnf$5"],postprocess:e=>{const t=e[2]&&e[2].map(o),r=_(e[3]),s=c(e[4]),n=e[5],l=e[6];return(0,a.track)(e,{type:"insert",into:c(e[1]),insert:s,...r&&{overriding:r},...t&&{columns:t},...l&&{returning:l},...n&&{onConflict:n}})}},{name:"insert_values$ebnf$1",symbols:[]},{name:"insert_values$ebnf$1$subexpression$1",symbols:["comma","insert_value"],postprocess:u},{name:"insert_values$ebnf$1",symbols:["insert_values$ebnf$1","insert_values$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"insert_values",symbols:["insert_value","insert_values$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"insert_value",symbols:["lparen","insert_expr_list_raw","rparen"],postprocess:p(1)},{name:"insert_expr_list_raw$ebnf$1",symbols:[]},{name:"insert_expr_list_raw$ebnf$1$subexpression$1",symbols:["comma","expr_or_select"],postprocess:u},{name:"insert_expr_list_raw$ebnf$1",symbols:["insert_expr_list_raw$ebnf$1","insert_expr_list_raw$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"insert_expr_list_raw",symbols:["expr_or_select","insert_expr_list_raw$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"insert_on_conflict$ebnf$1",symbols:["insert_on_conflict_what"],postprocess:s},{name:"insert_on_conflict$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict",symbols:["insert_on_conflict$ebnf$1","insert_on_conflict_do"],postprocess:e=>(0,a.track)(e,{...e[0]?{on:c(e[0])}:{},...e[1]})},{name:"insert_on_conflict_what",symbols:["lparen","expr_list_raw","rparen"],postprocess:e=>(0,a.track)(e,{type:"on expr",exprs:e[1]})},{name:"insert_on_conflict_what",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,n.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"qname"],postprocess:e=>(0,a.track)(e,{type:"on constraint",constraint:u(e)})},{name:"insert_on_conflict_do",symbols:[n.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_nothing"],postprocess:e=>({do:"do nothing"})},{name:"insert_on_conflict_do$subexpression$1",symbols:[n.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"kw_update","kw_set"]},{name:"insert_on_conflict_do$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_where")?{type:"kw_where"}:kw_where,"expr"],postprocess:u},{name:"insert_on_conflict_do$ebnf$1",symbols:["insert_on_conflict_do$ebnf$1$subexpression$1"],postprocess:s},{name:"insert_on_conflict_do$ebnf$1",symbols:[],postprocess:()=>null},{name:"insert_on_conflict_do",symbols:["insert_on_conflict_do$subexpression$1","update_set_list","insert_on_conflict_do$ebnf$1"],postprocess:e=>({do:{sets:e[1]},...e[2]&&{where:e[2]}})},{name:"update_statement$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from,"select_from_subject"],postprocess:u},{name:"update_statement$ebnf$1",symbols:["update_statement$ebnf$1$subexpression$1"],postprocess:s},{name:"update_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$2",symbols:["select_where"],postprocess:s},{name:"update_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"update_statement$ebnf$3$subexpression$1",symbols:[n.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:u},{name:"update_statement$ebnf$3",symbols:["update_statement$ebnf$3$subexpression$1"],postprocess:s},{name:"update_statement$ebnf$3",symbols:[],postprocess:()=>null},{name:"update_statement",symbols:["kw_update","table_ref_aliased","kw_set","update_set_list","update_statement$ebnf$1","update_statement$ebnf$2","update_statement$ebnf$3"],postprocess:e=>{const t=c(e[4]),r=c(e[5]),s=e[6];return(0,a.track)(e,{type:"update",table:c(e[1]),sets:e[3],...r?{where:r}:{},...t?{from:t}:{},...s?{returning:s}:{}})}},{name:"update_set_list$ebnf$1",symbols:[]},{name:"update_set_list$ebnf$1$subexpression$1",symbols:["comma","update_set"],postprocess:u},{name:"update_set_list$ebnf$1",symbols:["update_set_list$ebnf$1","update_set_list$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"update_set_list",symbols:["update_set","update_set_list$ebnf$1"],postprocess:([e,t])=>{const r=[];for(const s of[e,...t||[]]){const e=c(s);Array.isArray(e)?r.push(...e):r.push(e)}return r}},{name:"update_set",symbols:["update_set_one"]},{name:"update_set",symbols:["update_set_multiple"]},{name:"update_set_one",symbols:["ident",n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>(0,a.box)(e,{column:o(e[0]),value:c(e[2])})},{name:"update_set_multiple$subexpression$1",symbols:["lparen","expr_list_raw","rparen"],postprocess:p(1)},{name:"update_set_multiple",symbols:["collist_paren",n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"update_set_multiple$subexpression$1"],postprocess:e=>{const t=e[0],r=e[2];if(t.length!==r.length)throw new Error("number of columns does not match number of values");return(0,a.box)(e,t.map((e,t)=>({column:o(e),value:c(r[t])})))}},{name:"altertable_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:s},{name:"altertable_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_statement$ebnf$2",symbols:[n.lexerAny.has("kw_only")?{type:"kw_only"}:kw_only],postprocess:s},{name:"altertable_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_statement",symbols:["kw_alter",n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"altertable_statement$ebnf$1","altertable_statement$ebnf$2","table_ref","altertable_actions"],postprocess:e=>(0,a.track)(e,{type:"alter table",...e[2]?{ifExists:!0}:{},...e[3]?{only:!0}:{},table:c(e[4]),changes:(0,a.unbox)(e[5]).map(c)})},{name:"altertable_actions$ebnf$1",symbols:[]},{name:"altertable_actions$ebnf$1$subexpression$1",symbols:["comma","altertable_action"],postprocess:u},{name:"altertable_actions$ebnf$1",symbols:["altertable_actions$ebnf$1","altertable_actions$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"altertable_actions",symbols:["altertable_action","altertable_actions$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"altertable_action",symbols:["altertable_rename_table"]},{name:"altertable_action",symbols:["altertable_rename_column"]},{name:"altertable_action",symbols:["altertable_rename_constraint"]},{name:"altertable_action",symbols:["altertable_add_column"]},{name:"altertable_action",symbols:["altertable_drop_column"]},{name:"altertable_action",symbols:["altertable_alter_column"]},{name:"altertable_action",symbols:["altertable_add_constraint"]},{name:"altertable_action",symbols:["altertable_drop_constraint"]},{name:"altertable_action",symbols:["altertable_owner"]},{name:"altertable_rename_table",symbols:["kw_rename",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:e=>(0,a.track)(e,{type:"rename",to:o(u(e))})},{name:"altertable_rename_column$ebnf$1",symbols:["kw_column"],postprocess:s},{name:"altertable_rename_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_rename_column",symbols:["kw_rename","altertable_rename_column$ebnf$1","ident",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,a.track)(e,{type:"rename column",column:o(e[2]),to:o(u(e))})},{name:"altertable_rename_constraint",symbols:["kw_rename",n.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"ident",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,a.track)(e,{type:"rename constraint",constraint:o(e[2]),to:o(u(e))})},{name:"altertable_add_column$ebnf$1",symbols:["kw_column"],postprocess:s},{name:"altertable_add_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_add_column$ebnf$2",symbols:["kw_ifnotexists"],postprocess:s},{name:"altertable_add_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_add_column",symbols:["kw_add","altertable_add_column$ebnf$1","altertable_add_column$ebnf$2","createtable_column"],postprocess:e=>(0,a.track)(e,{type:"add column",...e[2]?{ifNotExists:!0}:{},column:c(e[3])})},{name:"altertable_drop_column$ebnf$1",symbols:["kw_column"],postprocess:s},{name:"altertable_drop_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$2",symbols:["kw_ifexists"],postprocess:s},{name:"altertable_drop_column$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_column$ebnf$3$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_column$ebnf$3",symbols:["altertable_drop_column$ebnf$3$subexpression$1"],postprocess:s},{name:"altertable_drop_column$ebnf$3",symbols:[],postprocess:()=>null},{name:"altertable_drop_column",symbols:["kw_drop","altertable_drop_column$ebnf$1","altertable_drop_column$ebnf$2","ident","altertable_drop_column$ebnf$3"],postprocess:e=>(0,a.track)(e,{type:"drop column",...e[2]?{ifExists:!0}:{},column:o(e[3]),...e[4]?{behaviour:_(e[4]," ")}:{}})},{name:"altertable_alter_column$ebnf$1",symbols:["kw_column"],postprocess:s},{name:"altertable_alter_column$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_alter_column",symbols:["kw_alter","altertable_alter_column$ebnf$1","ident","altercol"],postprocess:e=>(0,a.track)(e,{type:"alter column",column:o(e[2]),alter:c(e[3])})},{name:"altercol$ebnf$1$subexpression$1",symbols:["kw_set","kw_data"]},{name:"altercol$ebnf$1",symbols:["altercol$ebnf$1$subexpression$1"],postprocess:s},{name:"altercol$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol",symbols:["altercol$ebnf$1","kw_type","data_type"],postprocess:e=>(0,a.track)(e,{type:"set type",dataType:c(u(e))})},{name:"altercol",symbols:["kw_set",n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>(0,a.track)(e,{type:"set default",default:c(u(e))})},{name:"altercol",symbols:["kw_drop",n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default],postprocess:e=>(0,a.track)(e,{type:"drop default"})},{name:"altercol$subexpression$1",symbols:["kw_set"]},{name:"altercol$subexpression$1",symbols:["kw_drop"]},{name:"altercol",symbols:["altercol$subexpression$1","kw_not_null"],postprocess:e=>(0,a.track)(e,{type:_(e," ")})},{name:"altercol",symbols:["altercol_generated_add"],postprocess:c},{name:"altertable_add_constraint",symbols:["kw_add","createtable_constraint"],postprocess:e=>(0,a.track)(e,{type:"add constraint",constraint:c(u(e))})},{name:"altertable_drop_constraint$ebnf$1",symbols:["kw_ifexists"],postprocess:s},{name:"altertable_drop_constraint$ebnf$1",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"altertable_drop_constraint$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"altertable_drop_constraint$ebnf$2",symbols:["altertable_drop_constraint$ebnf$2$subexpression$1"],postprocess:s},{name:"altertable_drop_constraint$ebnf$2",symbols:[],postprocess:()=>null},{name:"altertable_drop_constraint",symbols:["kw_drop",n.lexerAny.has("kw_constraint")?{type:"kw_constraint"}:kw_constraint,"altertable_drop_constraint$ebnf$1","ident","altertable_drop_constraint$ebnf$2"],postprocess:e=>(0,a.track)(e,{type:"drop constraint",...e[2]?{ifExists:!0}:{},constraint:o(e[3]),...e[4]?{behaviour:_(e[4]," ")}:{}})},{name:"altertable_owner",symbols:["kw_owner",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,a.track)(e,{type:"owner",to:o(u(e))})},{name:"altercol_generated_add",symbols:["kw_add","altercol_generated"],postprocess:u},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_always"]},{name:"altercol_generated$ebnf$1$subexpression$1",symbols:["kw_by",n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default]},{name:"altercol_generated$ebnf$1",symbols:["altercol_generated$ebnf$1$subexpression$1"],postprocess:s},{name:"altercol_generated$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated$subexpression$1",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_identity"]},{name:"altercol_generated$ebnf$2$subexpression$1",symbols:["lparen","altercol_generated_seq","rparen"],postprocess:p(1)},{name:"altercol_generated$ebnf$2",symbols:["altercol_generated$ebnf$2$subexpression$1"],postprocess:s},{name:"altercol_generated$ebnf$2",symbols:[],postprocess:()=>null},{name:"altercol_generated",symbols:["kw_generated","altercol_generated$ebnf$1","altercol_generated$subexpression$1","altercol_generated$ebnf$2"],postprocess:e=>(0,a.track)(e,{type:"add generated",...e[1]&&{always:_(e[1]," ")},...e[3]&&{sequence:c(e[3])}})},{name:"altercol_generated_seq$ebnf$1$subexpression$1",symbols:["kw_sequence","kw_name","qualified_name"]},{name:"altercol_generated_seq$ebnf$1",symbols:["altercol_generated_seq$ebnf$1$subexpression$1"],postprocess:s},{name:"altercol_generated_seq$ebnf$1",symbols:[],postprocess:()=>null},{name:"altercol_generated_seq$ebnf$2",symbols:[]},{name:"altercol_generated_seq$ebnf$2",symbols:["altercol_generated_seq$ebnf$2","create_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"altercol_generated_seq",symbols:["altercol_generated_seq$ebnf$1","altercol_generated_seq$ebnf$2"],postprocess:e=>{const t={...e[0]&&{name:c(u(e[0]))}};return w(t,e[1]),(0,a.track)(e,t)}},{name:"alterindex_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:s},{name:"alterindex_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alterindex_statement",symbols:["kw_alter","kw_index","alterindex_statement$ebnf$1","table_ref","alterindex_action"],postprocess:e=>(0,a.track)(e,{type:"alter index",...e[2]?{ifExists:!0}:{},index:c(e[3]),change:c(e[4])})},{name:"alterindex_action",symbols:["alterindex_rename"]},{name:"alterindex_action",symbols:["alterindex_set_tablespace"]},{name:"alterindex_rename",symbols:["kw_rename",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"word"],postprocess:e=>(0,a.track)(e,{type:"rename",to:o(u(e))})},{name:"alterindex_set_tablespace",symbols:["kw_set","kw_tablespace","word"],postprocess:e=>(0,a.track)(e,{type:"set tablespace",tablespace:o(u(e))})},{name:"delete_statement",symbols:["delete_delete"]},{name:"delete_statement",symbols:["delete_truncate"]},{name:"delete_delete$subexpression$1",symbols:["kw_delete",n.lexerAny.has("kw_from")?{type:"kw_from"}:kw_from]},{name:"delete_delete$ebnf$1",symbols:["select_where"],postprocess:s},{name:"delete_delete$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_delete$ebnf$2$subexpression$1",symbols:[n.lexerAny.has("kw_returning")?{type:"kw_returning"}:kw_returning,"select_expr_list_aliased"],postprocess:u},{name:"delete_delete$ebnf$2",symbols:["delete_delete$ebnf$2$subexpression$1"],postprocess:s},{name:"delete_delete$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_delete",symbols:["delete_delete$subexpression$1","table_ref_aliased","delete_delete$ebnf$1","delete_delete$ebnf$2"],postprocess:e=>{const t=e[2],r=e[3];return(0,a.track)(e,{type:"delete",from:c(e[1]),...t?{where:t}:{},...r?{returning:r}:{}})}},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:s},{name:"delete_truncate$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$subexpression$1",symbols:["kw_truncate","delete_truncate$subexpression$1$ebnf$1"]},{name:"delete_truncate$macrocall$2",symbols:["table_ref"]},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:[]},{name:"delete_truncate$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"delete_truncate$macrocall$2"],postprocess:u},{name:"delete_truncate$macrocall$1$ebnf$1",symbols:["delete_truncate$macrocall$1$ebnf$1","delete_truncate$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"delete_truncate$macrocall$1",symbols:["delete_truncate$macrocall$2","delete_truncate$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_restart"]},{name:"delete_truncate$ebnf$1$subexpression$1$subexpression$1",symbols:["kw_continue"]},{name:"delete_truncate$ebnf$1$subexpression$1",symbols:["delete_truncate$ebnf$1$subexpression$1$subexpression$1","kw_identity"]},{name:"delete_truncate$ebnf$1",symbols:["delete_truncate$ebnf$1$subexpression$1"],postprocess:s},{name:"delete_truncate$ebnf$1",symbols:[],postprocess:()=>null},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"delete_truncate$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"delete_truncate$ebnf$2",symbols:["delete_truncate$ebnf$2$subexpression$1"],postprocess:s},{name:"delete_truncate$ebnf$2",symbols:[],postprocess:()=>null},{name:"delete_truncate",symbols:["delete_truncate$subexpression$1","delete_truncate$macrocall$1","delete_truncate$ebnf$1","delete_truncate$ebnf$2"],postprocess:e=>(0,a.track)(e,{type:"truncate table",tables:e[1],...e[2]&&{identity:_(e[2][0])},...e[3]&&{cascade:_(e[3])}})},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temp"]},{name:"create_sequence_statement$ebnf$1$subexpression$1",symbols:["kw_temporary"]},{name:"create_sequence_statement$ebnf$1",symbols:["create_sequence_statement$ebnf$1$subexpression$1"],postprocess:s},{name:"create_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$2",symbols:["kw_ifnotexists"],postprocess:s},{name:"create_sequence_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_statement$ebnf$3",symbols:[]},{name:"create_sequence_statement$ebnf$3",symbols:["create_sequence_statement$ebnf$3","create_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"create_sequence_statement",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_sequence_statement$ebnf$1","kw_sequence","create_sequence_statement$ebnf$2","qualified_name","create_sequence_statement$ebnf$3"],postprocess:e=>{const t={type:"create sequence",...e[1]&&{temp:!0},...e[3]&&{ifNotExists:!0},name:c(e[4]),options:{}};return w(t.options,e[5]),(0,a.track)(e,t)}},{name:"create_sequence_option",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"data_type"],postprocess:e=>(0,a.box)(e,["as",e[1]])},{name:"create_sequence_option$ebnf$1",symbols:["kw_by"],postprocess:s},{name:"create_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_increment","create_sequence_option$ebnf$1","int"],postprocess:e=>(0,a.box)(e,["incrementBy",e[2]])},{name:"create_sequence_option",symbols:["create_sequence_minvalue"],postprocess:e=>(0,a.box)(e,["minValue",e[0]])},{name:"create_sequence_option",symbols:["create_sequence_maxvalue"],postprocess:e=>(0,a.box)(e,["maxValue",e[0]])},{name:"create_sequence_option$ebnf$2",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:s},{name:"create_sequence_option$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["kw_start","create_sequence_option$ebnf$2","int"],postprocess:e=>(0,a.box)(e,["startWith",e[2]])},{name:"create_sequence_option",symbols:["kw_cache","int"],postprocess:e=>(0,a.box)(e,["cache",e[1]])},{name:"create_sequence_option$ebnf$3",symbols:["kw_no"],postprocess:s},{name:"create_sequence_option$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_sequence_option",symbols:["create_sequence_option$ebnf$3","kw_cycle"],postprocess:e=>(0,a.box)(e,["cycle",_(e," ")])},{name:"create_sequence_option",symbols:["create_sequence_owned_by"],postprocess:e=>(0,a.box)(e,["ownedBy",c(e)])},{name:"create_sequence_minvalue",symbols:["kw_minvalue","int"],postprocess:u},{name:"create_sequence_minvalue",symbols:["kw_no","kw_minvalue"],postprocess:e=>(0,a.box)(e,"no minvalue")},{name:"create_sequence_maxvalue",symbols:["kw_maxvalue","int"],postprocess:u},{name:"create_sequence_maxvalue",symbols:["kw_no","kw_maxvalue"],postprocess:e=>(0,a.box)(e,"no maxvalue")},{name:"create_sequence_owned_by$subexpression$1",symbols:["kw_none"]},{name:"create_sequence_owned_by$subexpression$1",symbols:["qcolumn"]},{name:"create_sequence_owned_by",symbols:["kw_owned","kw_by","create_sequence_owned_by$subexpression$1"],postprocess:e=>(0,a.box)(e,c(u(e)))},{name:"alter_sequence_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:s},{name:"alter_sequence_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_statement",symbols:["kw_alter","kw_sequence","alter_sequence_statement$ebnf$1","qualified_name","alter_sequence_statement_body"],postprocess:e=>{const t={type:"alter sequence",...e[2]&&{ifExists:!0},name:c(e[3]),change:e[4]};return(0,a.track)(e,t)}},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_option"]},{name:"alter_sequence_statement_body$ebnf$1",symbols:["alter_sequence_statement_body$ebnf$1","alter_sequence_option"],postprocess:e=>e[0].concat([e[1]])},{name:"alter_sequence_statement_body",symbols:["alter_sequence_statement_body$ebnf$1"],postprocess:e=>{const t={type:"set options"};return w(t,e[0]),(0,a.track)(e,t)}},{name:"alter_sequence_statement_body$subexpression$1",symbols:["ident"]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[n.lexerAny.has("kw_session_user")?{type:"kw_session_user"}:kw_session_user]},{name:"alter_sequence_statement_body$subexpression$1",symbols:[n.lexerAny.has("kw_current_user")?{type:"kw_current_user"}:kw_current_user]},{name:"alter_sequence_statement_body",symbols:["kw_owner",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"alter_sequence_statement_body$subexpression$1"],postprocess:e=>(0,a.track)(e,{type:"owner to",owner:o(u(e))})},{name:"alter_sequence_statement_body",symbols:["kw_rename",n.lexerAny.has("kw_to")?{type:"kw_to"}:kw_to,"ident"],postprocess:e=>(0,a.track)(e,{type:"rename",newName:o(u(e))})},{name:"alter_sequence_statement_body",symbols:["kw_set","kw_schema","ident"],postprocess:e=>(0,a.track)(e,{type:"set schema",newSchema:o(u(e))})},{name:"alter_sequence_option",symbols:["create_sequence_option"],postprocess:c},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with],postprocess:s},{name:"alter_sequence_option$ebnf$1$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option$ebnf$1$subexpression$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1$ebnf$1","int"],postprocess:u},{name:"alter_sequence_option$ebnf$1",symbols:["alter_sequence_option$ebnf$1$subexpression$1"],postprocess:s},{name:"alter_sequence_option$ebnf$1",symbols:[],postprocess:()=>null},{name:"alter_sequence_option",symbols:["kw_restart","alter_sequence_option$ebnf$1"],postprocess:e=>(0,a.box)(e,["restart","number"!=typeof(0,a.unbox)(e[1])||(0,a.unbox)(e[1])])},{name:"drop_statement$ebnf$1",symbols:["kw_ifexists"],postprocess:s},{name:"drop_statement$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_statement$macrocall$2",symbols:["qualified_name"]},{name:"drop_statement$macrocall$1$ebnf$1",symbols:[]},{name:"drop_statement$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"drop_statement$macrocall$2"],postprocess:u},{name:"drop_statement$macrocall$1$ebnf$1",symbols:["drop_statement$macrocall$1$ebnf$1","drop_statement$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"drop_statement$macrocall$1",symbols:["drop_statement$macrocall$2","drop_statement$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_cascade"]},{name:"drop_statement$ebnf$2$subexpression$1",symbols:["kw_restrict"]},{name:"drop_statement$ebnf$2",symbols:["drop_statement$ebnf$2$subexpression$1"],postprocess:s},{name:"drop_statement$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_statement",symbols:["kw_drop","drop_what","drop_statement$ebnf$1","drop_statement$macrocall$1","drop_statement$ebnf$2"],postprocess:(e,t)=>{const r=c(e[1]);return(0,a.track)(e,{...r,...e[2]&&{ifExists:!0},names:e[3],...e[4]&&{cascade:_(e[4])}})}},{name:"drop_what",symbols:[n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table],postprocess:e=>(0,a.track)(e,{type:"drop table"})},{name:"drop_what",symbols:["kw_sequence"],postprocess:e=>(0,a.track)(e,{type:"drop sequence"})},{name:"drop_what",symbols:["kw_type"],postprocess:e=>(0,a.track)(e,{type:"drop type"})},{name:"drop_what",symbols:["kw_trigger"],postprocess:e=>(0,a.track)(e,{type:"drop trigger"})},{name:"drop_what$ebnf$1",symbols:[n.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:s},{name:"drop_what$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_what",symbols:["kw_index","drop_what$ebnf$1"],postprocess:e=>(0,a.track)(e,{type:"drop index",...e[1]&&{concurrently:!0}})},{name:"with_statement",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"with_statement_bindings","with_statement_statement"],postprocess:e=>(0,a.track)(e,{type:"with",bind:e[1],in:c(e[2])})},{name:"with_recursive_statement$subexpression$1",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"kw_recursive"]},{name:"with_recursive_statement",symbols:["with_recursive_statement$subexpression$1","ident","collist_paren",n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","union_statement","rparen","with_statement_statement"],postprocess:e=>(0,a.track)(e,{type:"with recursive",alias:o(e[1]),columnNames:e[2].map(o),bind:e[5],in:c(e[7])})},{name:"with_statement_bindings$ebnf$1",symbols:[]},{name:"with_statement_bindings$ebnf$1$subexpression$1",symbols:["comma","with_statement_binding"],postprocess:u},{name:"with_statement_bindings$ebnf$1",symbols:["with_statement_bindings$ebnf$1","with_statement_bindings$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"with_statement_bindings",symbols:["with_statement_binding","with_statement_bindings$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"with_statement_binding",symbols:["word",n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","with_statement_statement","rparen"],postprocess:e=>(0,a.track)(e,{alias:o(e[0]),statement:c(e[3])})},{name:"with_statement_statement",symbols:["selection"]},{name:"with_statement_statement",symbols:["insert_statement"]},{name:"with_statement_statement",symbols:["update_statement"]},{name:"with_statement_statement",symbols:["delete_statement"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_enum"]},{name:"createtype_statement$subexpression$1",symbols:["createtype_composite"]},{name:"createtype_statement",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_type","qualified_name","createtype_statement$subexpression$1"],postprocess:e=>(0,a.track)(e,{name:e[2],...c(e[3])})},{name:"createtype_enum$macrocall$2",symbols:["enum_value"]},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_enum$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_enum$macrocall$2"],postprocess:u},{name:"createtype_enum$macrocall$1$ebnf$1",symbols:["createtype_enum$macrocall$1$ebnf$1","createtype_enum$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtype_enum$macrocall$1",symbols:["createtype_enum$macrocall$2","createtype_enum$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"createtype_enum",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"kw_enum","lparen","createtype_enum$macrocall$1","rparen"],postprocess:e=>(0,a.track)(e,{type:"create enum",values:e[3]})},{name:"enum_value",symbols:["string"],postprocess:e=>(0,a.track)(e,{value:_(e)})},{name:"createtype_composite$macrocall$2",symbols:["createtype_composite_attr"]},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:[]},{name:"createtype_composite$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"createtype_composite$macrocall$2"],postprocess:u},{name:"createtype_composite$macrocall$1$ebnf$1",symbols:["createtype_composite$macrocall$1$ebnf$1","createtype_composite$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"createtype_composite$macrocall$1",symbols:["createtype_composite$macrocall$2","createtype_composite$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"createtype_composite",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"lparen","createtype_composite$macrocall$1","rparen"],postprocess:e=>(0,a.track)(e,{type:"create composite type",attributes:e[2]})},{name:"createtype_composite_attr$ebnf$1",symbols:["createtable_collate"],postprocess:s},{name:"createtype_composite_attr$ebnf$1",symbols:[],postprocess:()=>null},{name:"createtype_composite_attr",symbols:["word","data_type","createtype_composite_attr$ebnf$1"],postprocess:e=>(0,a.track)(e,{name:o(e[0]),dataType:e[1],...e[2]?{collate:e[2][1]}:{}})},{name:"union_left",symbols:["select_statement"]},{name:"union_left",symbols:["select_values"]},{name:"union_left",symbols:["selection_paren"]},{name:"union_right",symbols:["selection"]},{name:"union_right",symbols:["selection_paren"]},{name:"union_statement$subexpression$1$ebnf$1",symbols:[n.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:s},{name:"union_statement$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"union_statement$subexpression$1",symbols:[n.lexerAny.has("kw_union")?{type:"kw_union"}:kw_union,"union_statement$subexpression$1$ebnf$1"]},{name:"union_statement",symbols:["union_left","union_statement$subexpression$1","union_right"],postprocess:e=>(0,a.track)(e,{type:_(e[1]," "),left:c(e[0]),right:c(e[2])})},{name:"prepare$ebnf$1$subexpression$1",symbols:["lparen","data_type_list","rparen"],postprocess:p(1)},{name:"prepare$ebnf$1",symbols:["prepare$ebnf$1$subexpression$1"],postprocess:s},{name:"prepare$ebnf$1",symbols:[],postprocess:()=>null},{name:"prepare",symbols:["kw_prepare","ident","prepare$ebnf$1",n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"statement_noprep"],postprocess:e=>(0,a.track)(e,{type:"prepare",name:o(e[1]),...e[2]&&{args:e[2]},statement:c(u(e))})},{name:"deallocate$ebnf$1",symbols:["kw_prepare"],postprocess:s},{name:"deallocate$ebnf$1",symbols:[],postprocess:()=>null},{name:"deallocate",symbols:["kw_deallocate","deallocate$ebnf$1","deallocate_target"],postprocess:e=>(0,a.track)(e,{type:"deallocate",target:e[2]})},{name:"deallocate_target",symbols:["deallocate_all"],postprocess:c},{name:"deallocate_target",symbols:["deallocate_name"],postprocess:c},{name:"deallocate_name",symbols:["ident"],postprocess:e=>(0,a.track)(e,o(e[0]))},{name:"deallocate_all",symbols:[n.lexerAny.has("kw_all")?{type:"kw_all"}:kw_all],postprocess:e=>(0,a.track)(e,{option:"all"})},{name:"create_view_statements",symbols:["create_view"]},{name:"create_view_statements",symbols:["create_materialized_view"]},{name:"create_view$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_view$ebnf$1",symbols:["create_view$ebnf$1$subexpression$1"],postprocess:s},{name:"create_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temp"]},{name:"create_view$ebnf$2$subexpression$1",symbols:["kw_temporary"]},{name:"create_view$ebnf$2",symbols:["create_view$ebnf$2$subexpression$1"],postprocess:s},{name:"create_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$3",symbols:["kw_recursive"],postprocess:s},{name:"create_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$4$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"create_view$ebnf$4$subexpression$1$macrocall$2"],postprocess:u},{name:"create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_view$ebnf$4$subexpression$1$macrocall$1",symbols:["create_view$ebnf$4$subexpression$1$macrocall$2","create_view$ebnf$4$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"create_view$ebnf$4$subexpression$1",symbols:["lparen","create_view$ebnf$4$subexpression$1$macrocall$1","rparen"],postprocess:p(1)},{name:"create_view$ebnf$4",symbols:["create_view$ebnf$4$subexpression$1"],postprocess:s},{name:"create_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$5",symbols:["create_view_opts"],postprocess:s},{name:"create_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_local"]},{name:"create_view$ebnf$6$subexpression$1$subexpression$1",symbols:["kw_cascaded"]},{name:"create_view$ebnf$6$subexpression$1",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view$ebnf$6$subexpression$1$subexpression$1",n.lexerAny.has("kw_check")?{type:"kw_check"}:kw_check,"kw_option"],postprocess:p(1)},{name:"create_view$ebnf$6",symbols:["create_view$ebnf$6$subexpression$1"],postprocess:s},{name:"create_view$ebnf$6",symbols:[],postprocess:()=>null},{name:"create_view",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_view$ebnf$1","create_view$ebnf$2","create_view$ebnf$3","kw_view","qualified_name","create_view$ebnf$4","create_view$ebnf$5",n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_view$ebnf$6"],postprocess:e=>(0,a.track)(e,{type:"create view",...e[1]&&{orReplace:!0},...e[2]&&{temp:!0},...e[3]&&{recursive:!0},name:e[5],...e[6]&&{columnNames:e[6].map(o)},...e[7]&&{parameters:f(e[7])},query:e[9],...e[10]&&{checkOption:_(e[10])}})},{name:"create_view_opt",symbols:["ident",n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"ident"],postprocess:([e,t,r])=>[_(e),_(r)]},{name:"create_view_opts$macrocall$2",symbols:["create_view_opt"]},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:[]},{name:"create_view_opts$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"create_view_opts$macrocall$2"],postprocess:u},{name:"create_view_opts$macrocall$1$ebnf$1",symbols:["create_view_opts$macrocall$1$ebnf$1","create_view_opts$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_view_opts$macrocall$1",symbols:["create_view_opts$macrocall$2","create_view_opts$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"create_view_opts",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_view_opts$macrocall$1"],postprocess:u},{name:"create_materialized_view$ebnf$1",symbols:["kw_ifnotexists"],postprocess:s},{name:"create_materialized_view$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$2",symbols:["ident"]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"create_materialized_view$ebnf$2$subexpression$1$macrocall$2"],postprocess:u},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_materialized_view$ebnf$2$subexpression$1$macrocall$1",symbols:["create_materialized_view$ebnf$2$subexpression$1$macrocall$2","create_materialized_view$ebnf$2$subexpression$1$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"create_materialized_view$ebnf$2$subexpression$1",symbols:["lparen","create_materialized_view$ebnf$2$subexpression$1$macrocall$1","rparen"],postprocess:p(1)},{name:"create_materialized_view$ebnf$2",symbols:["create_materialized_view$ebnf$2$subexpression$1"],postprocess:s},{name:"create_materialized_view$ebnf$2",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$3",symbols:["create_view_opts"],postprocess:s},{name:"create_materialized_view$ebnf$3",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$4$subexpression$1",symbols:["kw_tablespace","ident"],postprocess:u},{name:"create_materialized_view$ebnf$4",symbols:["create_materialized_view$ebnf$4$subexpression$1"],postprocess:s},{name:"create_materialized_view$ebnf$4",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:s},{name:"create_materialized_view$ebnf$5$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_materialized_view$ebnf$5$subexpression$1",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"create_materialized_view$ebnf$5$subexpression$1$ebnf$1","kw_data"]},{name:"create_materialized_view$ebnf$5",symbols:["create_materialized_view$ebnf$5$subexpression$1"],postprocess:s},{name:"create_materialized_view$ebnf$5",symbols:[],postprocess:()=>null},{name:"create_materialized_view",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"kw_materialized","kw_view","create_materialized_view$ebnf$1","qualified_name","create_materialized_view$ebnf$2","create_materialized_view$ebnf$3","create_materialized_view$ebnf$4",n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"selection","create_materialized_view$ebnf$5"],postprocess:e=>(0,a.track)(e,{type:"create materialized view",...e[3]&&{ifNotExists:!0},name:e[4],...e[5]&&{columnNames:e[6].map(o)},...e[6]&&{parameters:f(e[6])},...e[7]&&{tablespace:o(e[7])},query:e[9],...e[10]&&{withData:"no"!==_(e[10][1])}})},{name:"refresh_view_statements$ebnf$1",symbols:[n.lexerAny.has("kw_concurrently")?{type:"kw_concurrently"}:kw_concurrently],postprocess:s},{name:"refresh_view_statements$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:["kw_no"],postprocess:s},{name:"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"refresh_view_statements$ebnf$2$subexpression$1",symbols:[n.lexerAny.has("kw_with")?{type:"kw_with"}:kw_with,"refresh_view_statements$ebnf$2$subexpression$1$ebnf$1","kw_data"]},{name:"refresh_view_statements$ebnf$2",symbols:["refresh_view_statements$ebnf$2$subexpression$1"],postprocess:s},{name:"refresh_view_statements$ebnf$2",symbols:[],postprocess:()=>null},{name:"refresh_view_statements",symbols:["kw_refresh","kw_materialized","kw_view","refresh_view_statements$ebnf$1","qname","refresh_view_statements$ebnf$2"],postprocess:e=>(0,a.track)(e,{type:"refresh materialized view",...e[3]?{concurrently:!0}:{},name:e[4],...e[5]?{withData:"no"!==_(e[5][1])}:{}})},{name:"functions_statements",symbols:["create_func"]},{name:"functions_statements",symbols:["do_stm"]},{name:"functions_statements",symbols:["drop_func"]},{name:"create_func$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("kw_or")?{type:"kw_or"}:kw_or,"kw_replace"]},{name:"create_func$ebnf$1",symbols:["create_func$ebnf$1$subexpression$1"],postprocess:s},{name:"create_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1$ebnf$1$macrocall$2",symbols:["func_argdef"]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:[]},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"create_func$subexpression$1$ebnf$1$macrocall$2"],postprocess:u},{name:"create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"create_func$subexpression$1$ebnf$1$macrocall$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$2","create_func$subexpression$1$ebnf$1$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"create_func$subexpression$1$ebnf$1",symbols:["create_func$subexpression$1$ebnf$1$macrocall$1"],postprocess:s},{name:"create_func$subexpression$1$ebnf$1",symbols:[],postprocess:()=>null},{name:"create_func$subexpression$1",symbols:["lparen","create_func$subexpression$1$ebnf$1","rparen"],postprocess:p(1)},{name:"create_func$ebnf$2",symbols:["func_spec"]},{name:"create_func$ebnf$2",symbols:["create_func$ebnf$2","func_spec"],postprocess:e=>e[0].concat([e[1]])},{name:"create_func",symbols:[n.lexerAny.has("kw_create")?{type:"kw_create"}:kw_create,"create_func$ebnf$1","kw_function","qname","create_func$subexpression$1","create_func$ebnf$2"],postprocess:(e,t)=>{var r;const s={};for(const t of e[5]){for(const e in t)if("_"!==e[0]&&e in s)throw new Error("conflicting or redundant options "+e);Object.assign(s,t)}return(0,a.track)(e,{type:"create function",...e[1]&&{orReplace:!0},name:e[3],arguments:null!==(r=e[4])&&void 0!==r?r:[],...s})}},{name:"func_argdef$ebnf$1",symbols:["func_argopts"],postprocess:s},{name:"func_argdef$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argdef$ebnf$2",symbols:["func_argdefault"],postprocess:s},{name:"func_argdef$ebnf$2",symbols:[],postprocess:()=>null},{name:"func_argdef",symbols:["func_argdef$ebnf$1","data_type","func_argdef$ebnf$2"],postprocess:e=>(0,a.track)(e,{default:e[2],type:e[1],...e[0]})},{name:"func_argdefault",symbols:[n.lexerAny.has("kw_default")?{type:"kw_default"}:kw_default,"expr"],postprocess:e=>e[1]},{name:"func_argdefault",symbols:[n.lexerAny.has("op_eq")?{type:"op_eq"}:op_eq,"expr"],postprocess:e=>e[1]},{name:"func_argopts$ebnf$1",symbols:["word"],postprocess:s},{name:"func_argopts$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_argopts",symbols:["func_argmod","func_argopts$ebnf$1"],postprocess:e=>(0,a.track)(e,{mode:_(e[0]),...e[1]&&{name:o(e[1])}})},{name:"func_argopts",symbols:["word"],postprocess:(e,t)=>{const r=o(e);return"out"===r||"inout"===r||"variadic"===r?t:(0,a.track)(e,{name:r})}},{name:"func_argmod",symbols:[n.lexerAny.has("kw_in")?{type:"kw_in"}:kw_in]},{name:"func_argmod",symbols:["kw_out"]},{name:"func_argmod",symbols:["kw_inout"]},{name:"func_argmod",symbols:["kw_variadic"]},{name:"func_spec",symbols:["kw_language","word"],postprocess:e=>(0,a.track)(e,{language:o(u(e))})},{name:"func_spec",symbols:["func_purity"],postprocess:e=>(0,a.track)(e,{purity:_(e)})},{name:"func_spec$subexpression$1",symbols:[n.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock]},{name:"func_spec$subexpression$1",symbols:["string"]},{name:"func_spec",symbols:[n.lexerAny.has("kw_as")?{type:"kw_as"}:kw_as,"func_spec$subexpression$1"],postprocess:e=>({code:_(u(e))})},{name:"func_spec$ebnf$1",symbols:[n.lexerAny.has("kw_not")?{type:"kw_not"}:kw_not],postprocess:s},{name:"func_spec$ebnf$1",symbols:[],postprocess:()=>null},{name:"func_spec$subexpression$2",symbols:["word"],postprocess:h("leakproof")},{name:"func_spec",symbols:["func_spec$ebnf$1","func_spec$subexpression$2"],postprocess:e=>(0,a.track)(e,{leakproof:!e[0]})},{name:"func_spec",symbols:["func_returns"],postprocess:e=>(0,a.track)(e,{returns:c(e)})},{name:"func_spec$subexpression$3",symbols:["word"],postprocess:h("called")},{name:"func_spec",symbols:["func_spec$subexpression$3","oninp"],postprocess:()=>({onNullInput:"call"})},{name:"func_spec$subexpression$4",symbols:["word"],postprocess:h("returns")},{name:"func_spec",symbols:["func_spec$subexpression$4",n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp"],postprocess:()=>({onNullInput:"null"})},{name:"func_spec$subexpression$5",symbols:["word"],postprocess:h("strict")},{name:"func_spec",symbols:["func_spec$subexpression$5"],postprocess:()=>({onNullInput:"strict"})},{name:"func_purity",symbols:["word"],postprocess:h("immutable")},{name:"func_purity",symbols:["word"],postprocess:h("stable")},{name:"func_purity",symbols:["word"],postprocess:h("volatile")},{name:"oninp$subexpression$1",symbols:["word"],postprocess:h("input")},{name:"oninp",symbols:[n.lexerAny.has("kw_on")?{type:"kw_on"}:kw_on,n.lexerAny.has("kw_null")?{type:"kw_null"}:kw_null,"oninp$subexpression$1"]},{name:"func_returns",symbols:["kw_returns","data_type"],postprocess:u},{name:"func_returns$macrocall$2",symbols:["func_ret_table_col"]},{name:"func_returns$macrocall$1$ebnf$1",symbols:[]},{name:"func_returns$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"func_returns$macrocall$2"],postprocess:u},{name:"func_returns$macrocall$1$ebnf$1",symbols:["func_returns$macrocall$1$ebnf$1","func_returns$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"func_returns$macrocall$1",symbols:["func_returns$macrocall$2","func_returns$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"func_returns",symbols:["kw_returns",n.lexerAny.has("kw_table")?{type:"kw_table"}:kw_table,"lparen","func_returns$macrocall$1","rparen"],postprocess:e=>(0,a.track)(e,{kind:"table",columns:e[3]})},{name:"func_ret_table_col",symbols:["word","data_type"],postprocess:e=>(0,a.track)(e,{name:o(e[0]),type:e[1]})},{name:"do_stm$ebnf$1$subexpression$1",symbols:["kw_language","word"],postprocess:u},{name:"do_stm$ebnf$1",symbols:["do_stm$ebnf$1$subexpression$1"],postprocess:s},{name:"do_stm$ebnf$1",symbols:[],postprocess:()=>null},{name:"do_stm",symbols:[n.lexerAny.has("kw_do")?{type:"kw_do"}:kw_do,"do_stm$ebnf$1",n.lexerAny.has("codeblock")?{type:"codeblock"}:codeblock],postprocess:e=>(0,a.track)(e,{type:"do",...e[1]&&{language:o(e[1])},code:e[2].value})},{name:"drop_func$ebnf$1$subexpression$1",symbols:["kw_if","kw_exists"]},{name:"drop_func$ebnf$1",symbols:["drop_func$ebnf$1$subexpression$1"],postprocess:s},{name:"drop_func$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func$ebnf$2",symbols:["drop_func_overload"],postprocess:s},{name:"drop_func$ebnf$2",symbols:[],postprocess:()=>null},{name:"drop_func",symbols:["kw_drop","kw_function","drop_func$ebnf$1","qname","drop_func$ebnf$2"],postprocess:e=>(0,a.track)(e,{type:"drop function",...e[2]&&{ifExists:!0},name:e[3],...e[4]&&{arguments:e[4]}})},{name:"drop_func_overload$macrocall$2",symbols:["drop_func_overload_col"]},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:[]},{name:"drop_func_overload$macrocall$1$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("comma")?{type:"comma"}:comma,"drop_func_overload$macrocall$2"],postprocess:u},{name:"drop_func_overload$macrocall$1$ebnf$1",symbols:["drop_func_overload$macrocall$1$ebnf$1","drop_func_overload$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"drop_func_overload$macrocall$1",symbols:["drop_func_overload$macrocall$2","drop_func_overload$macrocall$1$ebnf$1"],postprocess:([e,t])=>[c(e),...t.map(c)||[]]},{name:"drop_func_overload",symbols:["lparen","drop_func_overload$macrocall$1","rparen"],postprocess:p(1)},{name:"drop_func_overload_col$ebnf$1",symbols:["word"],postprocess:s},{name:"drop_func_overload_col$ebnf$1",symbols:[],postprocess:()=>null},{name:"drop_func_overload_col",symbols:["drop_func_overload_col$ebnf$1","qname"],postprocess:e=>(0,a.track)(e,{type:e[1],...e[0]&&{name:o(e[0])}})},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2",symbols:[]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["statement_separator"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2$subexpression$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","statement"]},{name:"main$ebnf$2",symbols:["main$ebnf$2","main$ebnf$2$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$3",symbols:[]},{name:"main$ebnf$3",symbols:["main$ebnf$3","statement_separator"],postprocess:e=>e[0].concat([e[1]])},{name:"main",symbols:["main$ebnf$1","statement","main$ebnf$2","main$ebnf$3"],postprocess:([e,t,r])=>{const s=r,n=[c(t),...s.map(e=>c(e[1]))];return 1===n.length?n[0]:n}},{name:"statement_separator",symbols:[n.lexerAny.has("semicolon")?{type:"semicolon"}:semicolon]},{name:"statement",symbols:["statement_noprep"]},{name:"statement",symbols:["prepare"]},{name:"statement",symbols:["deallocate"]},{name:"statement_noprep",symbols:["selection"]},{name:"statement_noprep",symbols:["createtable_statement"]},{name:"statement_noprep",symbols:["createextension_statement"]},{name:"statement_noprep",symbols:["createindex_statement"]},{name:"statement_noprep",symbols:["simplestatements_all"]},{name:"statement_noprep",symbols:["insert_statement"]},{name:"statement_noprep",symbols:["update_statement"]},{name:"statement_noprep",symbols:["altertable_statement"]},{name:"statement_noprep",symbols:["alterindex_statement"]},{name:"statement_noprep",symbols:["delete_statement"]},{name:"statement_noprep",symbols:["create_sequence_statement"]},{name:"statement_noprep",symbols:["alter_sequence_statement"]},{name:"statement_noprep",symbols:["drop_statement"]},{name:"statement_noprep",symbols:["createtype_statement"]},{name:"statement_noprep",symbols:["create_view_statements"]},{name:"statement_noprep",symbols:["refresh_view_statements"]},{name:"statement_noprep",symbols:["create_schema"]},{name:"statement_noprep",symbols:["raise_statement"]},{name:"statement_noprep",symbols:["comment_statement"]},{name:"statement_noprep",symbols:["functions_statements"]},{name:"selection",symbols:["select_statement"],postprocess:c},{name:"selection",symbols:["select_values"],postprocess:c},{name:"selection",symbols:["with_statement"],postprocess:c},{name:"selection",symbols:["with_recursive_statement"],postprocess:c},{name:"selection",symbols:["union_statement"],postprocess:c},{name:"selection_paren",symbols:["lparen","selection","rparen"],postprocess:p(1)}],ParserStart:"main"};t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(12),n={Lexer:s.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elements"],postprocess:function(e){return e[0]}},{name:"main$ebnf$1",symbols:[],postprocess:()=>null},{name:"main",symbols:[s.lexerAny.has("start_list")?{type:"start_list"}:start_list,"main$ebnf$1",s.lexerAny.has("end_list")?{type:"end_list"}:end_list],postprocess:e=>e[1]||[]},{name:"elements$ebnf$1",symbols:[]},{name:"elements$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"elt"],postprocess:e=>e&&e[e.length-1]},{name:"elements$ebnf$1",symbols:["elements$ebnf$1","elements$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"elements",symbols:["elt","elements$ebnf$1"],postprocess:([e,t])=>[e,...t||[]]},{name:"elt",symbols:[s.lexerAny.has("value")?{type:"value"}:value],postprocess:e=>e[0].value},{name:"elt",symbols:["main"],postprocess:e=>e[0]}],ParserStart:"main"};t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const s=r(0);var n;t.lexer=(0,s.compile)({valueString:{match:/"(?:\\["\\]|[^\n"\\])*"/,value:e=>JSON.parse(e),type:e=>"value"},valueRaw:{match:/[^\s,\{\}"](?:[^,\{\}"]*[^\s,\{\}"])?/,type:()=>"value"},comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},start_list:"{",end_list:"}"}),t.lexer.next=(n=t.lexer.next,()=>{let e;for(;(e=n.call(t.lexer))&&"space"===e.type;);return e}),t.lexerAny=t.lexer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(14),n=e=>t=>t[e],a=e=>e&&e[e.length-1];function o(e){return Array.isArray(e)&&1===e.length&&(e=o(e[0])),Array.isArray(e)&&!e.length?null:e}const l={Lexer:s.lexerAny,ParserRules:[{name:"number$subexpression$1",symbols:["float"]},{name:"number$subexpression$1",symbols:["int"]},{name:"number",symbols:["number$subexpression$1"],postprocess:o},{name:"float",symbols:[s.lexerAny.has("float")?{type:"float"}:float],postprocess:e=>parseFloat(o(e))},{name:"int",symbols:[s.lexerAny.has("int")?{type:"int"}:int],postprocess:e=>parseInt(o(e),10)},{name:"comma",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma],postprocess:function(e){return e[0]}},{name:"point$macrocall$2",symbols:["point_content"]},{name:"point$macrocall$1$subexpression$1",symbols:["point$macrocall$2"]},{name:"point$macrocall$1$subexpression$1",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen,"point$macrocall$2",s.lexerAny.has("rparen")?{type:"rparen"}:rparen],postprocess:n(1)},{name:"point$macrocall$1",symbols:["point$macrocall$1$subexpression$1"],postprocess:o},{name:"point",symbols:["point$macrocall$1"],postprocess:o},{name:"point_content",symbols:["number","comma","number"],postprocess:e=>({x:e[0],y:e[2]})},{name:"line",symbols:[s.lexerAny.has("lcurl")?{type:"lcurl"}:lcurl,"number","comma","number","comma","number",s.lexerAny.has("rcurl")?{type:"rcurl"}:rcurl],postprocess:e=>({a:e[1],b:e[3],c:e[5]})},{name:"box",symbols:["closed_path"],postprocess:([e],t)=>2!==e.length?t:e},{name:"lseg",symbols:["path"],postprocess:([e],t)=>2!==e.path.length?t:e.path},{name:"path",symbols:["open_path"],postprocess:([e])=>({closed:!1,path:e})},{name:"path",symbols:["closed_path"],postprocess:([e])=>({closed:!0,path:e})},{name:"open_path$macrocall$2",symbols:[s.lexerAny.has("lbracket")?{type:"lbracket"}:lbracket]},{name:"open_path$macrocall$3",symbols:[s.lexerAny.has("rbracket")?{type:"rbracket"}:rbracket]},{name:"open_path$macrocall$1$macrocall$2",symbols:["point"]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"open_path$macrocall$1$macrocall$2"],postprocess:a},{name:"open_path$macrocall$1$macrocall$1$ebnf$1",symbols:["open_path$macrocall$1$macrocall$1$ebnf$1","open_path$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"open_path$macrocall$1$macrocall$1",symbols:["open_path$macrocall$1$macrocall$2","open_path$macrocall$1$macrocall$1$ebnf$1"],postprocess:([e,t])=>[o(e),...t.map(o)||[]]},{name:"open_path$macrocall$1",symbols:["open_path$macrocall$2","open_path$macrocall$1$macrocall$1","open_path$macrocall$3"],postprocess:n(1)},{name:"open_path",symbols:["open_path$macrocall$1"],postprocess:a},{name:"closed_path$subexpression$1$macrocall$2",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"closed_path$subexpression$1$macrocall$3",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$2",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$1$macrocall$2"],postprocess:a},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"closed_path$subexpression$1$macrocall$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1$ebnf$1"],postprocess:([e,t])=>[o(e),...t.map(o)||[]]},{name:"closed_path$subexpression$1$macrocall$1",symbols:["closed_path$subexpression$1$macrocall$2","closed_path$subexpression$1$macrocall$1$macrocall$1","closed_path$subexpression$1$macrocall$3"],postprocess:n(1)},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$1"],postprocess:a},{name:"closed_path$subexpression$1$macrocall$5",symbols:["point"]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:[]},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1",symbols:[s.lexerAny.has("comma")?{type:"comma"}:comma,"closed_path$subexpression$1$macrocall$5"],postprocess:a},{name:"closed_path$subexpression$1$macrocall$4$ebnf$1",symbols:["closed_path$subexpression$1$macrocall$4$ebnf$1","closed_path$subexpression$1$macrocall$4$ebnf$1$subexpression$1"],postprocess:e=>e[0].concat([e[1]])},{name:"closed_path$subexpression$1$macrocall$4",symbols:["closed_path$subexpression$1$macrocall$5","closed_path$subexpression$1$macrocall$4$ebnf$1"],postprocess:([e,t])=>[o(e),...t.map(o)||[]]},{name:"closed_path$subexpression$1",symbols:["closed_path$subexpression$1$macrocall$4"],postprocess:a},{name:"closed_path",symbols:["closed_path$subexpression$1"],postprocess:n(0)},{name:"polygon",symbols:["closed_path"],postprocess:n(0)},{name:"circle_body",symbols:["point","comma","number"],postprocess:e=>({c:e[0],r:e[2]})},{name:"circle$subexpression$1$macrocall$2",symbols:[s.lexerAny.has("lcomp")?{type:"lcomp"}:lcomp]},{name:"circle$subexpression$1$macrocall$3",symbols:[s.lexerAny.has("rcomp")?{type:"rcomp"}:rcomp]},{name:"circle$subexpression$1$macrocall$1",symbols:["circle$subexpression$1$macrocall$2","circle_body","circle$subexpression$1$macrocall$3"],postprocess:n(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$1"]},{name:"circle$subexpression$1$macrocall$5",symbols:[s.lexerAny.has("lparen")?{type:"lparen"}:lparen]},{name:"circle$subexpression$1$macrocall$6",symbols:[s.lexerAny.has("rparen")?{type:"rparen"}:rparen]},{name:"circle$subexpression$1$macrocall$4",symbols:["circle$subexpression$1$macrocall$5","circle_body","circle$subexpression$1$macrocall$6"],postprocess:n(1)},{name:"circle$subexpression$1",symbols:["circle$subexpression$1$macrocall$4"]},{name:"circle$subexpression$1",symbols:["circle_body"]},{name:"circle",symbols:["circle$subexpression$1"],postprocess:o}],ParserStart:"number"};t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const s=r(0);var n;t.lexer=(0,s.compile)({comma:",",space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,lcurl:"{",rcurl:"}",lparen:"(",rparen:")",lbracket:"[",rbracket:"]",lcomp:"<",rcomp:">"}),t.lexer.next=(n=t.lexer.next,()=>{let e;for(;(e=n.call(t.lexer))&&"space"===e.type;);return e}),t.lexerAny=t.lexer},function(e,t,r){"use strict";function s(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0});const n=r(16),a={Lexer:n.lexerAny,ParserRules:[{name:"main$ebnf$1",symbols:["elt"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","elt"],postprocess:e=>e[0].concat([e[1]])},{name:"main",symbols:["main$ebnf$1"],postprocess:([e])=>{const t=new Set;for(const r of e){const e="number"==typeof r[1]?r[0]:"time";if(t.has(e))return"invalid";t.add(e)}return e}},{name:"elt",symbols:["time"]},{name:"elt",symbols:["num","unit"],postprocess:([[e],t])=>[t=t[0].type,e]},{name:"unit",symbols:[n.lexerAny.has("years")?{type:"years"}:years]},{name:"unit",symbols:[n.lexerAny.has("months")?{type:"months"}:months]},{name:"unit",symbols:[n.lexerAny.has("days")?{type:"days"}:days]},{name:"unit",symbols:[n.lexerAny.has("hours")?{type:"hours"}:hours]},{name:"unit",symbols:[n.lexerAny.has("minutes")?{type:"minutes"}:minutes]},{name:"unit",symbols:[n.lexerAny.has("seconds")?{type:"seconds"}:seconds]},{name:"unit",symbols:[n.lexerAny.has("milliseconds")?{type:"milliseconds"}:milliseconds]},{name:"num",symbols:["int"]},{name:"num",symbols:["float"]},{name:"uint",symbols:[n.lexerAny.has("int")?{type:"int"}:int],postprocess:([e])=>parseInt(e,10)},{name:"int$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"int$ebnf$1",symbols:["int$ebnf$1$subexpression$1"],postprocess:s},{name:"int$ebnf$1",symbols:[],postprocess:()=>null},{name:"int",symbols:["int$ebnf$1",n.lexerAny.has("int")?{type:"int"}:int],postprocess:([e,t])=>parseInt(t,10)*(e?-1:1)},{name:"float$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("neg")?{type:"neg"}:neg]},{name:"float$ebnf$1",symbols:["float$ebnf$1$subexpression$1"],postprocess:s},{name:"float$ebnf$1",symbols:[],postprocess:()=>null},{name:"float$ebnf$2",symbols:[n.lexerAny.has("int")?{type:"int"}:int],postprocess:s},{name:"float$ebnf$2",symbols:[],postprocess:()=>null},{name:"float",symbols:["float$ebnf$1","float$ebnf$2",n.lexerAny.has("dot")?{type:"dot"}:dot,n.lexerAny.has("int")?{type:"int"}:int],postprocess:([e,...t])=>parseFloat(t.map(e=>e?e.text:"0").join(""))*(e?-1:1)},{name:"time$ebnf$1$subexpression$1",symbols:[n.lexerAny.has("colon")?{type:"colon"}:colon,"uint"]},{name:"time$ebnf$1",symbols:["time$ebnf$1$subexpression$1"],postprocess:s},{name:"time$ebnf$1",symbols:[],postprocess:()=>null},{name:"time$ebnf$2$subexpression$1",symbols:[n.lexerAny.has("dot")?{type:"dot"}:dot,n.lexerAny.has("int")?{type:"int"}:int]},{name:"time$ebnf$2",symbols:["time$ebnf$2$subexpression$1"],postprocess:s},{name:"time$ebnf$2",symbols:[],postprocess:()=>null},{name:"time",symbols:["uint",n.lexerAny.has("colon")?{type:"colon"}:colon,"uint","time$ebnf$1","time$ebnf$2"],postprocess:([e,t,r,s,n])=>{const a="number"==typeof(s=s&&s[1])?[["hours",e],["minutes",r],["seconds",s]]:[["minutes",e],["seconds",r]];return(n=n&&n[1])&&a.push(["milliseconds",1e3*parseFloat("0."+n)]),a}}],ParserStart:"main"};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const s=r(0);var n;t.lexer=(0,s.compile)({int:/\d+/,neg:"-",dot:".",years:/(?:y|yrs?|years?)\b/,months:/(?:mon(?:th)?s?)\b/,days:/(?:d|days?)\b/,hours:/(?:h|hrs?|hours?)\b/,minutes:/(?:m|mins?|minutes?)\b/,seconds:/(?:s|secs?|seconds?)\b/,milliseconds:/(?:ms|milliseconds?)\b/,space:{match:/[\s\t\n\v\f\r]+/,lineBreaks:!0},colon:":"}),t.lexer.next=(n=t.lexer.next,()=>{let e;for(;(e=n.call(t.lexer))&&"space"===e.type;);return e}),t.lexerAny=t.lexer},function(e,t,r){"use strict";function s(e){return e[0]}Object.defineProperty(t,"__esModule",{value:!0});const n=r(18),a={Lexer:n.lexerAny,ParserRules:[{name:"num",symbols:[n.lexerAny.has("int")?{type:"int"}:int]},{name:"num",symbols:[n.lexerAny.has("float")?{type:"float"}:float]},{name:"main$ebnf$1",symbols:[]},{name:"main$ebnf$1",symbols:["main$ebnf$1","long"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["short"]},{name:"main$ebnf$2$subexpression$1$ebnf$1",symbols:["main$ebnf$2$subexpression$1$ebnf$1","short"],postprocess:e=>e[0].concat([e[1]])},{name:"main$ebnf$2$subexpression$1",symbols:[n.lexerAny.has("T")?{type:"T"}:T,"main$ebnf$2$subexpression$1$ebnf$1"]},{name:"main$ebnf$2",symbols:["main$ebnf$2$subexpression$1"],postprocess:s},{name:"main$ebnf$2",symbols:[],postprocess:()=>null},{name:"main",symbols:[n.lexerAny.has("P")?{type:"P"}:P,"main$ebnf$1","main$ebnf$2"],postprocess:([e,t,r],s)=>(r=r?r[1]:[],t.length||r.length?t.length?r.length?[...t,...r]:t:r:s)},{name:"long$subexpression$1",symbols:[n.lexerAny.has("Y")?{type:"Y"}:Y]},{name:"long$subexpression$1",symbols:[n.lexerAny.has("M")?{type:"M"}:M]},{name:"long$subexpression$1",symbols:[n.lexerAny.has("W")?{type:"W"}:W]},{name:"long$subexpression$1",symbols:[n.lexerAny.has("D")?{type:"D"}:D]},{name:"long",symbols:["num","long$subexpression$1"],postprocess:([e,t])=>{switch(e=parseFloat(e[0].value),t=t[0].type){case"Y":return["years",e];case"M":return["months",e];case"W":return["days",7*e];case"D":return["days",e];default:throw new Error("Unexpected unit "+t)}}},{name:"short$ebnf$1",symbols:[n.lexerAny.has("T")?{type:"T"}:T],postprocess:s},{name:"short$ebnf$1",symbols:[],postprocess:()=>null},{name:"short$subexpression$1",symbols:[n.lexerAny.has("H")?{type:"H"}:H]},{name:"short$subexpression$1",symbols:[n.lexerAny.has("M")?{type:"M"}:M]},{name:"short$subexpression$1",symbols:[n.lexerAny.has("S")?{type:"S"}:S]},{name:"short",symbols:["short$ebnf$1","num","short$subexpression$1"],postprocess:([e,t,r])=>{switch(t=parseFloat(t[0].value),r=r[0].type){case"H":return["hours",t];case"M":return["minutes",t];case"S":return["seconds",t];default:throw new Error("Unexpected unit "+r)}}}],ParserStart:"num"};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lexerAny=t.lexer=void 0;const s=r(0);t.lexer=(0,s.compile)({int:/\-?\d+(?![\.\d])/,float:/\-?(?:(?:\d*\.\d+)|(?:\d+\.\d*))/,P:"P",Y:"Y",M:"M",W:"W",D:"D",H:"H",S:"S",T:"T"}),t.lexerAny=t.lexer},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toSql=void 0;const s=r(2),n=r(5),a=r(6),o=r(20),l=r(3),i=new Set(l.sqlKeywords.map(e=>e.toLowerCase()));let c=[];function p(e){return u(e.name)}function u(e,t){if(!t){const t=e.toLowerCase();if(t===e&&!i.has(t)&&/^[a-z][a-z0-9_]*$/.test(t))return e}return'"'+e+'"'}function m(e,t,r){r&&c.push("(");let s=!0;for(const r of e)s||c.push(", "),s=!1,t(r);r&&c.push(")")}function y(e,t){switch(e.type){case"foreign key":c.push(" foreign key (",...e.localColumns.map(p).join(", "),")");case"reference":c.push(" REFERENCES "),t.tableRef(e.foreignTable),c.push("(",...e.foreignColumns.map(p).join(", "),") "),e.match&&c.push(" MATCH ",e.match.toUpperCase()),e.onDelete&&c.push(" ON DELETE ",e.onDelete),e.onUpdate&&c.push(" ON UPDATE ",e.onUpdate);break;case"primary key":case"unique":c.push(" ",e.type," "),"columns"in e&&c.push("(",...e.columns.map(p).join(", "),") ");break;case"check":c.push(" check "),t.expr(e.expr);break;case"not null":case"null":c.push(" ",e.type," ");break;case"default":c.push(" default "),t.expr(e.default);break;case"add generated":c.push(" GENERATED "),$(t,e);break;default:throw a.NotSupported.never(e)}c.push(" ")}function b(e,t){e.schema&&c.push(u(e.schema),"."),c.push(u(e.name,t)," ")}function _(e){b(e),e.alias&&c.push(" AS ",u(e.alias)," ")}function f(e,t){c.push(" ORDER BY "),m(t,t=>{e.expr(t.by),t.order&&c.push(" ",t.order," "),t.nulls&&c.push(" NULLS ",t.nulls," ")},!1)}function $(e,t){t.always&&c.push(t.always.toUpperCase()," "),c.push("AS IDENTITY "),t.sequence&&(c.push("("),t.sequence.name&&(c.push("SEQUENCE NAME "),b(t.sequence.name),c.push(" ")),d(e,t.sequence),c.push(") "))}function d(e,t){t.as&&(c.push("AS "),e.dataType(t.as),c.push(" ")),"number"==typeof t.incrementBy&&c.push("INCREMENT BY ",t.incrementBy.toString()," "),"no minvalue"===t.minValue&&c.push("NO MINVALUE "),"number"==typeof t.minValue&&c.push("MINVALUE ",t.minValue.toString()," "),"no maxvalue"===t.maxValue&&c.push("NO MAXVALUE "),"number"==typeof t.maxValue&&c.push("MAXVALUE ",t.maxValue.toString()," "),"number"==typeof t.startWith&&c.push("START WITH ",t.startWith.toString()," "),"number"==typeof t.cache&&c.push("CACHE ",t.cache.toString()," "),t.cycle&&c.push(t.cycle," "),"none"===t.ownedBy?c.push("OWNED BY NONE "):t.ownedBy&&(c.push("OWNED BY "),h(t.ownedBy)),"restart"in t&&(!0===t.restart?c.push("RESTART "):t.restart&&c.push("RESTART WITH ",t.restart.toString()," "))}function h(e){e.schema&&c.push(u(e.schema),"."),c.push(u(e.table),".",u(e.column)," ")}function x(e,t,r){t?(c.push(t.type," "),r(),t.on&&(c.push("ON "),e.expr(t.on)),t.using&&(c.push("USING ("),m(t.using,e=>c.push(p(e)),!1),c.push(") ")),c.push(" ")):r()}function w(e){e.opSchema?c.push(" operator(",u(e.opSchema),".",e.op,") "):c.push(" ",e.op," ")}const v=(0,n.astVisitor)(e=>({addColumn:(...t)=>{c.push(" ADD COLUMN "),t[0].ifNotExists&&c.push("IF NOT EXISTS "),e.super().addColumn(...t)},createExtension:e=>{c.push("CREATE EXTENSION "),e.ifNotExists&&c.push(" IF NOT EXISTS "),c.push(p(e.extension)),(e.from||e.version||e.schema)&&(c.push(" WITH"),e.schema&&c.push(" SCHEMA ",p(e.schema)),e.version&&c.push(" VERSION ",(0,o.literal)(e.version.value)),e.from&&c.push(" FROM ",(0,o.literal)(e.from.value)))},tablespace:e=>{c.push("TABLESPACE ",p(e.tablespace))},addConstraint:t=>{c.push(" ADD ");const r=t.constraint.constraintName;r&&c.push(" CONSTRAINT ",p(r)," "),y(t.constraint,e)},alterColumn:(t,r)=>{c.push(" ALTER COLUMN ",p(t.column)," "),e.super().alterColumn(t,r)},setColumnDefault:(t,r,s)=>{if(c.push(" SET DEFAULT "),e.expr(t.default),t.updateExisting)throw new Error("Not implemented: updateExisting on set column default")},createEnum:e=>{c.push("CREATE TYPE "),b(e.name),c.push(" AS ENUM "),m(e.values,e=>c.push((0,o.literal)(e.value)),!0),c.push(" ")},createCompositeType:t=>{c.push("CREATE TYPE "),b(t.name),c.push(" AS "),m(t.attributes,t=>{c.push(p(t.name)," "),e.dataType(t.dataType),t.collate&&(c.push("COLLATE "),b(t.collate))},!0),c.push(" ")},setTableOwner:e=>{c.push(" OWNER TO ",p(e.to))},alterColumnSimple:e=>c.push(e.type),alterColumnAddGenerated:t=>{c.push(" ADD GENERATED "),$(e,t)},setColumnType:t=>{c.push(" SET DATA TYPE "),e.dataType(t.dataType),c.push(" ")},alterTable:t=>{c.push("ALTER TABLE "),t.ifExists&&c.push(" IF EXISTS "),t.only&&c.push(" ONLY "),_(t.table),m(t.changes,r=>e.tableAlteration(r,t.table),!1)},alterIndex:e=>{switch(c.push("ALTER INDEX "),e.ifExists&&c.push(" IF EXISTS "),_(e.index),e.change.type){case"rename":c.push(" RENAME TO "),b(e.change.to),c.push(" ");break;case"set tablespace":c.push(" SET TABLESPACE "),b(e.change.tablespace),c.push(" ");break;default:throw a.NotSupported.never(e.change,"Alter index type not supported: ")}},tableAlteration:(t,r)=>{switch(t.type){case"add column":return e.addColumn(t,r);case"add constraint":return e.addConstraint(t,r);case"alter column":return e.alterColumn(t,r);case"rename":return e.renameTable(t,r);case"rename column":return e.renameColumn(t,r);case"rename constraint":return e.renameConstraint(t,r);case"drop column":return e.dropColumn(t,r);case"drop constraint":return e.dropConstraint(t,r);case"owner":return e.setTableOwner(t,r);default:throw a.NotSupported.never(t)}},array:t=>{c.push("array"===t.type?"ARRAY[":"("),m(t.expressions,t=>e.expr(t),!1),c.push("array"===t.type?"]":")")},arrayIndex:t=>{e.expr(t.array),c.push("["),e.expr(t.index),c.push("] ")},expr:t=>{"ref"!==t.type?"list"!==t.type?(c.push("("),e.super().expr(t),c.push(")")):e.super().expr(t):e.ref(t)},callOverlay:t=>{c.push("OVERLAY("),e.expr(t.value),c.push(" PLACING "),e.expr(t.placing),c.push(" FROM "),e.expr(t.from),t.for&&(c.push(" FOR "),e.expr(t.for)),c.push(")")},callSubstring:t=>{c.push("SUBSTRING("),e.expr(t.value),t.from&&(c.push(" FROM "),e.expr(t.from)),t.for&&(c.push(" FOR "),e.expr(t.for)),c.push(")")},binary:t=>{e.expr(t.left),w(t),e.expr(t.right)},call:t=>{b(t.function),c.push("("),t.distinct&&c.push(t.distinct," "),m(t.args,t=>e.expr(t),!1),t.orderBy&&f(e,t.orderBy),c.push(") "),t.filter&&(c.push("filter (where "),e.expr(t.filter),c.push(") ")),t.over&&(c.push("over ("),t.over.partitionBy&&(c.push("PARTITION BY "),m(t.over.partitionBy,t=>e.expr(t),!1),c.push(" ")),t.over.orderBy&&(f(e,t.over.orderBy),c.push(" ")),c.push(") "))},case:t=>{c.push("CASE "),t.value&&e.expr(t.value);for(const r of t.whens)c.push(" WHEN "),e.expr(r.when),c.push(" THEN "),e.expr(r.value);t.else&&(c.push(" ELSE "),e.expr(t.else)),c.push(" END ")},cast:t=>{e.expr(t.operand),c.push("::"),e.dataType(t.to)},constant:e=>{switch(e.type){case"boolean":c.push(e.value?"true":"false");break;case"integer":c.push(e.value.toString(10));break;case"numeric":c.push(e.value.toString()),Number.isInteger(e.value)&&c.push(".");break;case"null":c.push("null");break;case"constant":break;case"string":c.push((0,o.literal)(e.value));break;default:throw a.NotSupported.never(e)}},valueKeyword:e=>{c.push(e.keyword," ")},comment:e=>{switch(c.push("COMMENT ON ",e.on.type.toUpperCase()," "),e.on.type){case"column":h(e.on.column);break;default:b(e.on.name)}c.push(" IS ",(0,o.literal)(e.comment)," ")},extract:t=>{c.push("EXTRACT (",t.field.name.toUpperCase()," FROM "),e.expr(t.from),c.push(") ")},createColumn:t=>{var r;c.push(p(t.name)," "),e.dataType(t.dataType),c.push(" "),t.collate&&(c.push("COLLATE "),b(t.collate));for(const s of null!==(r=t.constraints)&&void 0!==r?r:[])e.constraint(s)},begin:e=>{c.push("BEGIN "),e.isolationLevel&&c.push("ISOLATION LEVEL ",e.isolationLevel.toUpperCase()," "),e.writeable&&c.push(e.writeable.toUpperCase()," "),"boolean"==typeof e.deferrable&&(e.deferrable||c.push("NOT "),c.push("DEFERRABLE "))},alterSequence:t=>{switch(c.push("ALTER SEQUENCE "),t.ifExists&&c.push("IF EXISTS "),b(t.name),t.change.type){case"set options":d(e,t.change);break;case"rename":c.push("RENAME TO ",p(t.change.newName)," ");break;case"set schema":c.push("SET SCHEMA ",p(t.change.newSchema)," ");break;case"owner to":t.change.owner;c.push("OWNER TO ",p(t.change.owner)," ");break;default:throw a.NotSupported.never(t.change)}},createSequence:t=>{c.push("CREATE "),t.temp&&c.push("TEMPORARY "),c.push("SEQUENCE "),t.ifNotExists&&c.push("IF NOT EXISTS "),b(t.name),d(e,t.options)},drop:t=>{c.push(t.type.toUpperCase()," "),t.concurrently&&c.push("CONCURRENTLY "),t.ifExists&&c.push("IF EXISTS "),m(t.names,t=>e.tableRef(t),!1),t.cascade&&c.push(t.cascade.toUpperCase()," ")},constraint:t=>{t.constraintName&&c.push(" CONSTRAINT ",p(t.constraintName)," "),y(t,e)},do:e=>{c.push("DO"),e.language&&c.push(" LANGUAGE ",e.language.name),c.push(" $$",e.code,"$$")},createFunction:t=>{var r;if(c.push(t.orReplace?"CREATE OR REPLACE FUNCTION ":"CREATE FUNCTION "),b(t.name),m(t.arguments,t=>{t.mode&&c.push(t.mode," "),t.name&&c.push(p(t.name)," "),e.dataType(t.type),t.default&&(c.push(" = "),e.expr(t.default))},!0),t.returns)switch(t.returns.kind){case"table":c.push(" RETURNS TABLE "),m(t.returns.columns,t=>{c.push(p(t.name)," "),e.dataType(t.type)},!0);break;case void 0:case null:case"array":c.push(" RETURNS "),e.dataType(t.returns);break;default:throw a.NotSupported.never(t.returns)}switch(c.push(" AS $$",null!==(r=t.code)&&void 0!==r?r:"","$$"),t.language&&c.push("LANGUAGE ",t.language.name," "),t.purity&&c.push(t.purity.toUpperCase()," "),"boolean"==typeof t.leakproof&&c.push(t.leakproof?"LEAKPROOF ":"NOT LEAKPROOF "),t.onNullInput){case"call":c.push("CALLED ON NULL INPUT ");break;case"null":c.push("RETURNS NULL ON NULL INPUT ");break;case"strict":c.push("STRICT ");break;case null:case void 0:break;default:throw a.NotSupported.never(t.onNullInput)}},dropFunction:t=>{c.push("DROP FUNCTION "),t.ifExists&&c.push("IF EXISTS "),b(t.name),t.arguments&&m(t.arguments,t=>{t.name&&(b(t.name),c.push(" ")),e.dataType(t.type)},!0),c.push(" ")},with:t=>{c.push("WITH "),m(t.bind,t=>{c.push(p(t.alias)," AS ("),e.statement(t.statement),c.push(") ")},!1),e.statement(t.in)},withRecursive:t=>{c.push("WITH RECURSIVE ",p(t.alias),"(",...t.columnNames.map(p).join(", "),") AS ("),e.union(t.bind),c.push(") "),e.statement(t.in)},setGlobal:e=>{c.push("SET ",p(e.variable)," = "),function e(t){switch(t.type){case"default":c.push("DEFAULT ");break;case"identifier":c.push(t.name);break;case"list":let r=!0;for(const s of t.values)r||c.push(", "),r=!1,e(s);break;case"value":c.push("number"==typeof t.value?t.value.toString():(0,o.literal)(t.value));break;default:throw a.NotSupported.never(t)}}(e.set)},setTimezone:e=>{switch(c.push("SET TIME ZONE "),e.to.type){case"default":case"local":c.push(e.to.type.toUpperCase()," ");break;case"value":c.push("string"==typeof e.to.value?(0,o.literal)(e.to.value):e.to.value.toString(10));break;case"interval":c.push("INTERVAL ",(0,o.literal)(e.to.value)," HOUR TO MINUTE");break;default:throw a.NotSupported.never(e.to)}},dataType:t=>{var r,s;if("array"===(null==t?void 0:t.kind))return e.dataType(t.arrayOf),void c.push("[]");if(!(null==t?void 0:t.name))return void c.push("unkown");let n=!0;if(t.schema)b(t,t.doubleQuoted);else if(t.doubleQuoted)b(t,!0);else switch(t.name){case"double precision":case"character varying":case"bit varying":c.push(t.name," ");break;case"time without time zone":case"timestamp without time zone":case"time with time zone":case"timestamp with time zone":const e=t.name.split(" ");c.push(e.shift()),(null===(r=t.config)||void 0===r?void 0:r.length)&&m(t.config,e=>c.push(e.toString(10)),!0),c.push(" "),c.push(e.join(" ")," "),n=!1;break;default:b(t)}n&&(null===(s=t.config)||void 0===s?void 0:s.length)&&m(t.config,e=>c.push(e.toString(10)),!0)},createIndex:t=>{c.push(t.unique?"CREATE UNIQUE INDEX ":"CREATE INDEX "),t.ifNotExists&&c.push(" IF NOT EXISTS "),t.indexName&&c.push(p(t.indexName)," "),c.push("ON "),e.tableRef(t.table),t.using&&c.push("USING ",p(t.using)," "),m(t.expressions,t=>{e.expr(t.expression),c.push(" "),t.collate&&(c.push("COLLATE "),b(t.collate)),t.opclass&&b(t.opclass),t.order&&c.push(t.order," "),t.nulls&&c.push("nulls ",t.nulls," ")},!0),t.with&&(c.push("WITH "),m(t.with,e=>{c.push(e.parameter," = ",(0,o.literal)(e.value))},!0)),t.tablespace&&c.push("TABLESPACE ",u(t.tablespace)),t.where&&(c.push(" WHERE "),e.expr(t.where)),c.push(" ")},createTable:t=>{var r;c.push("CREATE "),t.locality&&c.push(t.locality.toUpperCase()," "),t.temporary&&c.push("TEMPORARY "),t.unlogged&&c.push("UNLOGGED "),c.push(t.ifNotExists?"TABLE IF NOT EXISTS ":"TABLE "),e.tableRef(t.name),c.push("("),m(t.columns,t=>{switch(t.kind){case"column":return e.createColumn(t);case"like table":return e.likeTable(t);default:throw a.NotSupported.never(t)}},!1),t.constraints&&(c.push(", "),m(t.constraints,t=>{const r=t.constraintName;r&&c.push("CONSTRAINT ",p(r)," "),y(t,e)},!1)),c.push(") "),(null===(r=t.inherits)||void 0===r?void 0:r.length)&&(c.push(" INHERITS "),m(t.inherits,e=>b(e),!0))},likeTable:t=>{c.push(" LIKE "),e.tableRef(t.like),c.push(" ");for(const{verb:e,option:r}of t.options)c.push(e.toUpperCase()," ",r.toUpperCase()," ")},createSchema:e=>{c.push(e.ifNotExists?"CREATE SCHEMA IF NOT EXISTS ":"CREATE SCHEMA "),c.push(p(e.name))},truncateTable:t=>{c.push("TRUNCATE TABLE ");let r=!0;for(const s of t.tables)r||c.push(", "),r=!1,e.tableRef(s);if(t.identity)switch(t.identity){case"restart":c.push(" RESTART IDENTITY ");break;case"continue":c.push(" CONTINUE IDENTITY ")}t.cascade&&c.push(" ",t.cascade," ")},delete:t=>{c.push("DELETE FROM "),e.tableRef(t.from),t.where&&(c.push(" WHERE "),e.expr(t.where)),t.returning&&(c.push(" RETURNING "),m(t.returning,t=>e.selectionColumn(t),!1)),c.push(" ")},dropColumn:e=>{c.push(" DROP COLUMN "),e.ifExists&&c.push(" IF EXISTS "),c.push(p(e.column)),e.behaviour&&c.push(" ",e.behaviour),c.push(" ")},dropConstraint:e=>{c.push(" DROP CONSTRAINT "),e.ifExists&&c.push(" IF EXISTS "),c.push(p(e.constraint)),e.behaviour&&c.push(" ",e.behaviour.toUpperCase()," ")},from:t=>e.super().from(t),fromCall:t=>{x(e,t.join,()=>{var r,s;if(e.call(t),t.withOrdinality&&c.push(" WITH ORDINALITY"),t.alias){c.push(" AS ",p(t.alias)," ");const e=null!==(s=null===(r=t.alias.columns)||void 0===r?void 0:r.length)&&void 0!==s?s:0;if(e>0){c.push("(");for(let r=0;r<e;++r)0!==r&&c.push(", "),c.push(p(t.alias.columns[r]));c.push(")")}}}),c.push(" ")},fromStatement:t=>{x(e,t.join,()=>{c.push("("),e.select(t.statement),c.push(") "),t.alias&&(c.push(" AS ",u(t.alias)),t.columnNames&&m(t.columnNames,e=>c.push(p(e)),!0),c.push(" "))}),c.push(" ")},values:t=>{c.push("VALUES "),m(t.values,t=>{m(t,t=>{e.expr(t)},!0)},!1)},fromTable:t=>{x(e,t.join,()=>{if(e.tableRef(t.name),t.name.columnNames){if(!t.name.alias)throw new Error("Cannot specify aliased column names without an alias");m(t.name.columnNames,e=>c.push(p(e)),!0)}})},join:e=>{throw new Error("Should not happen 💀")},insert:t=>{if(c.push("INSERT INTO "),e.tableRef(t.into),t.columns&&c.push("(",t.columns.map(p).join(", "),")"),c.push(" "),t.overriding&&c.push("OVERRIDING ",t.overriding.toUpperCase()," VALUE "),e.select(t.insert),c.push(" "),t.onConflict){c.push("ON CONFLICT ");const r=t.onConflict.on;switch(null==r?void 0:r.type){case"on expr":m(r.exprs,t=>e.expr(t),!0);break;case"on constraint":c.push("ON CONSTRAINT "),b(r.constraint);case null:case void 0:break;default:throw a.NotSupported.never(r)}"do nothing"===t.onConflict.do?c.push(" DO NOTHING"):(c.push(" DO UPDATE SET "),m(t.onConflict.do.sets,t=>e.set(t),!1),t.onConflict.where&&(c.push(" WHERE "),e.expr(t.onConflict.where))),c.push(" ")}t.returning&&(c.push(" RETURNING "),m(t.returning,t=>e.selectionColumn(t),!1))},raise:t=>{var r,s;c.push("RAISE "),t.level&&c.push(t.level.toUpperCase()," "),c.push((0,o.literal)(t.format)," "),(null===(r=t.formatExprs)||void 0===r?void 0:r.length)&&(c.push(", "),m(t.formatExprs,t=>e.expr(t),!1)),(null===(s=t.using)||void 0===s?void 0:s.length)&&(c.push(" USING "),m(t.using,({type:t,value:r})=>{c.push(t.toUpperCase(),"="),e.expr(r)},!1)),c.push(" ")},default:()=>{c.push(" DEFAULT ")},member:t=>{e.expr(t.operand),c.push(t.op),c.push("number"==typeof t.member?t.member.toString(10):(0,o.literal)(t.member))},ref:e=>{e.table&&(b(e.table),c.push(".")),c.push("*"===e.name?"*":u(e.name))},parameter:e=>{c.push(e.name)},renameColumn:e=>{c.push(" RENAME COLUMN ",p(e.column)," TO ",p(e.to))},renameConstraint:e=>{c.push(" RENAME CONSTRAINT ",p(e.constraint)," TO ",p(e.to))},renameTable:e=>{c.push(" RENAME TO ",p(e.to))},createView:t=>{c.push("CREATE "),t.orReplace&&c.push("OR REPLACE "),t.temp&&c.push("TEMP "),t.recursive&&c.push("RECURSIVE "),c.push("VIEW "),e.tableRef(t.name),t.columnNames&&m(t.columnNames,e=>c.push(p(e)),!0);const r=t.parameters&&Object.entries(t.parameters);(null==r?void 0:r.length)&&(c.push(" WITH "),m(r,([e,t])=>c.push(e,"=",t),!1)),c.push(" AS "),e.select(t.query),t.checkOption&&c.push(" WITH ",t.checkOption.toUpperCase()," CHECK OPTION")},createMaterializedView:t=>{c.push("CREATE MATERIALIZED VIEW "),t.ifNotExists&&c.push("IF NOT EXISTS "),e.tableRef(t.name),t.columnNames&&m(t.columnNames,e=>c.push(p(e)),!0);const r=t.parameters&&Object.entries(t.parameters);(null==r?void 0:r.length)&&(c.push(" WITH "),m(r,([e,t])=>c.push(e,"=",t),!1)),t.tablespace&&c.push(" TABLESPACE ",p(t.tablespace)),c.push(" AS "),e.select(t.query),"boolean"==typeof t.withData&&c.push(t.withData?" WITH DATA":" WITH NO DATA")},refreshMaterializedView:t=>{c.push("REFRESH MATERIALIZED VIEW "),t.concurrently&&c.push("CONCURRENTLY "),e.tableRef(t.name),"boolean"==typeof t.withData&&c.push(t.withData?" WITH DATA":" WITH NO DATA")},select:t=>e.super().select(t),selection:t=>{if(c.push("SELECT "),t.distinct&&("string"==typeof t.distinct?c.push(t.distinct.toUpperCase()):(c.push(" DISTINCT ON "),m(t.distinct,t=>e.expr(t),!0)),c.push(" ")),t.columns&&m(t.columns,t=>e.selectionColumn(t),!1),c.push(" "),t.from){c.push("FROM ");const r=t.from.length;for(let s=0;s<r;s++){const r=t.from[s];s>0&&!r.join&&c.push(","),e.from(r)}c.push(" ")}t.where&&(c.push("WHERE "),e.expr(t.where),c.push(" ")),t.groupBy&&(c.push("GROUP BY "),m(t.groupBy,t=>e.expr(t),!1),c.push(" ")),t.orderBy&&(f(e,t.orderBy),c.push(" ")),t.limit&&(t.limit.offset&&(c.push("OFFSET "),e.expr(t.limit.offset)),t.limit.limit&&(c.push("LIMIT "),e.expr(t.limit.limit))),t.for&&c.push("FOR ",t.for.type.toUpperCase())},show:e=>{c.push("SHOW ",p(e.variable))},prepare:t=>{var r;c.push("PREPARE ",p(t.name)),(null===(r=t.args)||void 0===r?void 0:r.length)&&m(t.args,t=>e.dataType(t),!0),c.push(" AS "),e.statement(t.statement)},deallocate:e=>{c.push("DEALLOCATE "),"name"in e.target?c.push(e.target.name):c.push("ALL")},arraySelect:t=>{c.push("array("),e.select(t.select),c.push(")")},union:t=>{c.push("("),e.statement(t.left),c.push(") ",t.type.toUpperCase()," "),"union"===t.right.type||"union all"===t.right.type?e.union(t.right):(c.push("("),e.statement(t.right),c.push(")"))},selectionColumn:t=>{e.expr(t.expr),t.alias&&c.push(" AS ",p(t.alias)),c.push(" ")},set:t=>{c.push(p(t.column)," = "),e.expr(t.value),c.push(" ")},statement:t=>e.super().statement(t),tableRef:e=>{b(e),e.alias&&c.push(" AS ",u(e.alias)),c.push(" ")},ternary:t=>{e.expr(t.value),c.push(" ",t.op," "),e.expr(t.lo),c.push(" AND "),e.expr(t.hi),c.push(" ")},transaction:e=>{c.push(e.type)},unary:t=>{switch(t.op){case"+":case"-":w(t),e.expr(t.operand);break;case"NOT":c.push(t.op),c.push(" "),e.expr(t.operand);break;default:e.expr(t.operand),c.push(" "),c.push(t.op)}},update:t=>{c.push("UPDATE "),e.tableRef(t.table),c.push(" SET "),m(t.sets,t=>e.set(t),!1),c.push(" "),t.from&&(c.push("FROM "),e.from(t.from),c.push(" ")),t.where&&(c.push("WHERE "),e.expr(t.where),c.push(" ")),t.returning&&(c.push(" RETURNING "),m(t.returning,t=>e.selectionColumn(t),!1),c.push(" "))}}));t.toSql={};const k=s.AstDefaultMapper.prototype;for(const e of Object.getOwnPropertyNames(k)){const r=k[e];"constructor"!==e&&"super"!==e&&"function"==typeof r&&(t.toSql[e]=function(...t){try{return v[e].apply(v,t),c.join("").trim()}finally{c=[]}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.literal=void 0,t.literal=function e(t){return null==t?"NULL":Array.isArray(t)?"("+t.map(e).join(", ")+")":(~t.indexOf("\\")?"E":"")+"'"+(t=(t=t.replace(/'/g,"''")).replace(/\\/g,"\\\\"))+"'"}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locationOf=void 0,t.locationOf=function(e){const t=e._location;if(!t)throw new Error("This statement has not been parsed using location tracking (which has a small performance hit). ");return t}}]))},function(e,t,r){var s=r(48),n=r(55);e.exports=function(e,t){var r=n(e,t);return s(r)?r:void 0}},function(e,t,r){var s=r(9),n=r(6);e.exports=function(e){if(!n(e))return!1;var t=s(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,r){var s=r(24);e.exports=function(e,t,r){"__proto__"==t&&s?s(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){var s=r(17),n=r(34);e.exports=function(e){return null!=e&&n(e.length)&&!s(e)}},function(e,t){e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},function(e,t,r){var s=r(23),n=r(44),a=r(45);e.exports=function(e,t){return a(n(e,t,s),e+"")}},function(e,t){e.exports=function(e){return e}},function(e,t,r){var s=r(16),n=function(){try{var e=s(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=n},function(e,t,r){var s=r(7).Symbol;e.exports=s},function(e,t,r){(function(t){var r="object"==typeof t&&t&&t.Object===Object&&t;e.exports=r}).call(this,r(49))},function(e,t,r){var s=r(58),n=r(29),a=r(82),o=r(84),l=r(6),i=r(38),c=r(37);e.exports=function e(t,r,p,u,m){t!==r&&a(r,(function(a,i){if(m||(m=new s),l(a))o(t,r,i,p,e,u,m);else{var y=u?u(c(t,i),a,i+"",t,r,m):void 0;void 0===y&&(y=a),n(t,i,y)}}),i)}},function(e,t,r){var s=r(16)(r(7),"Map");e.exports=s},function(e,t,r){var s=r(18),n=r(12);e.exports=function(e,t,r){(void 0!==r&&!n(e[t],r)||void 0===r&&!(t in e))&&s(e,t,r)}},function(e,t,r){var s=r(92)(Object.getPrototypeOf,Object);e.exports=s},function(e,t){var r=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,r){var s=r(93),n=r(8),a=Object.prototype,o=a.hasOwnProperty,l=a.propertyIsEnumerable,i=s(function(){return arguments}())?s:function(e){return n(e)&&o.call(e,"callee")&&!l.call(e,"callee")};e.exports=i},function(e,t){var r=Array.isArray;e.exports=r},function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,r){(function(e){var s=r(7),n=r(95),a=t&&!t.nodeType&&t,o=a&&"object"==typeof e&&e&&!e.nodeType&&e,l=o&&o.exports===a?s.Buffer:void 0,i=(l?l.isBuffer:void 0)||n;e.exports=i}).call(this,r(19)(e))},function(e,t,r){var s=r(97),n=r(98),a=r(99),o=a&&a.isTypedArray,l=o?n(o):s;e.exports=l},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,r){var s=r(103),n=r(105),a=r(20);e.exports=function(e){return a(e)?s(e,!0):n(e)}},function(e,t){var r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var s=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==s||"symbol"!=s&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,r){var s,n=function(){var e=function(e,t,r,s){for(r=r||{},s=e.length;s--;r[e[s]]=t);return r},t=[1,8],r=[1,4],s=[2,4],n=[1,11],a=[1,10],o=[2,16],l=[1,14],i=[1,15],c=[1,16],p=[6,8],u=[2,145],m=[1,19],y=[1,20],b=[16,33,35,36,37,38,39,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],_=[16,18,32,33,35,36,37,38,39,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],f=[2,159],$=[1,29],d=[6,8,14,17,145,149,151,153],h=[1,42],x=[1,59],w=[1,51],v=[1,58],k=[1,60],g=[1,61],E=[1,62],A=[1,63],O=[1,64],S=[1,57],T=[1,52],C=[1,53],L=[1,54],N=[1,55],I=[1,56],j=[1,43],R=[1,44],q=[1,45],F=[1,34],P=[16,35,36,37,38,39,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],B=[6,8,14,17,149,151,153],U=[2,142],D=[1,73],M=[1,74],G=[6,8,14,17,43,132,137,143,145,149,151,153],H=[1,79],z=[1,76],W=[1,77],K=[1,78],Q=[1,80],V=[6,8,14,17,36,43,49,50,51,70,71,73,76,88,106,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],Y=[6,8,14,17,34,36,43,49,50,51,70,71,73,76,88,106,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],J=[1,101],X=[1,99],Z=[1,100],ee=[1,95],te=[1,96],re=[1,97],se=[1,98],ne=[1,102],ae=[1,103],oe=[1,104],le=[1,105],ie=[1,106],ce=[1,107],pe=[2,102],ue=[6,8,14,17,34,36,43,45,49,50,51,70,71,73,76,78,80,88,90,91,92,93,94,95,96,97,98,100,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],me=[6,8,14,17,34,36,43,45,49,50,51,70,71,73,76,78,80,88,90,91,92,93,94,95,96,97,98,100,102,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],ye=[1,108],be=[1,115],_e=[2,63],fe=[1,116],$e=[16,35,37,38,39,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],de=[16,29,35,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,118],he=[1,162],xe=[17,43],we=[2,58],ve=[1,171],ke=[1,169],ge=[1,170],Ee=[6,8,137,145],Ae=[16,35,38,39,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],Oe=[6,8,14,17,137,143,145,149,151,153],Se=[6,8,14,17,36,43,49,50,51,70,71,73,76,88,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],Te=[6,8,14,17,34,36,43,49,50,51,70,71,73,76,88,90,91,92,93,98,100,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],Ce=[6,8,14,17,34,36,43,49,50,51,70,71,73,76,78,80,88,90,91,92,93,98,100,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],Le=[16,35,39,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],Ne=[16,35,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],Ie=[16,35,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],je=[70,73,76],Re=[16,35,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],qe=[1,231],Fe=[1,232],Pe=[6,8,14,17],Be=[6,8,14,17,43,156],Ue=[1,249],De=[1,245],Me=[2,196],Ge=[1,253],He=[1,254],ze=[6,8,14,17,43,128,134,137,143,145,149,151,153,181],We=[1,256],Ke=[1,259],Qe=[1,260],Ve=[1,261],Ye=[1,262],Je=[2,173],Xe=[1,258],Ze=[6,8,14,17,36,43,88,128,134,137,143,145,149,151,153,163,164,166,167,172,176,178,179,181],et=[6,8,14,17,134,137,143,145,149,151,153],tt=[1,274],rt=[2,178],st=[169,172],nt=[6,8,14,17,36,43,88,128,134,137,143,145,149,151,153,163,164,166,167,172,176,178,179,181,191,192,193],at=[2,198],ot=[1,279],lt=[1,291],it=[1,299],ct=[1,300],pt=[1,301],ut=[6,8,14,17,137,145,149,151,153],mt=[1,311],yt=[1,317],bt=[1,318],_t=[2,203],ft=[1,329],$t=[16,151],dt=[6,8,14,17,151,153],ht=[1,345],xt={trace:function(){},yy:{},symbols_:{error:2,main:3,selectClause:4,semicolonOpt:5,EOF:6,unionClause:7,";":8,unionClauseNotParenthesized:9,unionClauseParenthesized:10,order_by_opt:11,limit_opt:12,selectClauseParenthesized:13,UNION:14,distinctOpt:15,"(":16,")":17,SELECT:18,highPriorityOpt:19,maxStateMentTimeOpt:20,straightJoinOpt:21,sqlSmallResultOpt:22,sqlBigResultOpt:23,sqlBufferResultOpt:24,sqlCacheOpt:25,sqlCalcFoundRowsOpt:26,selectExprList:27,selectDataSetOpt:28,ALL:29,DISTINCT:30,DISTINCTROW:31,HIGH_PRIORITY:32,MAX_STATEMENT_TIME:33,"=":34,NUMERIC:35,STRAIGHT_JOIN:36,SQL_SMALL_RESULT:37,SQL_BIG_RESULT:38,SQL_BUFFER_RESULT:39,SQL_CACHE:40,SQL_NO_CACHE:41,SQL_CALC_FOUND_ROWS:42,",":43,selectExpr:44,"*":45,SELECT_EXPR_STAR:46,expr:47,selectExprAliasOpt:48,AS:49,IDENTIFIER:50,STRING:51,string:52,number:53,EXPONENT_NUMERIC:54,HEX_NUMERIC:55,boolean:56,TRUE:57,FALSE:58,null:59,NULL:60,literal:61,function_call:62,function_call_param_list:63,function_call_param:64,identifier:65,DOT:66,identifier_list:67,case_expr_opt:68,when_then_list:69,WHEN:70,THEN:71,case_when_else:72,ELSE:73,case_when:74,CASE:75,END:76,simple_expr_prefix:77,"+":78,simple_expr:79,"-":80,"~":81,"!":82,BINARY:83,expr_list:84,ROW:85,EXISTS:86,"{":87,"}":88,bit_expr:89,"|":90,"&":91,"<<":92,">>":93,"/":94,DIV:95,MOD:96,"%":97,"^":98,not_opt:99,NOT:100,escape_opt:101,ESCAPE:102,predicate:103,IN:104,BETWEEN:105,AND:106,SOUNDS:107,LIKE:108,REGEXP:109,comparison_operator:110,">=":111,">":112,"<=":113,"<":114,"<>":115,"!=":116,sub_query_data_set_opt:117,ANY:118,boolean_primary:119,IS:120,boolean_extra:121,UNKNOWN:122,"&&":123,"||":124,OR:125,XOR:126,where_opt:127,WHERE:128,group_by_opt:129,group_by:130,roll_up_opt:131,WITH:132,ROLLUP:133,GROUP_BY:134,group_by_order_by_item_list:135,order_by:136,ORDER_BY:137,group_by_order_by_item:138,sort_opt:139,ASC:140,DESC:141,having_opt:142,HAVING:143,limit:144,LIMIT:145,OFFSET:146,procedure_opt:147,procedure:148,PROCEDURE:149,for_update_lock_in_share_mode_opt:150,FOR:151,UPDATE:152,LOCK:153,SHARE:154,MODE:155,FROM:156,table_references:157,partitionOpt:158,escaped_table_reference:159,table_reference:160,OJ:161,join_inner_cross:162,INNER:163,CROSS:164,left_right:165,LEFT:166,RIGHT:167,out_opt:168,OUTER:169,left_right_out_opt:170,join_table:171,JOIN:172,table_factor:173,join_condition:174,on_join_condition:175,NATURAL:176,join_condition_opt:177,ON:178,USING:179,partition_names:180,PARTITION:181,aliasOpt:182,index_or_key:183,INDEX:184,KEY:185,for_opt:186,identifier_list_opt:187,index_hint_list_opt:188,index_hint_list:189,index_hint:190,USE:191,IGNORE:192,FORCE:193,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",8:";",14:"UNION",16:"(",17:")",18:"SELECT",29:"ALL",30:"DISTINCT",31:"DISTINCTROW",32:"HIGH_PRIORITY",33:"MAX_STATEMENT_TIME",34:"=",35:"NUMERIC",36:"STRAIGHT_JOIN",37:"SQL_SMALL_RESULT",38:"SQL_BIG_RESULT",39:"SQL_BUFFER_RESULT",40:"SQL_CACHE",41:"SQL_NO_CACHE",42:"SQL_CALC_FOUND_ROWS",43:",",45:"*",46:"SELECT_EXPR_STAR",49:"AS",50:"IDENTIFIER",51:"STRING",54:"EXPONENT_NUMERIC",55:"HEX_NUMERIC",57:"TRUE",58:"FALSE",60:"NULL",66:"DOT",70:"WHEN",71:"THEN",73:"ELSE",75:"CASE",76:"END",78:"+",80:"-",81:"~",82:"!",83:"BINARY",85:"ROW",86:"EXISTS",87:"{",88:"}",90:"|",91:"&",92:"<<",93:">>",94:"/",95:"DIV",96:"MOD",97:"%",98:"^",100:"NOT",102:"ESCAPE",104:"IN",105:"BETWEEN",106:"AND",107:"SOUNDS",108:"LIKE",109:"REGEXP",111:">=",112:">",113:"<=",114:"<",115:"<>",116:"!=",118:"ANY",120:"IS",122:"UNKNOWN",123:"&&",124:"||",125:"OR",126:"XOR",128:"WHERE",132:"WITH",133:"ROLLUP",134:"GROUP_BY",137:"ORDER_BY",140:"ASC",141:"DESC",143:"HAVING",145:"LIMIT",146:"OFFSET",149:"PROCEDURE",151:"FOR",152:"UPDATE",153:"LOCK",154:"SHARE",155:"MODE",156:"FROM",161:"OJ",163:"INNER",164:"CROSS",166:"LEFT",167:"RIGHT",169:"OUTER",172:"JOIN",176:"NATURAL",178:"ON",179:"USING",181:"PARTITION",184:"INDEX",185:"KEY",191:"USE",192:"IGNORE",193:"FORCE"},productions_:[0,[3,3],[3,3],[5,1],[5,0],[7,1],[7,3],[10,4],[10,4],[13,3],[9,4],[9,4],[4,12],[15,1],[15,1],[15,1],[15,0],[19,1],[19,0],[20,3],[20,0],[21,1],[21,0],[22,1],[22,0],[23,1],[23,0],[24,1],[24,0],[25,0],[25,1],[25,1],[26,1],[26,0],[27,3],[27,1],[44,1],[44,1],[44,2],[48,0],[48,2],[48,1],[48,2],[48,1],[52,1],[53,1],[53,1],[53,1],[56,1],[56,1],[59,1],[61,1],[61,1],[61,1],[61,1],[62,4],[63,3],[63,1],[64,0],[64,1],[64,1],[64,2],[64,1],[65,1],[65,3],[67,1],[67,3],[68,0],[68,1],[69,4],[69,5],[72,0],[72,2],[74,5],[77,2],[77,2],[77,2],[77,2],[77,2],[79,1],[79,1],[79,1],[79,1],[79,3],[79,4],[79,3],[79,4],[79,4],[79,1],[89,1],[89,3],[89,3],[89,3],[89,3],[89,3],[89,3],[89,3],[89,3],[89,3],[89,3],[89,3],[89,3],[99,0],[99,1],[101,0],[101,2],[103,1],[103,6],[103,6],[103,6],[103,4],[103,5],[103,4],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[110,1],[117,1],[117,1],[119,1],[119,4],[119,3],[119,6],[121,1],[121,1],[47,1],[47,4],[47,2],[47,3],[47,3],[47,3],[47,3],[47,3],[84,1],[84,3],[127,0],[127,2],[129,0],[129,1],[131,0],[131,2],[130,3],[11,0],[11,1],[136,3],[135,1],[135,3],[138,2],[139,0],[139,1],[139,1],[142,0],[142,2],[144,2],[144,4],[144,4],[12,0],[12,1],[147,0],[147,1],[148,2],[150,0],[150,2],[150,4],[28,0],[28,10],[157,1],[157,3],[159,1],[159,4],[162,0],[162,1],[162,1],[165,1],[165,1],[168,0],[168,1],[170,0],[170,2],[171,4],[171,5],[171,4],[171,6],[171,5],[177,0],[177,1],[175,2],[174,1],[174,4],[160,1],[160,1],[180,1],[180,3],[158,0],[158,4],[182,0],[182,2],[182,1],[183,1],[183,1],[186,0],[186,2],[186,2],[186,2],[187,0],[187,1],[188,0],[188,1],[189,1],[189,3],[190,6],[190,6],[190,6],[173,4],[173,4],[173,3]],performAction:function(e,t,r,s,n,a,o){var l=a.length-1;switch(n){case 1:case 2:return{nodeType:"Main",value:a[l-2],hasSemicolon:a[l-1]};case 3:case 143:this.$=!0;break;case 4:this.$=!1;break;case 5:case 13:case 14:case 15:case 17:case 19:case 21:case 23:case 25:case 27:case 30:case 31:case 32:case 51:case 52:case 53:case 54:case 59:case 60:case 62:case 68:case 72:case 79:case 80:case 81:case 82:case 88:case 89:case 103:case 105:case 106:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:case 126:case 128:case 139:case 141:case 146:case 152:case 153:case 155:case 160:case 162:case 163:case 174:case 175:case 176:case 177:case 179:case 188:case 190:case 192:case 193:case 201:case 202:case 208:case 210:this.$=a[l];break;case 6:this.$=a[l-2],this.$.orderBy=a[l-1],this.$.limit=a[l];break;case 7:case 8:this.$={type:"Union",left:a[l-3],distinctOpt:a[l-1],right:a[l]};break;case 9:this.$={type:"SelectParenthesized",value:a[l-1]};break;case 10:case 11:this.$={type:"Union",left:a[l-3],distinctOpt:a[l-1],right:a[l]};break;case 12:this.$={type:"Select",distinctOpt:a[l-10],highPriorityOpt:a[l-9],maxStateMentTimeOpt:a[l-8],straightJoinOpt:a[l-7],sqlSmallResultOpt:a[l-6],sqlBigResultOpt:a[l-5],sqlBufferResultOpt:a[l-4],sqlCacheOpt:a[l-3],sqlCalcFoundRowsOpt:a[l-2],selectItems:a[l-1],from:a[l].from,partition:a[l].partition,where:a[l].where,groupBy:a[l].groupBy,having:a[l].having,orderBy:a[l].orderBy,limit:a[l].limit,procedure:a[l].procedure,updateLockMode:a[l].updateLockMode};break;case 16:case 18:case 20:case 22:case 24:case 26:case 28:case 29:case 33:case 58:case 67:case 71:case 102:case 104:case 138:case 140:case 142:case 145:case 151:case 154:case 159:case 161:case 164:case 173:case 178:case 187:case 196:case 203:case 207:case 209:this.$=null;break;case 34:a[l-2].value.push(a[l]);break;case 35:this.$={type:"SelectExpr",value:[a[l]]};break;case 36:case 37:case 63:this.$={type:"Identifier",value:a[l]};break;case 38:this.$=a[l-1],this.$.alias=a[l].alias,this.$.hasAs=a[l].hasAs;break;case 39:case 198:this.$={alias:null,hasAs:null};break;case 40:case 42:this.$={alias:a[l],hasAs:!0};break;case 41:this.$={alias:a[l],hasAs:!1};break;case 43:this.$={alias:a[$01],hasAs:!1};break;case 44:this.$={type:"String",value:a[l]};break;case 45:case 46:case 47:this.$={type:"Number",value:a[l]};break;case 48:this.$={type:"Boolean",value:"TRUE"};break;case 49:this.$={type:"Boolean",value:"FALSE"};break;case 50:this.$={type:"Null",value:"null"};break;case 55:this.$={type:"FunctionCall",name:a[l-3],params:a[l-1]};break;case 56:a[l-2].push(a[l]),this.$=a[l-2];break;case 57:this.$=[a[l]];break;case 61:this.$={type:"FunctionCallParam",distinctOpt:a[l-1],value:a[l]};break;case 64:this.$=a[l-2],a[l-2].value+="."+a[l];break;case 65:this.$={type:"IdentifierList",value:[a[l]]};break;case 66:case 170:this.$=a[l-2],a[l-2].value.push(a[l]);break;case 69:this.$={type:"WhenThenList",value:[{when:a[l-2],then:a[l]}]};break;case 70:this.$=a[l-4],this.$.value.push({when:a[l-2],then:a[l]});break;case 73:this.$={type:"CaseWhen",caseExprOpt:a[l-3],whenThenList:a[l-2],else:a[l-1]};break;case 74:case 75:case 76:case 77:case 78:this.$={type:"Prefix",prefix:a[l-1],value:a[l]};break;case 83:this.$={type:"SimpleExprParentheses",value:a[l-1]};break;case 84:this.$={type:"SimpleExprParentheses",value:a[l-2],hasRow:!0};break;case 85:this.$={type:"SubQuery",value:a[l-1]};break;case 86:this.$={type:"SubQuery",value:a[l-1],hasExists:!0};break;case 87:this.$={type:"IdentifierExpr",identifier:a[l-2],value:a[l-1]};break;case 90:this.$={type:"BitExpression",operator:"|",left:a[l-2],right:a[l]};break;case 91:this.$={type:"BitExpression",operator:"&",left:a[l-2],right:a[l]};break;case 92:this.$={type:"BitExpression",operator:"<<",left:a[l-2],right:a[l]};break;case 93:this.$={type:"BitExpression",operator:">>",left:a[l-2],right:a[l]};break;case 94:this.$={type:"BitExpression",operator:"+",left:a[l-2],right:a[l]};break;case 95:this.$={type:"BitExpression",operator:"-",left:a[l-2],right:a[l]};break;case 96:this.$={type:"BitExpression",operator:"*",left:a[l-2],right:a[l]};break;case 97:this.$={type:"BitExpression",operator:"/",left:a[l-2],right:a[l]};break;case 98:this.$={type:"BitExpression",operator:"DIV",left:a[l-2],right:a[l]};break;case 99:this.$={type:"BitExpression",operator:"MOD",left:a[l-2],right:a[l]};break;case 100:this.$={type:"BitExpression",operator:"%",left:a[l-2],right:a[l]};break;case 101:this.$={type:"BitExpression",operator:"^",left:a[l-2],right:a[l]};break;case 107:this.$={type:"InSubQueryPredicate",hasNot:a[l-4],left:a[l-5],right:a[l-1]};break;case 108:this.$={type:"InExpressionListPredicate",hasNot:a[l-4],left:a[l-5],right:a[l-1]};break;case 109:this.$={type:"BetweenPredicate",hasNot:a[l-4],left:a[l-5],right:{left:a[l-2],right:a[l]}};break;case 110:this.$={type:"SoundsLikePredicate",hasNot:!1,left:a[l-3],right:a[l]};break;case 111:this.$={type:"LikePredicate",hasNot:a[l-3],left:a[l-4],right:a[l-1],escape:a[l]};break;case 112:this.$={type:"RegexpPredicate",hasNot:a[l-2],left:a[l-3],right:a[l]};break;case 123:this.$={type:"IsNullBooleanPrimary",hasNot:a[l-1],value:a[l-3]};break;case 124:this.$={type:"ComparisonBooleanPrimary",left:a[l-2],operator:a[l-1],right:a[l]};break;case 125:this.$={type:"ComparisonSubQueryBooleanPrimary",operator:a[l-4],subQueryOpt:a[l-3],left:a[l-5],right:a[l-1]};break;case 127:this.$={type:"BooleanExtra",value:a[l]};break;case 129:this.$={type:"IsExpression",hasNot:a[l-1],left:a[l-3],right:a[l]};break;case 130:this.$={type:"NotExpression",value:a[l]};break;case 131:case 134:this.$={type:"AndExpression",operator:a[l-1],left:a[l-2],right:a[l]};break;case 132:case 133:this.$={type:"OrExpression",operator:a[l-1],left:a[l-2],right:a[l]};break;case 135:this.$={type:"XORExpression",left:a[l-2],right:a[l]};break;case 136:this.$={type:"ExpressionList",value:[a[l]]};break;case 137:case 212:this.$=a[l-2],this.$.value.push(a[l]);break;case 144:this.$={type:"GroupBy",value:a[l-1],rollUp:a[l]};break;case 147:this.$={type:"OrderBy",value:a[l-1],rollUp:a[l]};break;case 148:case 194:this.$=[a[l]];break;case 149:this.$=a[l-2],a[l-2].push(a[l]);break;case 150:this.$={type:"GroupByOrderByItem",value:a[l-1],sortOpt:a[l]};break;case 156:this.$={type:"Limit",value:[a[l]]};break;case 157:this.$={type:"Limit",value:[a[l-2],a[l]]};break;case 158:this.$={type:"Limit",value:[a[l],a[l-2]],offsetMode:!0};break;case 165:this.$=a[l-1]+" "+a[l];break;case 166:this.$=a[l-3]+" "+a[l-2]+" "+a[l-1]+" "+a[l];break;case 167:this.$={};break;case 168:this.$={from:a[l-8],partition:a[l-7],where:a[l-6],groupBy:a[l-5],having:a[l-4],orderBy:a[l-3],limit:a[l-2],procedure:a[l-1],updateLockMode:a[l]};break;case 169:this.$={type:"TableReferences",value:[a[l]]};break;case 171:this.$={type:"TableReference",value:a[l]};break;case 172:this.$={type:"TableReference",hasOj:!0,value:a[l-1]};break;case 180:this.$={leftRight:null,outOpt:null};break;case 181:this.$={leftRight:a[l-1],outOpt:a[l]};break;case 182:this.$={type:"InnerCrossJoinTable",innerCrossOpt:a[l-2],left:a[l-3],right:a[l],condition:null};break;case 183:this.$={type:"InnerCrossJoinTable",innerCrossOpt:a[l-3],left:a[l-4],right:a[l-1],condition:a[l]};break;case 184:this.$={type:"StraightJoinTable",left:a[l-3],right:a[l-1],condition:a[l]};break;case 185:this.$={type:"LeftRightJoinTable",leftRight:a[l-4],outOpt:a[l-3],left:a[l-5],right:a[l-1],condition:a[l]};break;case 186:this.$={type:"NaturalJoinTable",leftRight:a[l-2].leftRight,outOpt:a[l-2].outOpt,left:a[l-4],right:a[l]};break;case 189:this.$={type:"OnJoinCondition",value:a[l]};break;case 191:this.$={type:"UsingJoinCondition",value:a[l-1]};break;case 195:this.$=a[l-2],a[l-2].push(a[l]);break;case 197:this.$={type:"Partitions",value:a[l-1]};break;case 199:this.$={hasAs:!0,alias:a[l]};break;case 200:this.$={hasAs:!1,alias:a[l]};break;case 204:case 205:case 206:this.$={type:"ForOptIndexHint",value:a[l]};break;case 211:this.$={type:"IndexHintList",value:[a[l]]};break;case 213:this.$={type:"UseIndexHint",value:a[l-1],forOpt:a[l-3],indexOrKey:a[l-4]};break;case 214:this.$={type:"IgnoreIndexHint",value:a[l-1],forOpt:a[l-3],indexOrKey:a[l-4]};break;case 215:this.$={type:"ForceIndexHint",value:a[l-1],forOpt:a[l-3],indexOrKey:a[l-4]};break;case 216:this.$={type:"TableFactor",value:a[l-3],partition:a[l-2],alias:a[l-1].alias,hasAs:a[l-1].hasAs,indexHintOpt:a[l]};break;case 217:this.$={type:"TableFactor",value:{type:"SubQuery",value:a[l-2]},alias:a[l].alias,hasAs:a[l].hasAs};break;case 218:this.$=a[l-1],this.$.hasParentheses=!0}},table:[{3:1,4:2,7:3,9:5,10:6,13:7,16:t,18:r},{1:[3]},{5:9,6:s,8:n,14:a},{5:12,6:s,8:n},e([16,32,33,35,36,37,38,39,40,41,42,45,46,50,51,54,55,57,58,60,75,78,80,81,82,83,85,86,87,100],o,{15:13,29:l,30:i,31:c}),e(p,[2,5]),e([6,8,145],u,{11:17,136:18,137:m}),{14:y},{4:21,18:r},{6:[1,22]},{15:23,18:o,29:l,30:i,31:c},{6:[2,3]},{6:[1,24]},e(b,[2,18],{19:25,32:[1,26]}),e(_,[2,13]),e(_,[2,14]),e(_,[2,15]),e(p,f,{12:27,144:28,145:$}),e(d,[2,146]),{16:h,35:x,47:32,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33,135:30,138:31},{15:65,16:o,29:l,30:i,31:c},{17:[1,66]},{1:[2,1]},{4:67,9:68,18:r},{1:[2,2]},e(P,[2,20],{20:69,33:[1,70]}),e(b,[2,17]),e(p,[2,6]),e(B,[2,160]),{35:[1,71]},e(d,U,{131:72,43:D,132:M}),e(G,[2,148]),e(G,[2,151],{139:75,106:H,123:z,124:W,125:K,126:Q,140:[1,81],141:[1,82]}),e(V,[2,128],{110:84,34:[1,85],111:[1,86],112:[1,87],113:[1,88],114:[1,89],115:[1,90],116:[1,91],120:[1,83]}),{16:h,35:x,47:92,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(Y,[2,122]),e(Y,[2,106],{99:93,45:J,78:X,80:Z,90:ee,91:te,92:re,93:se,94:ne,95:ae,96:oe,97:le,98:ie,100:ce,104:pe,105:pe,108:pe,109:pe,107:[1,94]}),e(ue,[2,89]),e(me,[2,79]),e(me,[2,80],{66:ye}),e(me,[2,81]),e(me,[2,82]),{4:110,16:h,18:r,35:x,47:111,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,84:109,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:[1,112]},{16:[1,113]},{50:be,65:114},e(me,[2,88]),e(me,[2,51]),e(me,[2,52]),e(me,[2,53]),e(me,[2,54]),e([6,8,14,17,34,36,43,45,49,50,51,66,70,71,73,76,78,80,88,90,91,92,93,94,95,96,97,98,100,102,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],_e,{16:fe}),{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:117,80:C,81:L,82:N,83:I,85:j,86:R,87:q},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:118,80:C,81:L,82:N,83:I,85:j,86:R,87:q},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:119,80:C,81:L,82:N,83:I,85:j,86:R,87:q},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:120,80:C,81:L,82:N,83:I,85:j,86:R,87:q},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:121,80:C,81:L,82:N,83:I,85:j,86:R,87:q},{16:h,35:x,47:123,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,68:122,70:[2,67],74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(me,[2,44]),e(me,[2,45]),e(me,[2,46]),e(me,[2,47]),e(me,[2,48]),e(me,[2,49]),e(me,[2,50]),{10:125,13:124,16:t},e([6,8,14,137,145],[2,9]),e(p,[2,10],{14:a}),e(p,[2,11]),e($e,[2,22],{21:126,36:[1,127]}),{34:[1,128]},e(B,[2,156],{43:[1,129],146:[1,130]}),e(d,[2,147]),{16:h,35:x,47:32,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33,138:131},{133:[1,132]},e(G,[2,150]),{16:h,35:x,47:133,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:h,35:x,47:134,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:h,35:x,47:135,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:h,35:x,47:136,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:h,35:x,47:137,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(G,[2,152]),e(G,[2,153]),e([57,58,60,122],pe,{99:138,100:ce}),{16:h,29:[1,141],35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,103:139,117:140,118:[1,142]},e(de,[2,113]),e(de,[2,114]),e(de,[2,115]),e(de,[2,116]),e(de,[2,117]),e(de,[2,118]),e(de,[2,119]),e(V,[2,130]),{104:[1,143],105:[1,144],108:[1,145],109:[1,146]},{108:[1,147]},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:148},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:149},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:150},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:151},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:152},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:153},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:154},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:155},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:156},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:157},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:158},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:159},e([57,58,60,104,105,108,109,122],[2,103]),{50:[1,160]},{17:[1,161],43:he},{17:[1,163]},e(xe,[2,136],{106:H,123:z,124:W,125:K,126:Q}),{16:h,35:x,47:111,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,84:164,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{4:165,18:r},{16:h,35:x,47:166,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,66:ye,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e([6,8,14,16,17,35,36,43,49,50,51,54,55,57,58,60,66,75,78,80,81,82,83,85,86,87,88,100,128,134,137,143,145,149,151,153,163,164,166,167,172,176,178,179,181,191,192,193],_e),e(xe,we,{119:33,103:35,89:36,79:37,61:38,65:39,62:40,77:41,74:46,52:47,53:48,56:49,59:50,63:167,64:168,47:172,16:h,30:ve,35:x,45:ke,46:ge,50:w,51:v,54:k,55:g,57:E,58:A,60:O,75:S,78:T,80:C,81:L,82:N,83:I,85:j,86:R,87:q,100:F}),e(me,[2,74]),e(me,[2,75]),e(me,[2,76]),e(me,[2,77]),e(me,[2,78]),{69:173,70:[1,174]},{70:[2,68],106:H,123:z,124:W,125:K,126:Q},e(Ee,[2,7],{14:y}),e(Ee,[2,8]),e(Ae,[2,24],{22:175,37:[1,176]}),e($e,[2,21]),{35:[1,177]},{35:[1,178]},{35:[1,179]},e(G,[2,149]),e(Oe,[2,143]),e(V,[2,131]),e(Se,[2,132],{106:H,123:z}),e(Se,[2,133],{106:H,123:z}),e(V,[2,134]),e(Se,[2,135],{106:H,123:z}),{56:182,57:E,58:A,60:[1,181],121:180,122:[1,183]},e(Y,[2,124]),{16:[1,184]},{16:[2,120]},{16:[2,121]},{16:[1,185]},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:186},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:187,80:C,81:L,82:N,83:I,85:j,86:R,87:q},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:188},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:189},e([6,8,14,17,34,36,43,49,50,51,70,71,73,76,88,90,100,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],[2,90],{45:J,78:X,80:Z,91:te,92:re,93:se,94:ne,95:ae,96:oe,97:le,98:ie}),e([6,8,14,17,34,36,43,49,50,51,70,71,73,76,88,90,91,98,100,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],[2,91],{45:J,78:X,80:Z,92:re,93:se,94:ne,95:ae,96:oe,97:le}),e(Te,[2,92],{45:J,78:X,80:Z,94:ne,95:ae,96:oe,97:le}),e(Te,[2,93],{45:J,78:X,80:Z,94:ne,95:ae,96:oe,97:le}),e(Ce,[2,94],{45:J,94:ne,95:ae,96:oe,97:le}),e(Ce,[2,95],{45:J,94:ne,95:ae,96:oe,97:le}),e(ue,[2,96]),e(ue,[2,97]),e(ue,[2,98]),e(ue,[2,99]),e(ue,[2,100]),e([6,8,14,17,34,36,43,49,50,51,70,71,73,76,88,90,98,100,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181],[2,101],{45:J,78:X,80:Z,91:te,92:re,93:se,94:ne,95:ae,96:oe,97:le}),e([6,8,14,16,17,34,35,36,43,45,49,50,51,54,55,57,58,60,66,70,71,73,75,76,78,80,81,82,83,85,86,87,88,90,91,92,93,94,95,96,97,98,100,102,104,105,106,107,108,109,111,112,113,114,115,116,120,123,124,125,126,128,132,134,137,140,141,143,145,149,151,153,156,163,164,166,167,172,176,178,179,181,191,192,193],[2,64]),e(me,[2,83]),{16:h,35:x,47:190,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(me,[2,85]),{17:[1,191],43:he},{17:[1,192]},{88:[1,193],106:H,123:z,124:W,125:K,126:Q},{17:[1,194],43:[1,195]},e(xe,[2,57]),e(xe,[2,59]),e(xe,[2,60]),{16:h,35:x,47:196,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(xe,[2,62],{106:H,123:z,124:W,125:K,126:Q}),{70:[1,198],72:197,73:[1,199],76:[2,71]},{16:h,35:x,47:200,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(Le,[2,26],{23:201,38:[1,202]}),e(Ae,[2,23]),e(P,[2,19]),e(B,[2,157]),e(B,[2,158]),e(V,[2,129]),e(Y,[2,123]),e(V,[2,126]),e(V,[2,127]),{4:203,18:r},{4:204,16:h,18:r,35:x,47:111,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,84:205,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{45:J,78:X,80:Z,90:ee,91:te,92:re,93:se,94:ne,95:ae,96:oe,97:le,98:ie,106:[1,206]},e(Y,[2,104],{101:207,102:[1,208]}),e(Y,[2,112],{45:J,78:X,80:Z,90:ee,91:te,92:re,93:se,94:ne,95:ae,96:oe,97:le,98:ie}),e(Y,[2,110],{45:J,78:X,80:Z,90:ee,91:te,92:re,93:se,94:ne,95:ae,96:oe,97:le,98:ie}),e(xe,[2,137],{106:H,123:z,124:W,125:K,126:Q}),e(me,[2,84]),e(me,[2,86]),e(me,[2,87]),e(me,[2,55]),e(xe,we,{119:33,103:35,89:36,79:37,61:38,65:39,62:40,77:41,74:46,52:47,53:48,56:49,59:50,47:172,64:209,16:h,30:ve,35:x,45:ke,46:ge,50:w,51:v,54:k,55:g,57:E,58:A,60:O,75:S,78:T,80:C,81:L,82:N,83:I,85:j,86:R,87:q,100:F}),e(xe,[2,61],{106:H,123:z,124:W,125:K,126:Q}),{76:[1,210]},{16:h,35:x,47:211,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:h,35:x,47:212,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{71:[1,213],106:H,123:z,124:W,125:K,126:Q},e(Ne,[2,28],{24:214,39:[1,215]}),e(Le,[2,25]),{17:[1,216]},{17:[1,217]},{17:[1,218],43:he},{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,103:219},e(Y,[2,111]),{16:h,35:x,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:220,80:C,81:L,82:N,83:I,85:j,86:R,87:q},e(xe,[2,56]),e(me,[2,73]),{71:[1,221],106:H,123:z,124:W,125:K,126:Q},{76:[2,72],106:H,123:z,124:W,125:K,126:Q},{16:h,35:x,47:222,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(Ie,[2,29],{25:223,40:[1,224],41:[1,225]}),e(Ne,[2,27]),e(Y,[2,125]),e(Y,[2,107]),e(Y,[2,108]),e(Y,[2,109]),e(Y,[2,105]),{16:h,35:x,47:226,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(je,[2,69],{106:H,123:z,124:W,125:K,126:Q}),e(Re,[2,33],{26:227,42:[1,228]}),e(Ie,[2,30]),e(Ie,[2,31]),e(je,[2,70],{106:H,123:z,124:W,125:K,126:Q}),{16:h,27:229,35:x,44:230,45:qe,46:Fe,47:233,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(Re,[2,32]),e(Pe,[2,167],{28:234,43:[1,235],156:[1,236]}),e(Be,[2,35]),e(Be,[2,36]),e(Be,[2,37]),e(Be,[2,39],{48:237,49:[1,238],50:[1,239],51:[1,240],106:H,123:z,124:W,125:K,126:Q}),e(Pe,[2,12]),{16:h,35:x,44:241,45:qe,46:Fe,47:233,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:Ue,50:be,65:248,87:De,157:242,159:243,160:244,171:247,173:246},e(Be,[2,38]),{50:[1,250],51:[1,251]},e(Be,[2,41]),e(Be,[2,43]),e(Be,[2,34]),e([6,8,14,17,128,134,137,143,145,149,151,153],Me,{158:252,43:Ge,181:He}),e(ze,[2,169]),e(ze,[2,171],{162:255,165:257,36:We,163:Ke,164:Qe,166:Ve,167:Ye,172:Je,176:Xe}),{161:[1,263]},e(Ze,[2,192]),e(Ze,[2,193]),e([6,8,14,17,36,43,49,50,88,128,134,137,143,145,149,151,153,163,164,166,167,172,176,178,179,191,192,193],Me,{158:264,66:ye,181:He}),{4:265,16:Ue,18:r,50:be,65:248,87:De,157:266,159:243,160:244,171:247,173:246},e(Be,[2,40]),e(Be,[2,42]),e(et,[2,138],{127:267,128:[1,268]}),{16:Ue,50:be,65:248,87:De,159:269,160:244,171:247,173:246},{16:[1,270]},{172:[1,271]},{16:Ue,50:be,65:248,173:272},{168:273,169:tt,172:rt},{165:276,166:Ve,167:Ye,170:275,172:[2,180]},{172:[2,174]},{172:[2,175]},e(st,[2,176]),e(st,[2,177]),{16:Ue,50:be,65:248,160:277,171:247,173:246},e(nt,at,{182:278,65:280,49:ot,50:be}),{17:[1,281]},{17:[1,282],43:Ge},e(Oe,[2,140],{129:283,130:284,134:[1,285]}),{16:h,35:x,47:286,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(ze,[2,170]),{50:be,65:288,180:287},{16:Ue,50:be,65:248,173:289},{175:290,178:lt},{172:[1,292]},{172:[2,179]},{172:[1,293]},{168:294,169:tt,172:rt},{36:We,88:[1,295],162:255,163:Ke,164:Qe,165:257,166:Ve,167:Ye,172:Je,176:Xe},e(Ze,[2,209],{188:296,189:297,190:298,191:it,192:ct,193:pt}),{50:be,65:302},e(nt,[2,200],{66:ye}),e(Ze,at,{65:280,182:303,49:ot,50:be}),e(Ze,[2,218]),e(ut,[2,154],{142:304,143:[1,305]}),e(Oe,[2,141]),{16:h,35:x,47:32,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33,135:306,138:31},e(et,[2,139],{106:H,123:z,124:W,125:K,126:Q}),{17:[1,307],43:[1,308]},e(xe,[2,194],{66:ye}),e([6,8,14,17,36,43,88,128,134,137,143,145,149,151,153,163,164,166,167,172,176,181],[2,182],{174:309,175:310,178:lt,179:mt}),e(Ze,[2,184]),{16:h,35:x,47:312,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},{16:Ue,50:be,65:248,160:313,171:247,173:246},{16:Ue,50:be,65:248,173:314},{172:[2,181]},e(ze,[2,172]),e(Ze,[2,216]),e(Ze,[2,210]),e(Ze,[2,211]),{183:316,184:yt,185:bt},{183:319,184:yt,185:bt},{183:320,184:yt,185:bt},e(nt,[2,199],{66:ye}),e(Ze,[2,217]),e(d,u,{136:18,11:321,137:m}),{16:h,35:x,47:322,50:w,51:v,52:47,53:48,54:k,55:g,56:49,57:E,58:A,59:50,60:O,61:38,62:40,65:39,74:46,75:S,77:41,78:T,79:37,80:C,81:L,82:N,83:I,85:j,86:R,87:q,89:36,100:F,103:35,119:33},e(Oe,U,{131:323,43:D,132:M}),e([6,8,14,17,36,43,49,50,88,128,134,137,143,145,149,151,153,163,164,166,167,172,176,178,179,181,191,192,193],[2,197]),{50:be,65:324},e(Ze,[2,183]),e(Ze,[2,190]),{16:[1,325]},e(Ze,[2,189],{106:H,123:z,124:W,125:K,126:Q}),{36:We,162:255,163:Ke,164:Qe,165:257,166:Ve,167:Ye,172:Je,174:326,175:310,176:Xe,178:lt,179:mt},e(Ze,[2,186]),{190:327,191:it,192:ct,193:pt},{16:_t,151:ft,186:328},e($t,[2,201]),e($t,[2,202]),{16:_t,151:ft,186:330},{16:_t,151:ft,186:331},e(B,f,{144:28,12:332,145:$}),e(ut,[2,155],{106:H,123:z,124:W,125:K,126:Q}),e(Oe,[2,144]),e(xe,[2,195],{66:ye}),{50:be,65:334,67:333},e(Ze,[2,185]),e(Ze,[2,212]),{16:[1,335]},{134:[1,338],137:[1,337],172:[1,336]},{16:[1,339]},{16:[1,340]},e(dt,[2,161],{147:341,148:342,149:[1,343]}),{17:[1,344],43:ht},e(xe,[2,65],{66:ye}),{17:[2,207],50:be,65:334,67:347,187:346},{16:[2,204]},{16:[2,205]},{16:[2,206]},{50:be,65:334,67:348},{50:be,65:334,67:349},e(Pe,[2,164],{150:350,151:[1,351],153:[1,352]}),e(dt,[2,162]),{50:[1,354],62:353},e(Ze,[2,191]),{50:be,65:355},{17:[1,356]},{17:[2,208],43:ht},{17:[1,357],43:ht},{17:[1,358],43:ht},e(Pe,[2,168]),{152:[1,359]},{104:[1,360]},e(dt,[2,163]),{16:fe},e(xe,[2,66],{66:ye}),e(Ze,[2,213]),e(Ze,[2,214]),e(Ze,[2,215]),e(Pe,[2,165]),{154:[1,361]},{155:[1,362]},e(Pe,[2,166])],defaultActions:{11:[2,3],22:[2,1],24:[2,2],141:[2,120],142:[2,121],259:[2,174],260:[2,175],274:[2,179],294:[2,181],336:[2,204],337:[2,205],338:[2,206]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],s=[null],n=[],a=this.table,o="",l=0,i=0,c=0,p=2,u=1,m=n.slice.call(arguments,1),y=Object.create(this.lexer),b={yy:{}};for(var _ in this.yy)Object.prototype.hasOwnProperty.call(this.yy,_)&&(b.yy[_]=this.yy[_]);y.setInput(e,b.yy),b.yy.lexer=y,b.yy.parser=this,void 0===y.yylloc&&(y.yylloc={});var f=y.yylloc;n.push(f);var $=y.options&&y.options.ranges;"function"==typeof b.yy.parseError?this.parseError=b.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var d,h,x,w,v,k,g,E,A,O=function(){var e;return"number"!=typeof(e=y.lex()||u)&&(e=t.symbols_[e]||e),e},S={};;){if(x=r[r.length-1],this.defaultActions[x]?w=this.defaultActions[x]:(null==d&&(d=O()),w=a[x]&&a[x][d]),void 0===w||!w.length||!w[0]){var T="";for(k in A=[],a[x])this.terminals_[k]&&k>p&&A.push("'"+this.terminals_[k]+"'");T=y.showPosition?"Parse error on line "+(l+1)+":\n"+y.showPosition()+"\nExpecting "+A.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(l+1)+": Unexpected "+(d==u?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(T,{text:y.match,token:this.terminals_[d]||d,line:y.yylineno,loc:f,expected:A})}if(w[0]instanceof Array&&w.length>1)throw new Error("Parse Error: multiple actions possible at state: "+x+", token: "+d);switch(w[0]){case 1:r.push(d),s.push(y.yytext),n.push(y.yylloc),r.push(w[1]),d=null,h?(d=h,h=null):(i=y.yyleng,o=y.yytext,l=y.yylineno,f=y.yylloc,c>0&&c--);break;case 2:if(g=this.productions_[w[1]][1],S.$=s[s.length-g],S._$={first_line:n[n.length-(g||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(g||1)].first_column,last_column:n[n.length-1].last_column},$&&(S._$.range=[n[n.length-(g||1)].range[0],n[n.length-1].range[1]]),void 0!==(v=this.performAction.apply(S,[o,i,l,b.yy,w[1],s,n].concat(m))))return v;g&&(r=r.slice(0,-1*g*2),s=s.slice(0,-1*g),n=n.slice(0,-1*g)),r.push(this.productions_[w[1]][0]),s.push(S.$),n.push(S._$),E=a[r[r.length-2]][r[r.length-1]],r.push(E);break;case 3:return!0}}return!0}},wt={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===s.length?this.yylloc.first_column:0)+s[s.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,s,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(s=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var a in n)this[a]=n[a];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,s;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),a=0;a<n.length;a++)if((r=this._input.match(this.rules[n[a]]))&&(!t||r[0].length>t[0].length)){if(t=r,s=a,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,n[a])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,n[s]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return(e=this.conditionStack.length-1-Math.abs(e||0))>=0?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{"case-insensitive":!0},performAction:function(e,t,r,s){switch(r){case 0:case 1:case 2:case 3:break;case 4:case 5:case 6:return 50;case 7:return 18;case 8:return 29;case 9:return 118;case 10:return 30;case 11:return 31;case 12:return 32;case 13:return 33;case 14:return 36;case 15:return 37;case 16:return 38;case 17:return 39;case 18:return 40;case 19:return 41;case 20:return 42;case 21:return 46;case 22:return 49;case 23:return 57;case 24:return 58;case 25:return 60;case 26:return"COLLATE";case 27:return 83;case 28:return 85;case 29:return 86;case 30:return 75;case 31:return 70;case 32:return 71;case 33:return 73;case 34:return 76;case 35:return 95;case 36:return 96;case 37:return 100;case 38:return 105;case 39:return 104;case 40:return 107;case 41:return 108;case 42:return 102;case 43:return 109;case 44:return 120;case 45:return 122;case 46:return 106;case 47:return 125;case 48:return 126;case 49:return 156;case 50:return 181;case 51:return 191;case 52:return 184;case 53:return 185;case 54:return 151;case 55:return 172;case 56:return 137;case 57:return 134;case 58:return 192;case 59:return 193;case 60:return 163;case 61:return 164;case 62:return 178;case 63:return 179;case 64:return 166;case 65:return 167;case 66:return 169;case 67:return 176;case 68:return 128;case 69:return 140;case 70:return 141;case 71:return 132;case 72:return 133;case 73:return 143;case 74:return 146;case 75:return 149;case 76:return 152;case 77:return 153;case 78:return 154;case 79:return 155;case 80:return 161;case 81:return 145;case 82:return 14;case 83:return 43;case 84:return 34;case 85:return 16;case 86:return 17;case 87:return 81;case 88:return 116;case 89:return 82;case 90:return 90;case 91:return 91;case 92:return 78;case 93:return 80;case 94:return 45;case 95:return 94;case 96:return 97;case 97:return 98;case 98:return 93;case 99:return 111;case 100:return 112;case 101:return 92;case 102:return"<=>";case 103:return 113;case 104:return 115;case 105:return 114;case 106:return 87;case 107:return 88;case 108:return 8;case 109:case 110:return 51;case 111:return 55;case 112:return 35;case 113:return 54;case 114:return 50;case 115:return 66;case 116:case 117:return 51;case 118:return 50;case 119:return 6;case 120:return"INVALID"}},rules:[/^(?:[\/][*](.|\n)*?[*][\/])/i,/^(?:[-][-]\s.*\n)/i,/^(?:[#]\s.*\n)/i,/^(?:\s+)/i,/^(?:[`][a-zA-Z_\u4e00-\u9fa5][a-zA-Z0-9_\u4e00-\u9fa5]*[`])/i,/^(?:[\w]+[\u4e00-\u9fa5]+[0-9a-zA-Z_\u4e00-\u9fa5]*)/i,/^(?:[\u4e00-\u9fa5][0-9a-zA-Z_\u4e00-\u9fa5]*)/i,/^(?:SELECT\b)/i,/^(?:ALL\b)/i,/^(?:ANY\b)/i,/^(?:DISTINCT\b)/i,/^(?:DISTINCTROW\b)/i,/^(?:HIGH_PRIORITY\b)/i,/^(?:MAX_STATEMENT_TIME\b)/i,/^(?:STRAIGHT_JOIN\b)/i,/^(?:SQL_SMALL_RESULT\b)/i,/^(?:SQL_BIG_RESULT\b)/i,/^(?:SQL_BUFFER_RESULT\b)/i,/^(?:SQL_CACHE\b)/i,/^(?:SQL_NO_CACHE\b)/i,/^(?:SQL_CALC_FOUND_ROWS\b)/i,/^(?:([a-zA-Z_\u4e00-\u9fa5][a-zA-Z0-9_\u4e00-\u9fa5]*\.){1,2}\*)/i,/^(?:AS\b)/i,/^(?:TRUE\b)/i,/^(?:FALSE\b)/i,/^(?:NULL\b)/i,/^(?:COLLATE\b)/i,/^(?:BINARY\b)/i,/^(?:ROW\b)/i,/^(?:EXISTS\b)/i,/^(?:CASE\b)/i,/^(?:WHEN\b)/i,/^(?:THEN\b)/i,/^(?:ELSE\b)/i,/^(?:END\b)/i,/^(?:DIV\b)/i,/^(?:MOD\b)/i,/^(?:NOT\b)/i,/^(?:BETWEEN\b)/i,/^(?:IN\b)/i,/^(?:SOUNDS\b)/i,/^(?:LIKE\b)/i,/^(?:ESCAPE\b)/i,/^(?:REGEXP\b)/i,/^(?:IS\b)/i,/^(?:UNKNOWN\b)/i,/^(?:AND\b)/i,/^(?:OR\b)/i,/^(?:XOR\b)/i,/^(?:FROM\b)/i,/^(?:PARTITION\b)/i,/^(?:USE\b)/i,/^(?:INDEX\b)/i,/^(?:KEY\b)/i,/^(?:FOR\b)/i,/^(?:JOIN\b)/i,/^(?:ORDER\s+BY\b)/i,/^(?:GROUP\s+BY\b)/i,/^(?:IGNORE\b)/i,/^(?:FORCE\b)/i,/^(?:INNER\b)/i,/^(?:CROSS\b)/i,/^(?:ON\b)/i,/^(?:USING\b)/i,/^(?:LEFT\b)/i,/^(?:RIGHT\b)/i,/^(?:OUTER\b)/i,/^(?:NATURAL\b)/i,/^(?:WHERE\b)/i,/^(?:ASC\b)/i,/^(?:DESC\b)/i,/^(?:WITH\b)/i,/^(?:ROLLUP\b)/i,/^(?:HAVING\b)/i,/^(?:OFFSET\b)/i,/^(?:PROCEDURE\b)/i,/^(?:UPDATE\b)/i,/^(?:LOCK\b)/i,/^(?:SHARE\b)/i,/^(?:MODE\b)/i,/^(?:OJ\b)/i,/^(?:LIMIT\b)/i,/^(?:UNION\b)/i,/^(?:,)/i,/^(?:=)/i,/^(?:\()/i,/^(?:\))/i,/^(?:~)/i,/^(?:!=)/i,/^(?:!)/i,/^(?:\|)/i,/^(?:&)/i,/^(?:\+)/i,/^(?:-)/i,/^(?:\*)/i,/^(?:\/)/i,/^(?:%)/i,/^(?:\^)/i,/^(?:>>)/i,/^(?:>=)/i,/^(?:>)/i,/^(?:<<)/i,/^(?:<=>)/i,/^(?:<=)/i,/^(?:<>)/i,/^(?:<)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:;)/i,/^(?:['](\\.|[^'])*['])/i,/^(?:["](\\.|[^"])*["])/i,/^(?:[0][x][0-9a-fA-F]+)/i,/^(?:[-]?[0-9]+(\.[0-9]+)?)/i,/^(?:[-]?[0-9]+(\.[0-9]+)?[eE][-][0-9]+(\.[0-9]+)?)/i,/^(?:[a-zA-Z_\u4e00-\u9fa5][a-zA-Z0-9_\u4e00-\u9fa5]*)/i,/^(?:\.)/i,/^(?:["][a-zA-Z_\u4e00-\u9fa5][a-zA-Z0-9_\u4e00-\u9fa5]*["])/i,/^(?:['][a-zA-Z_\u4e00-\u9fa5][a-zA-Z0-9_\u4e00-\u9fa5]*['])/i,/^(?:([`])(?:(?=(\\?))\2.)*?\1)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120],inclusive:!0}}};function vt(){this.yy={}}return xt.lexer=wt,vt.prototype=xt,xt.Parser=vt,new vt}();function a(){this.buffer=""}n||(n={}),n.stringify=function(e){var t=new a;return t.travelMain(e),t.buffer},a.prototype.travel=function(e){if(e){if("string"==typeof e)return this.append(e);this["travel"+e.type].call(this,e)}};var o=!1;a.prototype.appendKeyword=function(e,t,r){o&&(t=!0,o=!1),this.buffer+=t?e.toUpperCase():" "+e.toUpperCase(),r&&(o=!0)},a.prototype.append=function(e,t,r){o&&(t=!0,o=!1),this.buffer+=t?e:" "+e,r&&(o=!0)},a.prototype.travelMain=function(e){this.travel(e.value),e.hasSemicolon&&this.append(";",!0)},a.prototype.travelSelect=function(e){this.appendKeyword("select"),e.distinctOpt&&this.appendKeyword(e.distinctOpt),e.highPriorityOpt&&this.appendKeyword(e.highPriorityOpt),e.maxStateMentTimeOpt&&this.append("MAX_STATEMENT_TIME = "+e.maxStateMentTimeOpt),e.straightJoinOpt&&this.appendKeyword(e.straightJoinOpt),e.sqlSmallResultOpt&&this.appendKeyword(e.sqlSmallResultOpt),e.sqlBigResultOpt&&this.appendKeyword(e.sqlBigResultOpt),e.sqlBufferResultOpt&&this.appendKeyword(e.sqlBufferResultOpt),e.sqlCacheOpt&&this.appendKeyword(e.sqlCacheOpt),e.sqlCalcFoundRowsOpt&&this.appendKeyword(e.sqlCalcFoundRowsOpt),e.selectItems&&this.travelSelectExpr(e.selectItems),e.from&&(this.appendKeyword("from"),this.travel(e.from)),e.partition&&this.travel(e.partition),e.where&&(this.appendKeyword("where"),this.travel(e.where)),e.groupBy&&this.travel(e.groupBy),e.having&&(this.appendKeyword("having"),this.travel(e.having)),e.orderBy&&this.travel(e.orderBy),e.limit&&this.travel(e.limit),e.procedure&&(this.appendKeyword("procedure"),this.travel(e.procedure)),e.updateLockMode&&this.appendKeyword(e.updateLockMode)},a.prototype.travelSelectExpr=function(e){for(var t=e.value,r=0;r<t.length;r++)"string"==typeof e?this.append(t[r]):(this.travel(t[r]),t[r].alias&&(t[r].hasAs&&this.appendKeyword("as"),this.travel(t[r].alias))),r!==t.length-1&&this.append(",",!0)},a.prototype.travelIsExpression=function(e){this.travel(e.left),this.appendKeyword("in"),e.hasNot&&this.appendKeyword("not"),this.append(e.right)},a.prototype.travelNotExpression=function(e){this.appendKeyword("not"),this.travel(e.value)},a.prototype.travelOrExpression=a.prototype.travelAndExpression=a.prototype.travelXORExpression=function(e){this.travel(e.left),this.appendKeyword(e.operator),this.travel(e.right)},a.prototype.travelNull=a.prototype.travelBoolean=a.prototype.travelBooleanExtra=function(e){this.appendKeyword(e.value)},a.prototype.travelNumber=function(e){this.append(e.value)},a.prototype.travelString=function(e){this.append(e.value)},a.prototype.travelFunctionCall=function(e){this.append(e.name),this.append("(",!0,!0);for(var t=e.params,r=0;r<t.length;r++){var s=t[r];this.travel(s),r!==t.length-1&&this.append(",",!0)}this.append(")",!0)},a.prototype.travelFunctionCallParam=function(e){e.distinctOpt&&this.appendKeyword(e.distinctOpt),this.travel(e.value)},a.prototype.travelIdentifier=function(e){this.append(e.value)},a.prototype.travelIdentifierList=function(e){for(var t=e.value,r=0;r<t.length;r++)this.travel(t[r]),r!==t.length-1&&this.append(",",!0)},a.prototype.travelWhenThenList=function(e){for(var t=e.value,r=0;r<t.length;r++)this.appendKeyword("when"),this.travel(t[r].when),this.appendKeyword("then"),this.travel(t[r].then)},a.prototype.travelCaseWhen=function(e){this.appendKeyword("case"),e.caseExprOpt&&this.travel(e.caseExprOpt),this.travel(e.whenThenList),e.else&&(this.appendKeyword("else"),this.travel(e.else)),this.appendKeyword("end")},a.prototype.travelPrefix=function(e){this.appendKeyword(e.prefix),this.travel(e.value)},a.prototype.travelSimpleExprParentheses=function(e){e.hasRow&&this.appendKeyword("row"),this.append("(",!1,!0),this.travel(e.value),this.append(")",!0)},a.prototype.travelSubQuery=function(e){e.hasExists&&this.appendKeyword("exists"),this.append("(",!1,!0),this.travel(e.value),this.append(")",!0)},a.prototype.travelIdentifierExpr=function(e){this.append("{"),this.travel(e.identifier),this.travel(e.value),this.append("}")},a.prototype.travelBitExpression=function(e){this.travel(e.left),this.appendKeyword(e.operator),this.travel(e.right)},a.prototype.travelInSubQueryPredicate=function(e){this.travel(e.left),e.hasNot&&this.appendKeyword("not"),this.appendKeyword("in"),this.append("(",!1,!0),this.travel(e.right),this.append(")")},a.prototype.travelInExpressionListPredicate=function(e){this.travel(e.left),e.hasNot&&this.appendKeyword("not"),this.appendKeyword("in"),this.append("(",!1,!0),this.travel(e.right),this.append(")")},a.prototype.travelBetweenPredicate=function(e){this.travel(e.left),e.hasNot&&this.appendKeyword("not"),this.appendKeyword("between"),this.travel(e.right.left),this.appendKeyword("and"),this.travel(e.right.right)},a.prototype.travelSoundsLikePredicate=function(e){this.travel(e.left),this.appendKeyword("sounds"),this.appendKeyword("like"),this.travel(e.right)},a.prototype.travelLikePredicate=function(e){this.travel(e.left),e.hasNot&&this.appendKeyword("not"),this.appendKeyword("like"),this.travel(e.right),e.escape&&(this.appendKeyword("escape"),this.travel(e.escape))},a.prototype.travelRegexpPredicate=function(e){this.travel(e.left),e.hasNot&&this.appendKeyword("not"),this.appendKeyword("regexp"),this.travel(e.right)},a.prototype.travelIsNullBooleanPrimary=function(e){this.travel(e.value),this.appendKeyword("is"),e.hasNot&&this.appendKeyword("not"),this.appendKeyword("null")},a.prototype.travelComparisonBooleanPrimary=function(e){this.travel(e.left),this.append(e.operator),this.travel(e.right)},a.prototype.travelComparisonSubQueryBooleanPrimary=function(e){this.travel(e.left),this.append(e.operator),this.appendKeyword(e.subQueryOpt),this.append("(",!1,!0),this.travel(e.right),this.append(")")},a.prototype.travelExpressionList=function(e){for(var t=e.value,r=0;r<t.length;r++)this.travel(t[r]),r!==t.length-1&&this.append(",",!0)},a.prototype.travelGroupBy=function(e){this.appendKeyword("group by");for(var t=e.value,r=0;r<t.length;r++)this.travel(t[r]),r!==t.length-1&&this.append(",",!0)},a.prototype.travelOrderBy=function(e){this.appendKeyword("order by");for(var t=e.value,r=0;r<t.length;r++)this.travel(t[r]),r!==t.length-1&&this.append(",",!0);e.rollUp&&this.appendKeyword("with rollup")},a.prototype.travelGroupByOrderByItem=function(e){this.travel(e.value),e.sortOpt&&this.appendKeyword(e.sortOpt)},a.prototype.travelLimit=function(e){this.appendKeyword("limit");var t=e.value;1===t.length?this.append(t[0]):2===t.length&&(e.offsetMode?(this.append(t[1]),this.append("offset"),this.append(t[0])):(this.append(t[0]),this.append(",",!0),this.append(t[1])))},a.prototype.travelTableReferences=function(e){var t=e.value;e.TableReferences&&this.append("(",!1,!0);for(var r=0;r<t.length;r++)this.travel(t[r]),r!==t.length-1&&this.append(",",!0);e.TableReferences&&this.append(")")},a.prototype.travelTableReference=function(e){e.hasOj?(this.append("{"),this.appendKeyword("oj"),this.travel(e.value),this.append("}")):this.travel(e.value)},a.prototype.travelInnerCrossJoinTable=function(e){this.travel(e.left),e.innerCrossOpt&&this.appendKeyword(e.innerCrossOpt),this.appendKeyword("join"),this.travel(e.right),e.condition&&this.travel(e.condition)},a.prototype.travelStraightJoinTable=function(e){this.travel(e.left),this.appendKeyword("straight_join"),this.travel(e.right),this.travel(e.condition)},a.prototype.travelLeftRightJoinTable=function(e){this.travel(e.left),this.appendKeyword(e.leftRight),e.outOpt&&this.appendKeyword(e.outOpt),this.appendKeyword("join"),this.travel(e.right),this.travel(e.condition)},a.prototype.travelNaturalJoinTable=function(e){this.travel(e.left),this.appendKeyword("natural"),e.leftRight&&this.appendKeyword(e.leftRight),e.outOpt&&this.appendKeyword(e.outOpt),this.appendKeyword("join"),this.travel(e.right)},a.prototype.travelOnJoinCondition=function(e){this.appendKeyword("on"),this.travel(e.value)},a.prototype.travelUsingJoinCondition=function(e){this.appendKeyword("using"),this.appendKeyword("(",!1,!0),this.travel(e.value),this.appendKeyword(")")},a.prototype.travelPartitions=function(e){this.appendKeyword("partition"),this.appendKeyword("(",!1,!0);for(var t=e.value,r=0;r<t.length;r++)this.travel(t[r]),r!==t.length-1&&this.append(",",!0);this.appendKeyword(")")},a.prototype.travelForOptIndexHint=function(e){this.appendKeyword("for"),this.appendKeyword(e.value)},a.prototype.travelIndexList=function(e){for(var t=e.value,r=0;r<t.length;r++)this.travel(t[r]),r!==t.length-1&&this.append(",",!0)},a.prototype.travelUseIndexHint=function(e){this.appendKeyword("use"),this.appendKeyword(e.indexOrKey),e.forOpt&&this.travel(e.forOpt),this.appendKeyword("(",!1,!0),e.value&&this.travel(e.value),this.appendKeyword(")")},a.prototype.travelIgnoreIndexHint=function(e){this.appendKeyword("ignore"),this.appendKeyword(e.indexOrKey),e.forOpt&&this.travel(e.forOpt),this.appendKeyword("(",!1,!0),e.value&&this.travel(e.value),this.appendKeyword(")")},a.prototype.travelForceIndexHint=function(e){this.appendKeyword("force"),this.appendKeyword(e.indexOrKey),e.forOpt&&this.travel(e.forOpt),this.appendKeyword("(",!1,!0),e.value&&this.travel(e.value),this.appendKeyword(")")},a.prototype.travelTableFactor=function(e){this.travel(e.value),e.partition&&this.travel(e.partition),e.alias&&(e.hasAs&&this.appendKeyword("as"),this.travel(e.alias)),e.indexHintOpt&&this.travel(e.indexHintOpt)},a.prototype.travelUnion=function(e){this.travel(e.left),this.appendKeyword("UNION"),e.distinctOpt&&this.appendKeyword(e.distinctOpt),this.travel(e.right)},a.prototype.travelSelectParenthesized=function(e){this.appendKeyword("("),this.travel(e.value),this.appendKeyword(")")};void 0===(s=function(){return n}.apply(t,[]))||(e.exports=s)},function(e,t,r){var s=r(21),n=r(22),a=r(57),o=r(107),l=n((function(e){return e.push(void 0,a),s(o,void 0,e)}));e.exports=l},function(e,t,r){var s,n,a;n=[],void 0===(a="function"==typeof(s=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r="boolean"==typeof(new RegExp).sticky;function s(e){return e&&"[object RegExp]"===t.call(e)}function n(e){return e&&"object"==typeof e&&!s(e)&&!Array.isArray(e)}function a(e){return"("+e+")"}function o(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function l(e){if("string"==typeof e)return"(?:"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")";if(s(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function i(t,r){if(n(r)||(r={match:r}),r.include)throw new Error("Matching rules cannot also include states");var a={defaultType:t,lineBreaks:!!r.error||!!r.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var o in r)e.call(r,o)&&(a[o]=r[o]);if("string"==typeof a.type&&t!==a.type)throw new Error("Type transform cannot be a string (type '"+a.type+"' for token '"+t+"')");var l=a.match;return a.match=Array.isArray(l)?l:l?[l]:[],a.match.sort((function(e,t){return s(e)&&s(t)?0:s(t)?-1:s(e)?1:t.length-e.length})),a}function c(e){return Array.isArray(e)?function(e){for(var t=[],r=0;r<e.length;r++){var s=e[r];if(s.include)for(var n=[].concat(s.include),a=0;a<n.length;a++)t.push({include:n[a]});else{if(!s.type)throw new Error("Rule has no type: "+JSON.stringify(s));t.push(i(s.type,s))}}return t}(e):function(e){for(var t=Object.getOwnPropertyNames(e),r=[],s=0;s<t.length;s++){var a=t[s],o=e[a],l=[].concat(o);if("include"!==a){var c=[];l.forEach((function(e){n(e)?(c.length&&r.push(i(a,c)),r.push(i(a,e)),c=[]):c.push(e)})),c.length&&r.push(i(a,c))}else for(var p=0;p<l.length;p++)r.push({include:l[p]})}return r}(e)}var p=i("error",{lineBreaks:!0,shouldThrow:!0});function u(e,t){for(var n=null,i=Object.create(null),c=!0,u=null,m=[],y=[],b=0;b<e.length;b++)e[b].fallback&&(c=!1);for(b=0;b<e.length;b++){var _=e[b];if(_.include)throw new Error("Inheritance is not allowed in stateless lexers");if(_.error||_.fallback){if(n)throw!_.fallback==!n.fallback?new Error("Multiple "+(_.fallback?"fallback":"error")+" rules not allowed (for token '"+_.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+_.defaultType+"')");n=_}var f=_.match.slice();if(c)for(;f.length&&"string"==typeof f[0]&&1===f[0].length;)i[f.shift().charCodeAt(0)]=_;if(_.pop||_.push||_.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+_.defaultType+"')");if(_.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+_.defaultType+"')")}if(0!==f.length){c=!1,m.push(_);for(var $=0;$<f.length;$++){var d=f[$];if(s(d))if(null===u)u=d.unicode;else if(u!==d.unicode&&!1===_.fallback)throw new Error("If one rule is /u then all must be")}var h=o(f.map(l)),x=new RegExp(h);if(x.test(""))throw new Error("RegExp matches empty string: "+x);if(new RegExp("|"+h).exec("").length-1>0)throw new Error("RegExp has capture groups: "+x+"\nUse (?: … ) instead");if(!_.lineBreaks&&x.test("\n"))throw new Error("Rule should declare lineBreaks: "+x);y.push(a(h))}}var w=n&&n.fallback,v=r&&!w?"ym":"gm",k=r||w?"":"|";return!0===u&&(v+="u"),{regexp:new RegExp(o(y)+k,v),groups:m,fast:i,error:n||p}}function m(e,t,r){var s=e&&(e.push||e.next);if(s&&!r[s])throw new Error("Missing state '"+s+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}var y=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};y.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},y.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},y.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},y.prototype.popState=function(){this.setState(this.stack.pop())},y.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var b=r?function(e,t){return e.exec(t)}:function(e,t){var r=e.exec(t);return 0===r[0].length?null:r};function _(){return this.value}if(y.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},y.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var r=this.buffer;if(e!==r.length){if(o=this.fast[r.charCodeAt(e)])return this._token(o,r.charAt(e),e);var s=this.re;s.lastIndex=e;var n=b(s,r),a=this.error;if(null==n)return this._token(a,r.slice(e,r.length),e);var o=this._getGroup(n),l=n[0];return a.fallback&&n.index!==e?(this.queuedGroup=o,this.queuedText=l,this._token(a,r.slice(e,n.index),e)):this._token(o,l,e)}},y.prototype._token=function(e,t,r){var s=0;if(e.lineBreaks){var n=/\n/g,a=1;if("\n"===t)s=1;else for(;n.exec(t);)s++,a=n.lastIndex}var o={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:_,offset:r,lineBreaks:s,line:this.line,col:this.col},l=t.length;if(this.index+=l,this.line+=s,0!==s?this.col=l-a+1:this.col+=l,e.shouldThrow)throw new Error(this.formatError(o,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),o},"undefined"!=typeof Symbol&&Symbol.iterator){var f=function(e){this.lexer=e};f.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},f.prototype[Symbol.iterator]=function(){return this},y.prototype[Symbol.iterator]=function(){return new f(this)}}return y.prototype.formatError=function(e,t){if(null==e){var r=this.buffer.slice(this.index);e={text:r,offset:this.index,lineBreaks:-1===r.indexOf("\n")?0:1,line:this.line,col:this.col}}var s=Math.max(0,e.offset-e.col+1),n=e.lineBreaks?e.text.indexOf("\n"):e.text.length,a=this.buffer.substring(s,e.offset+n);return t+=" at line "+e.line+" col "+e.col+":\n\n",t+="  "+a+"\n",t+="  "+Array(e.col).join(" ")+"^"},y.prototype.clone=function(){return new y(this.states,this.state)},y.prototype.has=function(e){return!0},{compile:function(e){var t=u(c(e));return new y({start:t},"start")},states:function(e,t){var r=e.$all?c(e.$all):[];delete e.$all;var s=Object.getOwnPropertyNames(e);t||(t=s[0]);for(var n=Object.create(null),a=0;a<s.length;a++){var o=s[a];n[o]=c(e[o]).concat(r)}for(a=0;a<s.length;a++){o=s[a];for(var l=n[o],i=Object.create(null),p=0;p<l.length;p++){var b=l[p];if(b.include){var _=[p,1];if(b.include!==o&&!i[b.include]){i[b.include]=!0;var f=n[b.include];if(!f)throw new Error("Cannot include nonexistent state '"+b.include+"' (in state '"+o+"')");for(var $=0;$<f.length;$++){var d=f[$];-1===l.indexOf(d)&&_.push(d)}}l.splice.apply(l,_),p--}}}var h=Object.create(null);for(a=0;a<s.length;a++)o=s[a],h[o]=u(n[o],!0);for(a=0;a<s.length;a++){var x=s[a],w=h[x],v=w.groups;for(p=0;p<v.length;p++)m(v[p],x,h);var k=Object.getOwnPropertyNames(w.fast);for(p=0;p<k.length;p++)m(w.fast[k[p]],x,h)}return new y(h,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t=Object.create(null),r=Object.create(null),s=Object.getOwnPropertyNames(e),n=0;n<s.length;n++){var a=s[n],o=e[a];(Array.isArray(o)?o:[o]).forEach((function(e){if((r[e.length]=r[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+a+"')");t[e]=a}))}function l(e){return JSON.stringify(e)}var i="";for(var c in i+="switch (value.length) {\n",r){var p=r[c];i+="case "+c+":\n",i+="switch (value) {\n",p.forEach((function(e){var r=t[e];i+="case "+l(e)+": return "+l(r)+"\n"})),i+="}\n"}return i+="}\n",Function("value",i)}}})?s.apply(t,n):s)||(e.exports=a)},function(e,t,r){var s,n;s=this,n=function(){function e(t,r,s){return this.id=++e.highestId,this.name=t,this.symbols=r,this.postprocess=s,this}function t(e,t,r,s){this.rule=e,this.dot=t,this.reference=r,this.data=[],this.wantedBy=s,this.isComplete=this.dot===e.symbols.length}function r(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function s(e,t){this.rules=e,this.start=t||this.rules[0].name;var r=this.byName={};this.rules.forEach((function(e){r.hasOwnProperty(e.name)||(r[e.name]=[]),r[e.name].push(e)}))}function n(){this.reset("")}function a(e,t,a){if(e instanceof s){var o=e;a=t}else o=s.fromCompiled(e,t);for(var l in this.grammar=o,this.options={keepHistory:!1,lexer:o.lexer||new n},a||{})this.options[l]=a[l];this.lexer=this.options.lexer,this.lexerState=void 0;var i=new r(o,0);this.table=[i],i.wants[o.start]=[],i.predict(o.start),i.process(),this.current=0}function o(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t=void 0===e?this.symbols.map(o).join(" "):this.symbols.slice(0,e).map(o).join(" ")+" ● "+this.symbols.slice(e).map(o).join(" ");return this.name+" → "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var r=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return r.left=this,r.right=e,r.isComplete&&(r.data=r.build(),r.right=void 0),r},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,a.fail))},r.prototype.process=function(e){for(var t=this.states,r=this.wants,s=this.completed,n=0;n<t.length;n++){var o=t[n];if(o.isComplete){if(o.finish(),o.data!==a.fail){for(var l=o.wantedBy,i=l.length;i--;){var c=l[i];this.complete(c,o)}if(o.reference===this.index){var p=o.rule.name;(this.completed[p]=this.completed[p]||[]).push(o)}}}else{if("string"!=typeof(p=o.rule.symbols[o.dot])){this.scannable.push(o);continue}if(r[p]){if(r[p].push(o),s.hasOwnProperty(p)){var u=s[p];for(i=0;i<u.length;i++){var m=u[i];this.complete(o,m)}}}else r[p]=[o],this.predict(p)}}},r.prototype.predict=function(e){for(var r=this.grammar.byName[e]||[],s=0;s<r.length;s++){var n=r[s],a=this.wants[e],o=new t(n,0,this.index,a);this.states.push(o)}},r.prototype.complete=function(e,t){var r=e.nextState(t);this.states.push(r)},s.fromCompiled=function(t,r){var n=t.Lexer;t.ParserStart&&(r=t.ParserStart,t=t.ParserRules);var a=new s(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),r);return a.lexer=n,a},n.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},n.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},n.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},n.prototype.formatError=function(e,t){var r=this.buffer;if("string"==typeof r){var s=r.split("\n").slice(Math.max(0,this.line-5),this.line),n=r.indexOf("\n",this.index);-1===n&&(n=r.length);var a=this.index-this.lastLineBreak,o=String(this.line).length;return t+=" at line "+this.line+" col "+a+":\n\n",t+=s.map((function(e,t){return l(this.line-s.length+t+1,o)+" "+e}),this).join("\n"),t+="\n"+l("",o+a)+"^\n"}return t+" at index "+(this.index-1);function l(e,t){var r=String(e);return Array(t-r.length+1).join(" ")+r}},a.fail={},a.prototype.feed=function(e){var t,s=this.lexer;for(s.reset(e,this.lexerState);;){try{if(!(t=s.next()))break}catch(e){var a=new r(this.grammar,this.current+1);throw this.table.push(a),(i=new Error(this.reportLexerError(e))).offset=this.current,i.token=e.token,i}var o=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var l=this.current+1;a=new r(this.grammar,l),this.table.push(a);for(var i,c=void 0!==t.text?t.text:t.value,p=s.constructor===n?t.value:t,u=o.scannable,m=u.length;m--;){var y=u[m],b=y.rule.symbols[y.dot];if(b.test?b.test(p):b.type?b.type===t.type:b.literal===c){var _=y.nextState({data:p,token:t,isToken:!0,reference:l-1});a.states.push(_)}}if(a.process(),0===a.states.length)throw(i=new Error(this.reportError(t))).offset=this.current,i.token=t,i;this.options.keepHistory&&(o.lexerState=s.save()),this.current++}return o&&(this.lexerState=s.save()),this.results=this.finish(),this},a.prototype.reportLexerError=function(e){var t,r,s=e.token;return s?(t="input "+JSON.stringify(s.text[0])+" (lexer error)",r=this.lexer.formatError(s,"Syntax error")):(t="input (lexer error)",r=e.message),this.reportErrorCommon(r,t)},a.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),r=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(r,t)},a.prototype.reportErrorCommon=function(e,t){var r=[];r.push(e);var s=this.table.length-2,n=this.table[s],a=n.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t}));return 0===a.length?(r.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(n.states,r)):(r.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),a.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],s=t.rule.symbols[t.dot],n=this.getSymbolDisplay(s);r.push("A "+n+" based on:"),this.displayStateStack(e,r)}),this)),r.push(""),r.join("\n")},a.prototype.displayStateStack=function(e,t){for(var r,s=0,n=0;n<e.length;n++){var a=e[n],o=a.rule.toString(a.dot);o===r?s++:(s>0&&t.push("    ^ "+s+" more lines identical to this"),s=0,t.push("    "+o)),r=o}},a.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},a.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var r=e.wantedBy[0],s=[e].concat(t),n=this.buildFirstStateStack(r,s);return null===n?null:[e].concat(n)},a.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},a.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},a.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},a.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(r){r.rule.name===t&&r.dot===r.rule.symbols.length&&0===r.reference&&r.data!==a.fail&&e.push(r)})),e.map((function(e){return e.data}))},{Parser:a,Grammar:s,Rule:e}},e.exports?e.exports=n():s.nearley=n()},function(e,t,r){var s=r(21),n=Math.max;e.exports=function(e,t,r){return t=n(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,l=n(a.length-t,0),i=Array(l);++o<l;)i[o]=a[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=a[o];return c[t]=r(i),s(e,this,c)}}},function(e,t,r){var s=r(46),n=r(56)(s);e.exports=n},function(e,t,r){var s=r(47),n=r(24),a=r(23),o=n?function(e,t){return n(e,"toString",{configurable:!0,enumerable:!1,value:s(t),writable:!0})}:a;e.exports=o},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,r){var s=r(17),n=r(52),a=r(6),o=r(54),l=/^\[object .+?Constructor\]$/,i=Function.prototype,c=Object.prototype,p=i.toString,u=c.hasOwnProperty,m=RegExp("^"+p.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||n(e))&&(s(e)?m:l).test(o(e))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var s=r(25),n=Object.prototype,a=n.hasOwnProperty,o=n.toString,l=s?s.toStringTag:void 0;e.exports=function(e){var t=a.call(e,l),r=e[l];try{e[l]=void 0;var s=!0}catch(e){}var n=o.call(e);return s&&(t?e[l]=r:delete e[l]),n}},function(e,t){var r=Object.prototype.toString;e.exports=function(e){return r.call(e)}},function(e,t,r){var s,n=r(53),a=(s=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";e.exports=function(e){return!!a&&a in e}},function(e,t,r){var s=r(7)["__core-js_shared__"];e.exports=s},function(e,t){var r=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t){var r=Date.now;e.exports=function(e){var t=0,s=0;return function(){var n=r(),a=16-(n-s);if(s=n,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,r){var s=r(27),n=r(6);e.exports=function e(t,r,a,o,l,i){return n(t)&&n(r)&&(i.set(r,t),s(t,r,void 0,e,i),i.delete(r)),t}},function(e,t,r){var s=r(10),n=r(64),a=r(65),o=r(66),l=r(67),i=r(68);function c(e){var t=this.__data__=new s(e);this.size=t.size}c.prototype.clear=n,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=l,c.prototype.set=i,e.exports=c},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,r){var s=r(11),n=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=s(t,e);return!(r<0)&&(r==t.length-1?t.pop():n.call(t,r,1),--this.size,!0)}},function(e,t,r){var s=r(11);e.exports=function(e){var t=this.__data__,r=s(t,e);return r<0?void 0:t[r][1]}},function(e,t,r){var s=r(11);e.exports=function(e){return s(this.__data__,e)>-1}},function(e,t,r){var s=r(11);e.exports=function(e,t){var r=this.__data__,n=s(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},function(e,t,r){var s=r(10);e.exports=function(){this.__data__=new s,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var s=r(10),n=r(28),a=r(69);e.exports=function(e,t){var r=this.__data__;if(r instanceof s){var o=r.__data__;if(!n||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(o)}return r.set(e,t),this.size=r.size,this}},function(e,t,r){var s=r(70),n=r(77),a=r(79),o=r(80),l=r(81);function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}i.prototype.clear=s,i.prototype.delete=n,i.prototype.get=a,i.prototype.has=o,i.prototype.set=l,e.exports=i},function(e,t,r){var s=r(71),n=r(10),a=r(28);e.exports=function(){this.size=0,this.__data__={hash:new s,map:new(a||n),string:new s}}},function(e,t,r){var s=r(72),n=r(73),a=r(74),o=r(75),l=r(76);function i(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}i.prototype.clear=s,i.prototype.delete=n,i.prototype.get=a,i.prototype.has=o,i.prototype.set=l,e.exports=i},function(e,t,r){var s=r(13);e.exports=function(){this.__data__=s?s(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,r){var s=r(13),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(s){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(t,e)?t[e]:void 0}},function(e,t,r){var s=r(13),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return s?void 0!==t[e]:n.call(t,e)}},function(e,t,r){var s=r(13);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=s&&void 0===t?"__lodash_hash_undefined__":t,this}},function(e,t,r){var s=r(14);e.exports=function(e){var t=s(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,r){var s=r(14);e.exports=function(e){return s(this,e).get(e)}},function(e,t,r){var s=r(14);e.exports=function(e){return s(this,e).has(e)}},function(e,t,r){var s=r(14);e.exports=function(e,t){var r=s(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},function(e,t,r){var s=r(83)();e.exports=s},function(e,t){e.exports=function(e){return function(t,r,s){for(var n=-1,a=Object(t),o=s(t),l=o.length;l--;){var i=o[e?l:++n];if(!1===r(a[i],i,a))break}return t}}},function(e,t,r){var s=r(29),n=r(85),a=r(86),o=r(89),l=r(90),i=r(32),c=r(33),p=r(94),u=r(35),m=r(17),y=r(6),b=r(96),_=r(36),f=r(37),$=r(100);e.exports=function(e,t,r,d,h,x,w){var v=f(e,r),k=f(t,r),g=w.get(k);if(g)s(e,r,g);else{var E=x?x(v,k,r+"",e,t,w):void 0,A=void 0===E;if(A){var O=c(k),S=!O&&u(k),T=!O&&!S&&_(k);E=k,O||S||T?c(v)?E=v:p(v)?E=o(v):S?(A=!1,E=n(k,!0)):T?(A=!1,E=a(k,!0)):E=[]:b(k)||i(k)?(E=v,i(v)?E=$(v):y(v)&&!m(v)||(E=l(k))):A=!1}A&&(w.set(k,E),h(E,k,d,x,w),w.delete(k)),s(e,r,E)}}},function(e,t,r){(function(e){var s=r(7),n=t&&!t.nodeType&&t,a=n&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===n?s.Buffer:void 0,l=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,s=l?l(r):new e.constructor(r);return e.copy(s),s}}).call(this,r(19)(e))},function(e,t,r){var s=r(87);e.exports=function(e,t){var r=t?s(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},function(e,t,r){var s=r(88);e.exports=function(e){var t=new e.constructor(e.byteLength);return new s(t).set(new s(e)),t}},function(e,t,r){var s=r(7).Uint8Array;e.exports=s},function(e,t){e.exports=function(e,t){var r=-1,s=e.length;for(t||(t=Array(s));++r<s;)t[r]=e[r];return t}},function(e,t,r){var s=r(91),n=r(30),a=r(31);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:s(n(e))}},function(e,t,r){var s=r(6),n=Object.create,a=function(){function e(){}return function(t){if(!s(t))return{};if(n)return n(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=a},function(e,t){e.exports=function(e,t){return function(r){return e(t(r))}}},function(e,t,r){var s=r(9),n=r(8);e.exports=function(e){return n(e)&&"[object Arguments]"==s(e)}},function(e,t,r){var s=r(20),n=r(8);e.exports=function(e){return n(e)&&s(e)}},function(e,t){e.exports=function(){return!1}},function(e,t,r){var s=r(9),n=r(30),a=r(8),o=Function.prototype,l=Object.prototype,i=o.toString,c=l.hasOwnProperty,p=i.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=s(e))return!1;var t=n(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)==p}},function(e,t,r){var s=r(9),n=r(34),a=r(8),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&n(e.length)&&!!o[s(e)]}},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,r){(function(e){var s=r(26),n=t&&!t.nodeType&&t,a=n&&"object"==typeof e&&e&&!e.nodeType&&e,o=a&&a.exports===n&&s.process,l=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=l}).call(this,r(19)(e))},function(e,t,r){var s=r(101),n=r(38);e.exports=function(e){return s(e,n(e))}},function(e,t,r){var s=r(102),n=r(18);e.exports=function(e,t,r,a){var o=!r;r||(r={});for(var l=-1,i=t.length;++l<i;){var c=t[l],p=a?a(r[c],e[c],c,r,e):void 0;void 0===p&&(p=e[c]),o?n(r,c,p):s(r,c,p)}return r}},function(e,t,r){var s=r(18),n=r(12),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var o=e[t];a.call(e,t)&&n(o,r)&&(void 0!==r||t in e)||s(e,t,r)}},function(e,t,r){var s=r(104),n=r(32),a=r(33),o=r(35),l=r(39),i=r(36),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),p=!r&&n(e),u=!r&&!p&&o(e),m=!r&&!p&&!u&&i(e),y=r||p||u||m,b=y?s(e.length,String):[],_=b.length;for(var f in e)!t&&!c.call(e,f)||y&&("length"==f||u&&("offset"==f||"parent"==f)||m&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||l(f,_))||b.push(f);return b}},function(e,t){e.exports=function(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}},function(e,t,r){var s=r(6),n=r(31),a=r(106),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!s(e))return a(e);var t=n(e),r=[];for(var l in e)("constructor"!=l||!t&&o.call(e,l))&&r.push(l);return r}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},function(e,t,r){var s=r(27),n=r(108)((function(e,t,r,n){s(e,t,r,n)}));e.exports=n},function(e,t,r){var s=r(22),n=r(109);e.exports=function(e){return s((function(t,r){var s=-1,a=r.length,o=a>1?r[a-1]:void 0,l=a>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,l&&n(r[0],r[1],l)&&(o=a<3?void 0:o,a=1),t=Object(t);++s<a;){var i=r[s];i&&e(t,i,s,o)}return t}))}},function(e,t,r){var s=r(12),n=r(20),a=r(39),o=r(6);e.exports=function(e,t,r){if(!o(r))return!1;var l=typeof t;return!!("number"==l?n(r)&&a(t,r.length):"string"==l&&t in r)&&s(r[t],e)}},function(e,t,r){"use strict";r.r(t);var s=r(3);function n(e,t,r,s){return new(r||(r=Promise))((function(n,a){function o(e){try{i(s.next(e))}catch(e){a(e)}}function l(e){try{i(s.throw(e))}catch(e){a(e)}}function i(e){e.done?n(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(o,l)}i((s=s.apply(e,t||[])).next())}))}Object.create;Object.create;var a,o,l,i,c,p,u,m=r(5);!function(e){e.NATIVE="native",e.HTTP="http"}(a||(a={})),function(e){e[e.TIMESERIES=0]="TIMESERIES",e[e.TABLE=1]="TABLE",e[e.LOGS=2]="LOGS"}(o||(o={})),function(e){e.SQL="sql",e.Builder="builder"}(l||(l={})),function(e){e.List="list",e.Aggregate="aggregate",e.Trend="trend"}(i||(i={})),function(e){e.Sum="sum",e.Average="avg",e.Min="min",e.Max="max",e.Count="count",e.Any="any"}(c||(c={})),function(e){e.ASC="ASC",e.DESC="DESC"}(p||(p={})),function(e){e.IsNull="IS NULL",e.IsNotNull="IS NOT NULL",e.Equals="=",e.NotEquals="!=",e.LessThan="<",e.LessThanOrEqual="<=",e.GreaterThan=">",e.GreaterThanOrEqual=">=",e.Like="LIKE",e.NotLike="NOT LIKE",e.In="IN",e.NotIn="NOT IN",e.WithInGrafanaTimeRange="WITH IN DASHBOARD TIME RANGE",e.OutsideGrafanaTimeRange="OUTSIDE DASHBOARD TIME RANGE"}(u||(u={}));l.Builder;var y={queryType:l.Builder,rawSql:"",builderOptions:{mode:i.List,fields:[],limit:100},format:o.TABLE},b=(l.SQL,o.TABLE,r(15));function _(e){var t,r,s=function(e){for(var t,r,s=[],n=/(\$__|\$|default)/gi;null!==(t=n.exec(e));)s.push({startIndex:t.index,name:t[0],replacementName:""});for(var a=s.length-1;a>=0;a--){var o=s[a].startIndex,l="f"+(Math.random()+1).toString(36).substring(7);s[a].replacementName=l,e=e.substring(0,o)+l+e.substring(o+s[a].name.length)}try{r=Object(b.parseFirst)(e)}catch(e){return{}}return Object(b.astMapper)((function(e){return{tableRef:function(t){var r=s.find((function(e){return e.replacementName===t.schema}));if(r)return Object.assign(Object.assign({},t),{schema:r.name});var n=s.find((function(e){return e.replacementName===t.name}));return n?Object.assign(Object.assign({},t),{name:n.name}):e.super().tableRef(t)},ref:function(t){var r=s.find((function(e){return e.replacementName===t.name}));return r?Object.assign(Object.assign({},t),{name:r.name}):e.super().ref(t)},call:function(t){var r=s.find((function(e){return e.replacementName===t.function.name}));return r?Object.assign(Object.assign({},t),{function:Object.assign(Object.assign({},t.function),{name:r.name})}):e.super().call(t)}}})).statement(r)}(e);if((null===(t=s.from)||void 0===t?void 0:t.length)&&(null===(r=s.from)||void 0===r?void 0:r.length)>0)switch(s.from[0].type){case"table":var n=s.from[0],a="".concat(n.name.schema?"".concat(n.name.schema,"."):"").concat(n.name.name),o=new RegExp("\\b".concat(a,"\\b"),"gi").exec(e);return o?o[0]:a;case"statement":var l=s.from[0];return _(b.toSql.statement(l.statement))}return""}function f(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var $=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetTable=""}var t,r,s;return t=e,(r=[{key:"setTargetTable",value:function(e){this._targetTable=e}},{key:"setTargetTableFromQuery",value:function(e){if(this._targetTable=_(e),""===this._targetTable)throw new Error("Failed to get table from adhoc query.")}},{key:"apply",value:function(e,t){if(""===e||!t||0===t.length)return e;var r=t[0];if(r.key.includes(".")&&(this._targetTable=r.key.split(".")[0]),""===this._targetTable||!e.match(new RegExp(".*\\b".concat(this._targetTable,"\\b.*"),"gi")))return e;var s=t.map((function(e,r){var s=e.key.includes(".")?e.key.split(".")[1]:e.key,n=isNaN(Number(e.value))?"\\'".concat(e.value,"\\'"):Number(e.value),a=r!==t.length-1?e.condition?e.condition:"AND":"";return" ".concat(s," ").concat(e.operator," ").concat(n," ").concat(a)})).join("");return e=e.replace(";",""),"".concat(e," settings additional_table_filters={'").concat(this._targetTable,"' : '").concat(s,"'}")}}])&&f(t.prototype,r),s&&f(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}(),d=r(2);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){v=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function i(e,t,r,s){var n=t&&t.prototype instanceof u?t:u,a=Object.create(n.prototype),o=new E(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return O()}for(r.method=n,r.arg=a;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var i=c(e,t,r);if("normal"===i.type){if(s=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(s="completed",r.method="throw",r.arg=i.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function u(){}function m(){}function y(){}var b={};l(b,n,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(A([])));f&&f!==t&&r.call(f,n)&&(b=f);var $=y.prototype=u.prototype=Object.create(b);function d(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function h(e,t){var s;this._invoke=function(n,a){function o(){return new t((function(s,o){!function s(n,a,o,l){var i=c(e[n],e,a);if("throw"!==i.type){var p=i.arg,u=p.value;return u&&"object"==w(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):t.resolve(u).then((function(e){p.value=e,o(p)}),(function(e){return s("throw",e,o,l)}))}l(i.arg)}(n,a,s,o)}))}return s=s?s.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function g(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function A(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function t(){for(;++s<e.length;)if(r.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return m.prototype=y,l($,"constructor",y),l(y,"constructor",m),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create($),e},e.awrap=function(e){return{__await:e}},d(h.prototype),l(h.prototype,a,(function(){return this})),e.AsyncIterator=h,e.async=function(t,r,s,n,a){void 0===a&&(a=Promise);var o=new h(i(t,r,s,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},d($),l($,o,"Generator"),l($,n,(function(){return this})),l($,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},e.values=A,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(g),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(r,s){return o.type="throw",o.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(l&&i){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),g(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;g(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:A(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function k(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function g(){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var s=E(e,t);if(s){var n=Object.getOwnPropertyDescriptor(s,t);return n.get?n.get.call(arguments.length<3?e:r):n.value}}).apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}function A(e,t){return(A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,s=T(e);if(t){var n=T(this).constructor;r=Reflect.construct(s,arguments,n)}else r=s.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C,L,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A(e,t)}(i,e);var t,r,a,o=O(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).annotations={},t.skipAdHocFilter=!1,t.adHocFiltersStatus=L.none,t.adHocCHVerReq={major:22,minor:7},t.settings=e,t.adHocFilter=new $,t}return t=i,(r=[{key:"metricFindQuery",value:function(e,t){var r,a,o,i,c;return n(this,void 0,void 0,v().mark((function n(){var p,u,m,y;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.adHocFiltersStatus!==L.none){n.next=4;break}return n.next=3,this.canUseAdhocFilters();case 3:this.adHocFiltersStatus=n.sent;case 4:if((p=Object(d.isString)(e)?{rawSql:e,queryType:l.SQL}:e).queryType===l.SQL||p.queryType===l.Builder||!p.queryType){n.next=7;break}return n.abrupt("return",[]);case 7:if(p.rawSql){n.next=9;break}return n.abrupt("return",[]);case 9:return u=Object.assign(Object.assign({},p),{queryType:p.queryType||l.SQL}),n.next=12,this.runQuery(u,t);case 12:if(m=n.sent,0!==(null===(r=m.fields)||void 0===r?void 0:r.length)){n.next=15;break}return n.abrupt("return",[]);case 15:if(1!==(null===(a=null==m?void 0:m.fields)||void 0===a?void 0:a.length)){n.next=17;break}return n.abrupt("return",Object(s.vectorator)(null===(o=null==m?void 0:m.fields[0])||void 0===o?void 0:o.values).map((function(e){return{text:e,value:e}})));case 17:return y=null===(i=null==m?void 0:m.fields[0])||void 0===i?void 0:i.values,n.abrupt("return",Object(s.vectorator)(null===(c=null==m?void 0:m.fields[1])||void 0===c?void 0:c.values).map((function(e,t){return{text:e,value:y.get(t)}})));case 19:case"end":return n.stop()}}),n,this)})))}},{key:"applyTemplateVariables",value:function(e,t){var r,s=e.rawSql||"",n=Object(m.getTemplateSrv)();if(!this.skipAdHocFilter){var a=null===(r=n)||void 0===r?void 0:r.getAdhocFilters(this.name);if(this.adHocFiltersStatus===L.disabled&&(null==a?void 0:a.length)>0)throw new Error("Unable to apply ad hoc filters. Upgrade ClickHouse to >=".concat(this.adHocCHVerReq.major,".").concat(this.adHocCHVerReq.minor," or remove ad hoc filters for the dashboard."));s=this.adHocFilter.apply(s,a)}return this.skipAdHocFilter=!1,s=this.applyConditionalAll(s,Object(m.getTemplateSrv)().getVariables()),Object.assign(Object.assign({},e),{rawSql:this.replace(s,t)||""})}},{key:"applyConditionalAll",value:function(e,t){var r=this;if(!e)return e;for(var s="$__conditionalAll(",n=e.lastIndexOf(s),a=function(){var a=r.getMacroArgs(e,n+s.length-1);if(2!==a.length)return{v:e};var o=a[1].trim(),l=t.find((function(e){return e.name===o.substring(1,o.length)})),i=a[0];"$__all"===(null==l?void 0:l.current.value.toString())&&(i="1=1"),e=e.replace("".concat(s).concat(a[0],",").concat(a[1],")"),i),n=e.lastIndexOf(s)};-1!==n;){var o=a();if("object"===w(o))return o.v}return e}},{key:"getMacroArgs",value:function(e,t){for(var r,s=[],n=/\(|\)|,/g,a=0,o=1,l=e.substring(t,e.length);null!==(r=n.exec(l));){var i=r[0];if("("===i?a++:")"===i&&a--,","===i&&1===a&&(s.push(l.substring(o,n.lastIndex-1)),o=n.lastIndex),0===a)return s.push(l.substring(o,n.lastIndex-1)),s}return[]}},{key:"replace",value:function(e,t){return void 0!==e?Object(m.getTemplateSrv)().replace(e,t,this.format):e}},{key:"format",value:function(e){return Array.isArray(e)?"'".concat(e.join("','"),"'"):e}},{key:"getDefaultDatabase",value:function(){return this.settings.jsonData.defaultDatabase}},{key:"fetchDatabases",value:function(){return n(this,void 0,void 0,v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchData("SHOW DATABASES"));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"fetchTables",value:function(e){return n(this,void 0,void 0,v().mark((function t(){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e?"SHOW TABLES FROM ".concat(e):"SHOW TABLES",t.abrupt("return",this.fetchData(r));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"fetchEntities",value:function(){return n(this,void 0,void 0,v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchTables());case 1:case"end":return e.stop()}}),e,this)})))}},{key:"fetchFields",value:function(e,t){return n(this,void 0,void 0,v().mark((function r(){return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.fetchData("DESC TABLE ".concat(e,".").concat(t)));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"fetchFieldsFull",value:function(e,t){var r;return n(this,void 0,void 0,v().mark((function n(){var a,o,l,i;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Boolean(e)?"".concat(e,"."):"",o="DESC TABLE ".concat(a).concat(t),n.next=4,this.runQuery({rawSql:o});case 4:if(l=n.sent,0!==(null===(r=l.fields)||void 0===r?void 0:r.length)){n.next=7;break}return n.abrupt("return",[]);case 7:return i=new s.DataFrameView(l),n.abrupt("return",i.map((function(e){return{name:e[0],type:e[1],label:e[0],picklistValues:[]}})));case 9:case"end":return n.stop()}}),n,this)})))}},{key:"fetchData",value:function(e){return n(this,void 0,void 0,v().mark((function t(){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runQuery({rawSql:e});case 2:return r=t.sent,t.abrupt("return",this.values(r));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"query",value:function(e){return g(T(i.prototype),"query",this).call(this,Object.assign(Object.assign({},e),{targets:e.targets.filter((function(e){return!0!==e.hide}))}))}},{key:"runQuery",value:function(e,t){var r=this;return new Promise((function(s){var n={targets:[Object.assign(Object.assign({},e),{refId:String(Math.random())})],range:t?t.range:Object(m.getTemplateSrv)().timeRange};r.query(n).subscribe((function(e){s(e.data[0]||{fields:[]})}))}))}},{key:"values",value:function(e){var t,r;return 0===(null===(t=e.fields)||void 0===t?void 0:t.length)?[]:Object(s.vectorator)(null===(r=null==e?void 0:e.fields[0])||void 0===r?void 0:r.values).map((function(e){return e}))}},{key:"getTagKeys",value:function(){return n(this,void 0,void 0,v().mark((function e(){var t,r,n,a;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.adHocFiltersStatus!==L.disabled&&this.adHocFiltersStatus!==L.none){e.next=6;break}return e.next=3,this.canUseAdhocFilters();case 3:if(this.adHocFiltersStatus=e.sent,this.adHocFiltersStatus!==L.disabled){e.next=6;break}return e.abrupt("return",{});case 6:return e.next=8,this.fetchTags();case 8:if(t=e.sent,r=t.type,n=t.frame,r!==C.query){e.next=13;break}return e.abrupt("return",n.fields.map((function(e){return{text:e.name}})));case 13:return a=new s.DataFrameView(n),e.abrupt("return",a.map((function(e){return{text:"".concat(e[2],".").concat(e[0])}})));case 15:case"end":return e.stop()}}),e,this)})))}},{key:"getTagValues",value:function(e){var t=e.key;return n(this,void 0,void 0,v().mark((function e(){var r,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getTagSource(),s=r.type,this.skipAdHocFilter=!0,s!==C.query){e.next=4;break}return e.abrupt("return",this.fetchTagValuesFromQuery(t));case 4:return e.abrupt("return",this.fetchTagValuesFromSchema(t));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"fetchTagValuesFromSchema",value:function(e){var t;return n(this,void 0,void 0,v().mark((function r(){var n,a,o,l,i,c,p,u,m,y;return v().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.getTagSource(),a=n.from,o=e.split("."),l=h(o,2),i=l[0],c=l[1],p=(null==a?void 0:a.includes("."))?"".concat(a.split(".")[0],".").concat(i):i,u="select distinct ".concat(c," from ").concat(p," limit 1000"),r.next=6,this.runQuery({rawSql:u});case 6:if(m=r.sent,0!==(null===(t=m.fields)||void 0===t?void 0:t.length)){r.next=9;break}return r.abrupt("return",[]);case 9:return y=m.fields[0],r.abrupt("return",Object(s.vectorator)(y.values).filter((function(e){return null!==e})).map((function(e){return{text:String(e)}})));case 11:case"end":return r.stop()}}),r,this)})))}},{key:"fetchTagValuesFromQuery",value:function(e){return n(this,void 0,void 0,v().mark((function t(){var r,n,a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetchTags();case 2:if(r=t.sent,n=r.frame,!(a=n.fields.find((function(t){return t.name===e})))){t.next=7;break}return t.abrupt("return",Object(s.vectorator)(a.values).filter((function(e){return null!==e})).map((function(e){return{text:String(e)}})));case 7:return t.abrupt("return",[]);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"fetchTags",value:function(){return n(this,void 0,void 0,v().mark((function e(){var t,r,s,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getTagSource(),this.skipAdHocFilter=!0,void 0!==t.source){e.next=9;break}return this.adHocFilter.setTargetTable("default"),e.next=7,this.runQuery({rawSql:"SELECT name, type, table FROM system.columns"});case 7:return r=e.sent,e.abrupt("return",{type:C.schema,frame:r});case 9:return t.type===C.query?this.adHocFilter.setTargetTableFromQuery(t.source):((null==(s=t.from)?void 0:s.includes("."))&&(s=s.split(".")[1]),this.adHocFilter.setTargetTable(s||"")),e.next=12,this.runQuery({rawSql:t.source});case 12:return n=e.sent,e.abrupt("return",{type:t.type,frame:n});case 14:case"end":return e.stop()}}),e,this)})))}},{key:"getTagSource",value:function(){var e="$clickhouse_adhoc_query",t=this.getDefaultDatabase(),r=Object(m.getTemplateSrv)().replace(e);if(r===e&&Object(d.isEmpty)(t))return{type:C.schema,source:void 0};if((r=r===e?t:r).toLowerCase().startsWith("select"))return{type:C.query,source:r};if(!r.includes(".")){var s="SELECT name, type, table FROM system.columns WHERE database IN ('".concat(r,"')");return{type:C.schema,source:s,from:r}}var n=h(r.split("."),2),a=n[0],o=n[1],l="SELECT name, type, table FROM system.columns WHERE database IN ('".concat(a,"') AND table = '").concat(o,"'");return{type:C.schema,source:l,from:r}}},{key:"canUseAdhocFilters",value:function(){return n(this,void 0,void 0,v().mark((function e(){var t,r,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.skipAdHocFilter=!0,e.next=3,this.fetchData("SELECT version()");case 3:return t=e.sent,e.prev=4,r=t[0].split("."),s={major:Number.parseInt(r[0],10),minor:Number.parseInt(r[1],10)},e.abrupt("return",s.major>this.adHocCHVerReq.major||s.major===this.adHocCHVerReq.major&&s.minor>=this.adHocCHVerReq.minor?L.enabled:L.disabled);case 10:throw e.prev=10,e.t0=e.catch(4),e.t0;case 14:case"end":return e.stop()}}),e,this,[[4,10]])})))}}])&&k(t.prototype,r),a&&k(t,a),Object.defineProperty(t,"prototype",{writable:!1}),i}(m.DataSourceWithBackend);!function(e){e[e.query=0]="query",e[e.schema=1]="schema"}(C||(C={})),function(e){e[e.none=0]="none",e[e.enabled=1]="enabled",e[e.disabled=2]="disabled"}(L||(L={}));var I=r(0),j=r.n(I),R=r(1),q=function(e){var t=e.hasCert,r=e.label,s=e.onChange,n=e.onClick,a=e.placeholder;return j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:12},r),t?j.a.createElement(j.a.Fragment,null,j.a.createElement(R.Input,{type:"text",disabled:!0,value:"configured",width:24}),j.a.createElement(R.Button,{variant:"secondary",onClick:n,style:{marginLeft:4}},"Reset")):j.a.createElement(R.TextArea,{rows:7,onChange:s,placeholder:a,required:!0}))},F={ConfigEditor:{ServerAddress:{label:"Server address",placeholder:"Server TCP address",tooltip:"ClickHouse native TCP server address"},ServerPort:{label:"Server port",placeholder:function(e){return"Typically ".concat("true"===e?"9440":"9000")},tooltip:"ClickHouse native TCP port. Typically 9000 for unsecure, 9440 for secure"},Protocol:{label:"Protocol",tooltip:"Native or HTTP for transport"},Username:{label:"Username",placeholder:"Username",tooltip:"ClickHouse username"},Password:{label:"Password",placeholder:"Password",tooltip:"ClickHouse password"},TLSSkipVerify:{label:"Skip TLS Verify",tooltip:"Skip TLS Verify"},TLSClientAuth:{label:"TLS Client Auth",tooltip:"TLS Client Auth"},TLSAuthWithCACert:{label:"With CA Cert",tooltip:"Needed for verifying self-signed TLS Certs"},TLSCACert:{label:"CA Cert",placeholder:"CA Cert. Begins with -----BEGIN CERTIFICATE-----"},TLSClientCert:{label:"Client Cert",placeholder:"Client Cert. Begins with -----BEGIN CERTIFICATE-----"},TLSClientKey:{label:"Client Key",placeholder:"Client Key. Begins with -----BEGIN RSA PRIVATE KEY-----"},DefaultDatabase:{label:"Default database",placeholder:"Default database",tooltip:"Default database to be used. Can be empty."},Timeout:{label:"Dial Timeout (seconds)",placeholder:"10",tooltip:"Timeout in seconds for connection"},QueryTimeout:{label:"Query Timeout (seconds)",placeholder:"60",tooltip:"Timeout in seconds for read queries"},Secure:{label:"Secure Connection",tooltip:"Toggle on if the connection is secure"},Validate:{label:"Validate SQL",tooltip:"Validate Sql in the editor."}},QueryEditor:{CodeEditor:{input:function(){return".monaco-editor textarea"},container:"data-testid-code-editor-container",Expand:"data-testid-code-editor-expand-button"},Types:{label:"Query Type",tooltip:"Query Type",options:{SQLEditor:"SQL Editor",QueryBuilder:"Query Builder"},switcher:{title:"Are you sure?",body:"Queries that are too complex for the Query Builder will be altered.",confirmText:"Continue",dismissText:"Cancel"}},QueryBuilder:{TYPES:{label:"Show as",tooltip:"Show as",options:{LIST:"Table",AGGREGATE:"Aggregate",TREND:"Time Series"}},DATABASE:{label:"Database",tooltip:"Clickhouse database to query from"},FROM:{label:"Table",tooltip:"Clickhouse table to query from"},SELECT:{label:"Fields",tooltipTable:"List of fields to show",tooltipAggregate:"List of metrics to show. Use any of the given aggregation along with the field",ALIAS:{label:"as",tooltip:"alias"},AddLabel:"Field",RemoveLabel:""},AGGREGATES:{label:"Aggregates",tooltipTable:"Aggregate functions to use",tooltipAggregate:"Aggregate functions to use",ALIAS:{label:"as",tooltip:"alias"},AddLabel:"Aggregate",RemoveLabel:""},WHERE:{label:"Filters",tooltip:"List of filters",AddLabel:"Filter",RemoveLabel:""},GROUP_BY:{label:"Group by",tooltip:"Group the results by specific field"},ORDER_BY:{label:"Order by",tooltip:"Order by field",AddLabel:"Order by",RemoveLabel:""},LIMIT:{label:"Limit",tooltip:"Number of records/results to show."},TIME_FIELD:{label:"Time field",tooltip:"Select the time field for trending over time"},PREVIEW:{label:"SQL Preview",tooltip:"SQL Preview. You can safely switch to SQL Editor to customize the generated query"}}}},P=F;function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var U;function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(){M=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function i(e,t,r,s){var n=t&&t.prototype instanceof u?t:u,a=Object.create(n.prototype),o=new k(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return E()}for(r.method=n,r.arg=a;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var i=c(e,t,r);if("normal"===i.type){if(s=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(s="completed",r.method="throw",r.arg=i.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function u(){}function m(){}function y(){}var b={};l(b,n,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(g([])));f&&f!==t&&r.call(f,n)&&(b=f);var $=y.prototype=u.prototype=Object.create(b);function d(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function h(e,t){var s;this._invoke=function(n,a){function o(){return new t((function(s,o){!function s(n,a,o,l){var i=c(e[n],e,a);if("throw"!==i.type){var p=i.arg,u=p.value;return u&&"object"==D(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):t.resolve(u).then((function(e){p.value=e,o(p)}),(function(e){return s("throw",e,o,l)}))}l(i.arg)}(n,a,s,o)}))}return s=s?s.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function g(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function t(){for(;++s<e.length;)if(r.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,l($,"constructor",y),l(y,"constructor",m),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create($),e},e.awrap=function(e){return{__await:e}},d(h.prototype),l(h.prototype,a,(function(){return this})),e.AsyncIterator=h,e.async=function(t,r,s,n,a){void 0===a&&(a=Promise);var o=new h(i(t,r,s,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},d($),l($,o,"Generator"),l($,n,(function(){return this})),l($,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},e.values=g,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(r,s){return o.type="throw",o.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(l&&i){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;v(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}!function(e){e[e.FIELD=3]="FIELD",e[e.DATABASE=8]="DATABASE",e[e.TABLE=5]="TABLE",e[e.VARIABLE=4]="VARIABLE"}(U||(U={}));var G,H,z,W,K,Q,V,Y,J,X,Z,ee=r(4);function te(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var re={Common:{check:Object(ee.css)(G||(G=te(["\n      margin-top: 5px;\n    "]))),wrapper:Object(ee.css)(H||(H=te(["\n      position: relative;\n      width: 100%;\n    "]))),smallBtn:Object(ee.css)(z||(z=te(["\n      margin-top: 5px;\n      margin-inline: 5px;\n    "]))),selectWrapper:Object(ee.css)(W||(W=te(["\n      width: 100%;\n    "]))),inlineSelect:Object(ee.css)(K||(K=te(["\n      margin-right: 5px;\n    "]))),firstLabel:Object(ee.css)(Q||(Q=te(["\n      margin-right: 5px;\n    "]))),expand:Object(ee.css)(V||(V=te(["\n      position: absolute;\n      top: 2px;\n      left: 6px;\n      z-index: 100;\n      color: gray;\n    "])))},ConfigEditor:{container:Object(ee.css)(Y||(Y=te(["\n      justify-content: space-between;\n      h5 {\n        line-height: 34px;\n        margin-bottom: 5px;\n      }\n      button {\n        margin-right: 5px;\n      }\n    "]))),wide:Object(ee.css)(J||(J=te(["\n      width: 75%;\n    "]))),subHeader:Object(ee.css)(X||(X=te(["\n      padding: 5px 0 5px 0;\n    "])))},QueryEditor:{queryType:Object(ee.css)(Z||(Z=te(["\n      justify-content: space-between;\n      span {\n        display: flex;\n      }\n    "])))},VariablesEditor:{}};function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(){ne=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function i(e,t,r,s){var n=t&&t.prototype instanceof u?t:u,a=Object.create(n.prototype),o=new k(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return E()}for(r.method=n,r.arg=a;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var i=c(e,t,r);if("normal"===i.type){if(s=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(s="completed",r.method="throw",r.arg=i.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function u(){}function m(){}function y(){}var b={};l(b,n,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(g([])));f&&f!==t&&r.call(f,n)&&(b=f);var $=y.prototype=u.prototype=Object.create(b);function d(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function h(e,t){var s;this._invoke=function(n,a){function o(){return new t((function(s,o){!function s(n,a,o,l){var i=c(e[n],e,a);if("throw"!==i.type){var p=i.arg,u=p.value;return u&&"object"==se(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):t.resolve(u).then((function(e){p.value=e,o(p)}),(function(e){return s("throw",e,o,l)}))}l(i.arg)}(n,a,s,o)}))}return s=s?s.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function g(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function t(){for(;++s<e.length;)if(r.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,l($,"constructor",y),l(y,"constructor",m),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create($),e},e.awrap=function(e){return{__await:e}},d(h.prototype),l(h.prototype,a,(function(){return this})),e.AsyncIterator=h,e.async=function(t,r,s,n,a){void 0===a&&(a=Promise);var o=new h(i(t,r,s,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},d($),l($,o,"Generator"),l($,n,(function(){return this})),l($,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},e.values=g,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(r,s){return o.type="throw",o.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(l&&i){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;v(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function ae(e,t,r){return n(this,void 0,void 0,ne().mark((function s(){var n,a,o,l,i,c,p,u,m,y,b,_,f,$,d,h,x;return ne().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!e.endsWith("$")){s.next=2;break}return s.abrupt("return",ce(r));case 2:for(n=["select","from","where"],a=e.replace(/[\n\r]/g," "),o=0,l=n;o<l.length;o++)i=l[o],a=a.replace(i,i.toUpperCase());if(!(a.endsWith("SELECT ")||a.endsWith("FROM ")||a.endsWith(", "))){s.next=9;break}if(void 0===t.defaultDatabase){s.next=8;break}return s.abrupt("return",le(t,r));case 8:return s.abrupt("return",oe(t,r));case 9:if(!a.endsWith("WHERE ")){s.next=16;break}return c=a.split("FROM "),p=c[c.length-1],u=p.split(" WHERE"),m=u[0],y=m.split(",").map((function(e){return e.trim()})),s.abrupt("return",y.map((function(e){return{label:e,kind:U.TABLE,documentation:"Table",insertText:e,range:r}})));case 16:if(!e.endsWith(".")){s.next=29;break}if(b=e.split(" "),_=b[b.length-1],f=_.split("."),void 0===t.defaultDatabase){s.next=23;break}return $=f[0],s.abrupt("return",ie(t,r,"",$));case 23:if(2!==f.length){s.next=26;break}return d=f[0],s.abrupt("return",le(t,r,d));case 26:return h=f[0],x=f[1],s.abrupt("return",ie(t,r,h,x));case 29:return s.abrupt("return",[]);case 30:case"end":return s.stop()}}),s)})))}function oe(e,t){return n(this,void 0,void 0,ne().mark((function r(){var s;return ne().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.databases();case 2:return s=r.sent,r.abrupt("return",s.map((function(e){return{label:e,kind:U.DATABASE,documentation:"Database",insertText:e,range:t}})));case 4:case"end":return r.stop()}}),r)})))}function le(e,t,r){return n(this,void 0,void 0,ne().mark((function s(){var n;return ne().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,e.tables(r);case 2:return n=s.sent,s.abrupt("return",n.map((function(e){return{label:e,kind:U.TABLE,documentation:"Table",insertText:e,range:t}})));case 4:case"end":return s.stop()}}),s)})))}function ie(e,t,r,s){return n(this,void 0,void 0,ne().mark((function n(){var a;return ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.fields(r,s);case 2:return a=n.sent,n.abrupt("return",a.map((function(e){return{label:e,kind:U.FIELD,documentation:"Field",insertText:e,range:t}})));case 4:case"end":return n.stop()}}),n)})))}function ce(e){var t=Object(m.getTemplateSrv)();return t?t.getVariables().map((function(r){var s="${".concat(r.name,"}"),n=t.replace(s);return{label:s,detail:"(Template Variable) ".concat(n),kind:U.VARIABLE,documentation:"(Template Variable) ".concat(n),insertText:"{".concat(r.name,"}"),range:e}})):[]}function pe(e){var t,r,s=((t=new Map).set("",[]),t.set("WITH",[]),t.set("SELECT",[]),t.set("DISTINCT",[]),t.set("FROM",[]),t.set("SAMPLE",[]),t.set("JOIN",[]),t.set("PREWHERE",[]),t.set("WHERE",[]),t.set("GROUP BY",[]),t.set("LIMIT BY",[]),t.set("HAVING",[]),t.set("ORDER BY",[]),t.set("LIMIT",[]),t.set("OFFSET",[]),t.set("UNION",[]),t.set("INTERSECT",[]),t.set("EXCEPT",[]),t.set("INTO OUTFILE",[]),t.set("FORMAT",[]),t),n=/\b(WITH|SELECT|DISTINCT|FROM|SAMPLE|JOIN|PREWHERE|WHERE|GROUP BY|LIMIT BY|HAVING|ORDER BY|LIMIT|OFFSET|UNION|INTERSECT|EXCEPT|INTO OUTFILE|FORMAT)\b/gi,a={count:0,lastCount:0,phrase:""},o="";for(s.set("",[e.split(n,2)[0]]);null!==(r=n.exec(e));){var l=r[0].toUpperCase(),i=e.substring(n.lastIndex,e.length).split(n,2)[0];a.count>0?a.phrase+=l+i:(c(l,i),o=l,a.phrase=i),a.count+=(i.match(/\(/g)||[]).length,a.count-=(i.match(/\)/g)||[]).length,a.count<=0&&a.lastCount>0&&s.set(o,ue(a.phrase)),a.lastCount=a.count}return s;function c(e,t){var r=s.get(e);r&&0!==r.length?s.set(e,r.concat(e,ue(t))):s.set(e,ue(t))}}function ue(e){for(var t,r=[],s=/(\bAND\b|\bOR\b|,)/gi,n={count:0,lastCount:0,phrase:""},a=0;null!==(t=s.exec(e));){var o=t[0].toUpperCase(),l=e.substring(a,t.index);a=s.lastIndex,n.count+=(l.match(/\(/g)||[]).length,n.count-=(l.match(/\)/g)||[]).length,n.count>0?n.phrase+=l+o:n.lastCount<=0&&(me(r,l),r.push(o)),n.count<=0&&n.lastCount>0&&(n.phrase+=l,me(r,n.phrase),r.push(o),n.phrase=""),n.lastCount=n.count}var i=e.substring(a,e.length);return n.count>0?n.phrase+=i:n.phrase=i,me(r,n.phrase),r}function me(e,t){t.match(/\bSELECT\b/gi)?e.push(pe(t)):e.push(t)}var ye=function(e){var t=pe(e).get("SELECT")||[];if(t.length>2&&Object(d.isString)(t[0])){var r=t[0].trim().toLowerCase();if(r.endsWith("as time"))return o.TIMESERIES;if(r.endsWith("as log_time"))return o.LOGS}return o.TABLE},be=r(40),_e=["INTERVAL"];function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(){$e=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function i(e,t,r,s){var n=t&&t.prototype instanceof u?t:u,a=Object.create(n.prototype),o=new k(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return E()}for(r.method=n,r.arg=a;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var i=c(e,t,r);if("normal"===i.type){if(s=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(s="completed",r.method="throw",r.arg=i.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function u(){}function m(){}function y(){}var b={};l(b,n,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(g([])));f&&f!==t&&r.call(f,n)&&(b=f);var $=y.prototype=u.prototype=Object.create(b);function d(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function h(e,t){var s;this._invoke=function(n,a){function o(){return new t((function(s,o){!function s(n,a,o,l){var i=c(e[n],e,a);if("throw"!==i.type){var p=i.arg,u=p.value;return u&&"object"==fe(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):t.resolve(u).then((function(e){p.value=e,o(p)}),(function(e){return s("throw",e,o,l)}))}l(i.arg)}(n,a,s,o)}))}return s=s?s.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function g(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function t(){for(;++s<e.length;)if(r.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,l($,"constructor",y),l(y,"constructor",m),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create($),e},e.awrap=function(e){return{__await:e}},d(h.prototype),l(h.prototype,a,(function(){return this})),e.AsyncIterator=h,e.async=function(t,r,s,n,a){void 0===a&&(a=Promise);var o=new h(i(t,r,s,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},d($),l($,o,"Generator"),l($,n,(function(){return this})),l($,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},e.values=g,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(r,s){return o.type="throw",o.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(l&&i){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;v(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var xe=function(e){var t=e.query,r=e.onRunQuery,s=e.onChange,a=e.datasource,o=de(Object(I.useState)(),2),i=o[0],c=o[1],p=de(Object(I.useState)({height:"150px",icon:"plus",on:t.expand||!1}),2),u=p[0],m=p[1],y={databases:function(){return a.fetchDatabases()},tables:function(e){return a.fetchTables(e)},fields:function(e,t){return a.fetchFields(e,t)},defaultDatabase:a.getDefaultDatabase()},b=function(e,t){return n(void 0,void 0,void 0,$e().mark((function r(){var s;return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ae(e,y,t);case 2:return s=r.sent,r.abrupt("return",Promise.resolve({suggestions:s}));case 4:case"end":return r.stop()}}),r)})))},_=function(e,t,r){var s=function(e){try{return be.parse(e),{valid:!0}}catch(i){var t=i,r=t.message.split("\n"),s=t.hash.loc,n=e.split("\n"),a=n[s.first_line-1],o=a.substring(s.first_column,s.last_column);if(_e.includes(o.toUpperCase()))return{valid:!0};if(a.trim()===o){var l=n[s.first_line];if(null==l?void 0:l.trim().startsWith("$"))return{valid:!0}}return a.substring(s.last_column+1).trim().startsWith("$")?{valid:!0}:{valid:!1,error:{startLine:s.first_line,endLine:s.last_line,startCol:s.first_column+1,endCol:s.last_column+1,message:i.message,expected:r[3]}}}}(e);if(s.valid)r.setModelMarkers(t,"clickhouse",[]);else{var n=s.error;r.setModelMarkers(t,"clickhouse",[{startLineNumber:n.startLine,startColumn:n.startCol,endLineNumber:n.endLine,endColumn:n.endCol,message:n.expected,severity:8}])}},f=function(e){var r=function(e,t,r){var s=this;return t.updateOptions({fixedOverflowWidgets:!0,scrollBeyondLastLine:!1}),void 0!==monaco.languages.getLanguages().find((function(t){return t.id===e}))||(monaco.languages.register({id:e}),monaco.languages.registerCompletionItemProvider("sql",{triggerCharacters:[" ","$",".",","],provideCompletionItems:function(e,t){return n(s,void 0,void 0,M().mark((function s(){var n,a,o;return M().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return n=e.getWordUntilPosition(t),a=e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:t.lineNumber,endColumn:t.column}),o={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:n.startColumn,endColumn:n.endColumn},s.abrupt("return",r(a,o));case 4:case"end":return s.stop()}}),s)})))}})),monaco.editor}("chSql",e,b);e.expanded=t.expand,e.onDidChangeModelDecorations((function(t){if(e.expanded){var r=we(e);m({height:"".concat(r,"px"),on:!0,icon:"minus"})}})),e.onKeyUp((function(t){if(a.settings.jsonData.validate){var s=e.getValue();_(s,e.getModel(),r)}})),c(e)};return j.a.createElement("div",{className:re.Common.wrapper},j.a.createElement("a",{onClick:function(){return function(){var e=t,r=!u.on,n=r?"minus":"plus";if(s(Object.assign(Object.assign({},e),{expand:r})),i)if(r){i.expanded=!0;var a=we(i);m({height:"".concat(a,"px"),on:r,icon:n})}else i.expanded=!1,m({height:"150px",icon:n,on:r})}()},className:re.Common.expand,"data-testid":P.QueryEditor.CodeEditor.Expand},j.a.createElement("i",{className:"fa fa-".concat(u.icon)})),j.a.createElement(R.CodeEditor,{"aria-label":"SQL",height:u.height,language:"sql",value:t.rawSql||"",onSave:function(e){var n=ye(e);s(Object.assign(Object.assign({},t),{rawSql:e,format:n,queryType:l.SQL})),r()},showMiniMap:!1,showLineNumbers:!0,onBlur:function(e){return s(Object.assign(Object.assign({},t),{rawSql:e}))},onEditorDidMount:function(e){return f(e)}}))},we=function(e){var t;if(e.getDomNode()){var r=(null===(t=e.getModel())||void 0===t?void 0:t.getLineCount())||1;return e.getTopForLineNumber(r+1)+40}};function ve(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var s=0,n=function(){};return{s:n,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(l)throw a}}}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var ge=function(e){return["boolean"].includes(e.toLowerCase())},Ee=function(e){return["int","float","decimal"].some((function(t){return e.toLowerCase().includes(t)}))},Ae=function(e){var t=e.toLowerCase();return t.startsWith("date")||t.startsWith("nullable(date")},Oe=function(e){return!(ge(e)||Ee(e)||Ae(e))},Se=function(e){return[u.IsNull,u.IsNotNull].includes(e.operator)},Te=function(e){return ge(e.type)},Ce=function(e){return Ee(e.type)},Le=function(e){return Ae(e.type)&&[u.WithInGrafanaTimeRange,u.OutsideGrafanaTimeRange].includes(e.operator)},Ne=function(e){return Ae(e.type)},Ie=function(e){return Oe(e.type)&&![u.In,u.NotIn].includes(e.operator)},je=function(e){return Oe(e.type)&&[u.In,u.NotIn].includes(e.operator)},Re=function(e){return e.reduce((function(e,t,r){var s=0===r?"":t.condition,n="",a=t.key,o="",l=!1;if(t.operator===u.NotLike?(o="LIKE",l=!0):t.operator===u.OutsideGrafanaTimeRange?(o="",l=!0):o=[u.WithInGrafanaTimeRange].includes(t.operator)?"":t.operator,n="".concat(a," ").concat(o),Se(t));else if(Te(t))n+=" ".concat(t.value);else if(Ce(t))n+=" ".concat(t.value||"0");else if(Ne(t))if(Le(t))Ae(t.type)&&(n+=" >= $__fromTime AND ".concat(t.key," <= $__toTime"));else switch(t.value){case"GRAFANA_START_TIME":Ae(t.type)&&(n+=" $__fromTime");break;case"GRAFANA_END_TIME":Ae(t.type)&&(n+=" $__toTime");break;default:n+=" ".concat(t.value||"TODAY")}else if(Ie(t))t.operator===u.Like||t.operator===u.NotLike?n+=" '%".concat(t.value||"","%'"):n+=" '".concat(t.value||"","'");else if(je(t)){var i=t.value;n+=" (".concat(i.map((function(e){return"'".concat(e.trim(),"'")})).join(", ")," )")}return l&&(n=" NOT ( ".concat(n," )")),n?"".concat(e," ").concat(s," ( ").concat(n," )"):e}),"")},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.length>0?" GROUP BY ".concat(e.join(", ")):"";return void 0===t?r:0===e.length?" GROUP BY time":"".concat(r,", time")},Fe=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=t?" ORDER BY ":"";return e&&e.filter((function(e){return e.name})).length>0?r+e.filter((function(e){return e.name})).map((function(e){return"".concat(e.name," ").concat(e.dir)})).join(", "):""},Pe=function(e){var t=e.limit?function(e){return" LIMIT "+(e||100)}(e.limit):"",r="";switch(e.mode){case i.Aggregate:r+=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=r.length>0?r.join(", "):"",o=s.map((function(e){var t=e.alias?" ".concat(e.alias.replace(/ /g,"_")):"";return"".concat(e.aggregation,"(").concat(e.field,")").concat(t)})).join(", "),l=n.filter((function(e){return!r.some((function(t){return t===e}))})).join(", "),i=""===e||""===t?"":".";return"SELECT ".concat(a).concat(a&&(l||o)?", ":"").concat(l).concat(o&&l?", ":"").concat(o," FROM ").concat(e).concat(i).concat(t)}(e.database,e.table,e.fields,e.metrics,e.groupBy);var s=Re(e.filters||[]);s&&(r+=" WHERE ".concat(s)),r+=qe(e.groupBy);break;case i.Trend:if(!Ae(e.timeFieldType))throw new Error("timeFieldType is expected to be valid Date type.");r+=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=(r=r&&r.length>0?r:[]).map((function(e){var t=e.alias?" "+e.alias.replace(/ /g,"_"):"";return"".concat(e.aggregation,"(").concat(e.field,")").concat(t)})).join(", "),o="$__timeInterval(".concat(n,") as time");if(""!==a){var l=s.length>0?"".concat(s.join(", "),","):"";a="".concat(o,", ").concat(l," ").concat(a)}else a=s.length>0?"".concat(o,", ").concat(s.join(", ")):"".concat(o);var i=""===e||""===t?"":".";return"SELECT ".concat(a," FROM ").concat(e).concat(i).concat(t)}(e.database,e.table,e.metrics,e.groupBy,e.timeField,e.timeFieldType);var n=Re(e.filters||[]);r+=" WHERE $__timeFilter(".concat(e.timeField,")"),r+=n?" AND ".concat(n):"",r+=qe(e.groupBy,e.timeField);break;case i.List:default:r+=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=""===e||""===t?"":".";return r=r&&r.length>0?r:[""],"SELECT ".concat(r.join(", ")," FROM ").concat(e).concat(s).concat(t)}(e.database,e.table,e.fields);var a=Re(e.filters||[]);a&&(r+=" WHERE ".concat(a))}if(e.mode===i.Trend){r+=" ORDER BY time ASC";var o=Fe(e.orderBy,!1);""!==o.trim()&&(r+=", ".concat(o)),r+=t}else r+=Fe(e.orderBy),r+=t;return r};function Be(e){var t,r,s=pe(e),n=s.get("FROM");if(!n||n.length>1||!Object(d.isString)(n[0]))return{};var a=n[0].trim().split("."),o=s.get("WHERE"),l=s.get("LIMIT"),p=function(e){var t,r=[],s=[],n=ve(e);try{var a=function(){var e=t.value;if(!Object(d.isString)(e)||!e.trim()||","===e.trim())return"continue";var n=!1;r=r.concat(Object.values(c).filter((function(t){return e.trim().toLowerCase().startsWith("".concat(t))})).map((function(t){var r=e.match(/\w+|\$(\w+)/g);if(!r)return null;var s={field:r[1]?r[1]:"",aggregation:t};return r[2]&&(s.alias=r[2]),r[3]&&(s.alias=r[3]),n=!0,s})).filter((function(e){return e}))),n||s.push(e.trim())};for(n.s();!(t=n.n()).done;)a()}catch(e){n.e(e)}finally{n.f()}return{metrics:r,fields:s}}(s.get("SELECT")),u={mode:p.metrics.length>0?i.Aggregate:i.List,database:a[1]?a[0].trim():"",table:a[1]?a[1].trim():a[0].trim()};p.fields&&(u.fields=p.fields),o&&o.length>0&&(u.filters=function(e){var t,r,s=[{condition:"AND"}],n=ve(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(Object(d.isString)(a))if("AND"!==a.trim().toUpperCase())if("OR"!==a.trim().toUpperCase()){var o=null===(t=a.match(/'(.*?)'/g))||void 0===t?void 0:t.map((function(e){return e.substring(1,e.length-1)})),l=a.match(/(\w+|\$(\w+)|!=|<=|>=|=)/g);if(l){var i="NOT"===l[0],c=Ue(l,o||[]);s[s.length-1]=Object.assign(Object.assign({},s[s.length-1]),{filterType:"custom",key:i?l[1]:l[0],operator:c.f?c.f:"",value:c.v?c.v:"",type:De(a,o)})}}else s.push({condition:"OR"});else s.push({condition:"AND"})}}catch(e){n.e(e)}finally{n.f()}return s}(o));var m=null===(t=s.get("ORDER BY"))||void 0===t?void 0:t.map((function(e){var t;if(!Object(d.isString)(e)||","===e.trim())return{};var r=e.trim().split(" ");return{name:r[0],dir:null===(t=r[1])||void 0===t?void 0:t.toUpperCase()}})).filter((function(e){return e}));m&&m.length>0&&(u.orderBy=m),l&&l.length>0&&(u.limit=Number.parseInt(l[0].toString(),10)),p.metrics.length>0&&(u.metrics=p.metrics);var y=null===(r=s.get("GROUP BY"))||void 0===r?void 0:r.map((function(e){return Object(d.isString)(e)&&","!==e.trim()?e.trim():""})).filter((function(e){return""!==e}));return y&&y.length>0&&(u.groupBy=y),u}function Ue(e,t){if(function(e){if(!e||0===e.length)return!1;var t,r={from:!1,to:!1},s=ve(e);try{for(s.s();!(t=s.n()).done;){var n=t.value;n.includes("__from")?r.from=!0:n.includes("__to")&&(r.to=!0)}}catch(e){s.e(e)}finally{s.f()}return r.from&&r.to}(e))return{f:"NOT"===e[0]?u.OutsideGrafanaTimeRange:u.WithInGrafanaTimeRange,v:""};var r=e[1];if(Object.values(u).includes(r.toUpperCase()))return{f:r.toUpperCase(),v:t.length>0?t:e.slice(2,e.length)};for(var s=2;s<e.length;s++)if(r+=" ".concat(e[s]),Object.values(u).includes(r.toUpperCase()))return{f:r.toUpperCase(),v:t.length>0?t:e.slice(s+1,e.length)};return{f:"",v:null}}function De(e,t){return t&&t.length>0?"string":e.includes("__time")||e.includes("__from")||e.includes("__to")?"datetime":""}new Map([["equals",u.Equals],["contains",u.Like]]);var Me=r(41),Ge=r.n(Me);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(){ze=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function i(e,t,r,s){var n=t&&t.prototype instanceof u?t:u,a=Object.create(n.prototype),o=new k(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return E()}for(r.method=n,r.arg=a;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var i=c(e,t,r);if("normal"===i.type){if(s=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(s="completed",r.method="throw",r.arg=i.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function u(){}function m(){}function y(){}var b={};l(b,n,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(g([])));f&&f!==t&&r.call(f,n)&&(b=f);var $=y.prototype=u.prototype=Object.create(b);function d(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function h(e,t){var s;this._invoke=function(n,a){function o(){return new t((function(s,o){!function s(n,a,o,l){var i=c(e[n],e,a);if("throw"!==i.type){var p=i.arg,u=p.value;return u&&"object"==He(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):t.resolve(u).then((function(e){p.value=e,o(p)}),(function(e){return s("throw",e,o,l)}))}l(i.arg)}(n,a,s,o)}))}return s=s?s.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function g(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function t(){for(;++s<e.length;)if(r.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,l($,"constructor",y),l(y,"constructor",m),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create($),e},e.awrap=function(e){return{__await:e}},d(h.prototype),l(h.prototype,a,(function(){return this})),e.AsyncIterator=h,e.async=function(t,r,s,n,a){void 0===a&&(a=Promise);var o=new h(i(t,r,s,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},d($),l($,o,"Generator"),l($,n,(function(){return this})),l($,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},e.values=g,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(r,s){return o.type="throw",o.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(l&&i){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;v(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Qe=function(e){var t=e.datasource,r=e.onTableChange,s=e.database,a=e.table,o=We(Object(I.useState)([]),2),l=o[0],i=o[1],c=P.QueryEditor.QueryBuilder.FROM,p=c.label,u=c.tooltip;Object(I.useEffect)((function(){!function(){n(this,void 0,void 0,ze().mark((function e(){var r,n;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTables(s);case 2:r=e.sent,n=r.map((function(e){return{label:e,value:e}})),a&&!r.find((function(e){return e===a}))&&n.push({label:a,value:a}),n.push({label:"-- Choose --",value:""}),i(n);case 7:case"end":return e.stop()}}),e)})))}()}),[t,s,a]);return j.a.createElement(j.a.Fragment,null,j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:u},p),j.a.createElement(R.Select,{className:"width-15 ".concat(re.Common.inlineSelect),onChange:function(e){return function(e){r(e)}(e.value?e.value:"")},options:l,value:a,menuPlacement:"bottom",allowCustomValue:!0}))},Ve=function(e){var t=P.QueryEditor.QueryBuilder.TYPES,r=t.options,s=t.label,n=t.tooltip,a=[{value:i.List,label:r.LIST},{value:i.Aggregate,label:r.AGGREGATE},{value:i.Trend,label:r.TREND}];return j.a.createElement(j.a.Fragment,null,j.a.createElement(R.InlineFormLabel,{width:6,className:"query-keyword",tooltip:n},s),j.a.createElement(R.RadioButtonGroup,{options:a,value:e.mode,onChange:function(t){return e.onModeChange(t)}}))};function Ye(e){return function(e){if(Array.isArray(e))return Ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Xe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||Xe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){if(e){if("string"==typeof e)return Ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ze(e,t):void 0}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var et=function(e){var t=(e.fieldsList||[]).map((function(e){return{label:e.label,value:e.name}})),r=Je(Object(I.useState)([]),2),s=r[0],n=r[1],a=Je(Object(I.useState)(!1),2),o=a[0],l=a[1],i=[],c=Je(Object(I.useState)(e.fields||[]),2),p=c[0],u=c[1],m=P.QueryEditor.QueryBuilder.SELECT,y=m.label,b=m.tooltipTable;Object(I.useEffect)((function(){if(0!==e.fieldsList.length){u(e.fields);var t=tt(e.fields,e.fieldsList);n(t)}}),[e.fieldsList,e.fields]);var _=function(e){return i.map((function(e){return e.value})).includes(e[0])||i.map((function(e){return e.value})).includes(e[e.length-1])?[e[e.length-1]]:e};return j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:b},y),j.a.createElement("div",{"data-testid":"query-builder-fields-multi-select-container",className:re.Common.selectWrapper},j.a.createElement(R.MultiSelect,{options:[].concat(Ye(t),i,Ye(s)),value:p&&p.length>0?p:[],isOpen:o,onOpenMenu:function(){return l(!0)},onCloseMenu:function(){return l(!1)},onChange:function(t){l(!1),function(t){var r=_(t);u(r);var s=tt(t,e.fieldsList);n(s)}(t.map((function(e){return e.value})))},onBlur:function(){e.onFieldsChange(p)},allowCustomValue:!0,menuPlacement:"bottom"})))};function tt(e,t){return e.filter((function(e){return-1===t.findIndex((function(t){return t.name===e}))})).map((function(e){return{label:e,value:e}}))}function rt(e){return function(e){if(Array.isArray(e))return at(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||nt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(e,t){if(e){if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var ot=function(e){var t=(e.fieldsList||[]).map((function(e){return{label:e.label,value:e.name}})),r=st(Object(I.useState)(!1),2),s=r[0],n=r[1],a=e.metric,o=e.index,l=e.metrics,i=e.onMetricsChange,p=st(Object(I.useState)(a.alias||""),2),u=p[0],m=p[1],y=P.QueryEditor.QueryBuilder.AGGREGATES.ALIAS,b=[{value:c.Count,label:"Count"},{value:c.Sum,label:"Sum"},{value:c.Min,label:"Min"},{value:c.Max,label:"Max"},{value:c.Average,label:"Average"},{value:c.Any,label:"Any"}];return j.a.createElement(j.a.Fragment,null,j.a.createElement(R.Select,{width:20,className:re.Common.inlineSelect,options:b,onChange:function(e){return t=e.value,r=rt(l).map((function(e,r){return Object.assign(Object.assign({},e),{aggregation:r===o?t:e.aggregation})})),void i(r);var t,r},value:a.aggregation,menuPlacement:"bottom"}),j.a.createElement(R.Select,{width:28,className:re.Common.inlineSelect,options:t,isOpen:s,onOpenMenu:function(){return n(!0)},onCloseMenu:function(){return n(!1)},onChange:function(e){n(!1);var t=rt(l).map((function(t,r){return Object.assign(Object.assign({},t),{field:r===o?e.value:t.field})}));i(t)},value:a.field,menuPlacement:"bottom"}),j.a.createElement(R.InlineFormLabel,{width:2,className:"query-keyword"},y.label),j.a.createElement(R.Input,{width:20,value:u,onChange:function(e){return m(e.currentTarget.value)},onBlur:function(){var e=rt(l).map((function(e,t){return Object.assign(Object.assign({},e),{alias:t===o?u:e.alias})}));i(e)},placeholder:"alias"}))},lt=function(e){var t=e.metrics,r=e.onMetricsChange,s=e.fieldsList,n=void 0===s?[]:s,a=P.QueryEditor.QueryBuilder.AGGREGATES,o=a.label,l=a.tooltipAggregate,i=a.AddLabel,p=a.RemoveLabel;return j.a.createElement(j.a.Fragment,null,t.map((function(e,s){return j.a.createElement("div",{className:"gf-form",key:s},0===s?j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:l},o):j.a.createElement("div",{className:"width-8 ".concat(re.Common.firstLabel)}),j.a.createElement(ot,{fieldsList:n,index:s,metric:e,metrics:t,onMetricsChange:r}),t.length>1&&j.a.createElement(R.Button,{icon:"trash-alt",size:"sm",variant:"destructive",className:re.Common.smallBtn,onClick:function(){return function(e){var s=rt(t);s.splice(e,1),r(s)}(s)}},p))})),j.a.createElement("div",{className:"gf-form"},j.a.createElement("div",{className:"width-8 ".concat(re.Common.firstLabel)}),j.a.createElement(R.Button,{icon:"plus-circle",size:"sm",variant:"secondary",className:re.Common.smallBtn,onClick:function(){var e={field:"",aggregation:c.Count};r([].concat(rt(t),[e]))}},i)))},it=function(e){var t=P.QueryEditor.QueryBuilder.TIME_FIELD,r=t.label,s=t.tooltip,n=(e.fieldsList||[]).filter((function(e){return Ae(e.type)})).map((function(e){return{label:e.label,value:e.name}}));return j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:s},r),j.a.createElement(R.Select,{options:n,width:20,onChange:function(t){return e.onTimeFieldChange(t.value,(r=t.value,(s=e.fieldsList.find((function(e){return e.name===r})))?s.type:""));var r,s},value:e.timeField,menuPlacement:"bottom"}))};function ct(e){return function(e){if(Array.isArray(e))return mt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ut(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||ut(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){if(e){if("string"==typeof e)return mt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mt(e,t):void 0}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var yt=[{value:!0,label:"True"},{value:!1,label:"False"}],bt=[{value:"AND",label:"AND"},{value:"OR",label:"OR"}],_t=[{value:u.Equals,label:"="},{value:u.NotEquals,label:"!="},{value:u.LessThan,label:"<"},{value:u.LessThanOrEqual,label:"<="},{value:u.GreaterThan,label:">"},{value:u.GreaterThanOrEqual,label:">="},{value:u.Like,label:"LIKE"},{value:u.NotLike,label:"NOT LIKE"},{value:u.In,label:"IN"},{value:u.NotIn,label:"NOT IN"},{value:u.IsNull,label:"IS NULL"},{value:u.IsNotNull,label:"IS NOT NULL"},{value:u.WithInGrafanaTimeRange,label:"WITHIN DASHBOARD TIME RANGE"},{value:u.OutsideGrafanaTimeRange,label:"OUTSIDE DASHBOARD TIME RANGE"}],ft=[{value:"today()",label:"TODAY"},{value:"yesterday()",label:"YESTERDAY"},{value:"now()",label:"NOW"},{value:"GRAFANA_START_TIME",label:"DASHBOARD START TIME"},{value:"GRAFANA_END_TIME",label:"DASHBOARD END TIME"}],$t={filterType:"custom",condition:"AND",key:"Id",type:"id",operator:u.IsNotNull},dt=function(e){var t=pt(Object(I.useState)(e.value||0),2),r=t[0],s=t[1];return j.a.createElement("div",{"data-testid":"query-builder-filters-number-value-container"},j.a.createElement(R.Input,{"data-testid":"query-builder-filters-number-value-input",type:"number",value:r,onChange:function(e){return s(e.currentTarget.valueAsNumber||0)},onBlur:function(){return e.onChange(r)}}))},ht=function(e){var t=pt(Object(I.useState)(e.value||""),2),r=t[0],s=t[1];return j.a.createElement("div",{"data-testid":"query-builder-filters-single-string-value-container"},j.a.createElement(R.Input,{type:"text",value:r,onChange:function(e){return s(e.currentTarget.value)},onBlur:function(){return e.onChange(r)}}))},xt=function(e){var t=pt(Object(I.useState)(e.value||[]),2),r=t[0],s=t[1];return j.a.createElement("div",{"data-testid":"query-builder-filters-multi-string-value-container"},j.a.createElement(R.Input,{type:"text",value:r.join(","),placeholder:"comma separated values",onChange:function(e){return s((e.currentTarget.value||"").split(","))},onBlur:function(){return e.onChange(r)}}))},wt=function(e){var t=e.filter,r=e.onFilterChange,s=e.fieldsList,n=function(){var e=s.find((function(e){return e.name===t.key}));return(null==e?void 0:e.picklistValues)||[]};if(Se(t))return j.a.createElement(j.a.Fragment,null);if(Te(t)){return j.a.createElement("div",{"data-testid":"query-builder-filters-boolean-value-container"},j.a.createElement(R.RadioButtonGroup,{options:yt,value:t.value,onChange:function(e){return function(e){r(Object.assign(Object.assign({},t),{value:e}))}(e)}}))}if(Ce(t))return j.a.createElement(dt,{value:t.value,onChange:function(e){return r(Object.assign(Object.assign({},t),{value:e}))}});if(Ne(t)){return Le(t)?null:j.a.createElement("div",{"data-testid":"query-builder-filters-date-value-container"},j.a.createElement(R.Select,{value:t.value||"TODAY",onChange:function(e){return function(e){r(Object.assign(Object.assign({},t),{value:e}))}(e.value)},options:[].concat(ft)}))}if(Ie(t)){var a=function(e){r(Object.assign(Object.assign({},t),{value:e}))};return"picklist"!==t.type||t.operator!==u.Equals&&t.operator!==u.NotEquals?j.a.createElement(ht,{value:t.value,onChange:a}):j.a.createElement("div",{"data-testid":"query-builder-filters-single-picklist-value-container"},j.a.createElement(R.Select,{value:t.value,onChange:function(e){return a(e.value)},options:n()}))}if(je(t)){var o=function(e){r(Object.assign(Object.assign({},t),{value:e}))};return"picklist"===t.type?j.a.createElement("div",{"data-testid":"query-builder-filters-multi-picklist-value-container"},j.a.createElement(R.MultiSelect,{value:t.value,options:n(),onChange:function(e){return o(e.map((function(e){return e.value})))}})):j.a.createElement(xt,{value:t.value,onChange:o})}return j.a.createElement(j.a.Fragment,null)},vt=function(e){var t,r=e.index,s=e.filter,n=e.fieldsList,a=e.onFilterChange,o=pt(Object(I.useState)(!1),2),l=o[0],i=o[1];return j.a.createElement(j.a.Fragment,null,0!==r&&j.a.createElement(R.RadioButtonGroup,{options:bt,value:s.condition,onChange:function(e){return t=e,(n=s).condition=t,void a(r,n);var t,n}}),j.a.createElement(R.Select,{value:s.key,width:40,className:re.Common.inlineSelect,options:(t=n.map((function(e){return{label:e.label,value:e.name}})),(null==s?void 0:s.key)&&!t.find((function(e){return e.value===s.key}))&&t.push({label:s.key,value:s.key}),t),isOpen:l,onOpenMenu:function(){return i(!0)},onCloseMenu:function(){return i(!1)},onChange:function(e){return function(e){var t;i(!1);var o,l=n.find((function(t){return t.name===e})),c=null;if(l)c={key:l.name,type:l.type};else{var p=n.find((function(t){return t.type.startsWith("Map")&&e.startsWith(t.name)&&new RegExp("^".concat(t.name,"\\[['\"].+['\"]\\]$")).test(e)}));if(p){var m=null===(t=/^Map\(\w+, (\w+)\)$/.exec(p.type))||void 0===t?void 0:t[1];m&&(c={key:e,type:m})}}c&&(o=ge(c.type)?{filterType:"custom",key:c.key,type:"boolean",condition:s.condition||"AND",operator:u.Equals,value:!1}:Ae(c.type)?{filterType:"custom",key:c.key,type:c.type,condition:s.condition||"AND",operator:u.Equals,value:"TODAY"}:{filterType:"custom",key:c.key,type:c.type,condition:s.condition||"AND",operator:u.IsNotNull},a(r,o))}(e.value)},allowCustomValue:!0,menuPlacement:"bottom"}),j.a.createElement(R.Select,{value:s.operator,width:34,className:re.Common.inlineSelect,options:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string";return ge(e)?_t.filter((function(e){return[u.Equals,u.NotEquals].includes(e.value)})):Ee(e)?_t.filter((function(e){return[u.IsNull,u.IsNotNull,u.Equals,u.NotEquals,u.LessThan,u.LessThanOrEqual,u.GreaterThan,u.GreaterThanOrEqual].includes(e.value)})):Ae(e)?_t.filter((function(e){return[u.IsNull,u.IsNotNull,u.Equals,u.NotEquals,u.LessThan,u.LessThanOrEqual,u.GreaterThan,u.GreaterThanOrEqual,u.WithInGrafanaTimeRange,u.OutsideGrafanaTimeRange].includes(e.value)})):_t.filter((function(e){return[u.IsNull,u.IsNotNull,u.Equals,u.NotEquals,u.Like,u.NotLike,u.In,u.NotIn].includes(e.value)}))}(s.type),onChange:function(e){return t=e.value,(n=s).operator=t,je(n)&&(Array.isArray(n.value)||(n.value=[n.value||""])),void a(r,n);var t,n},menuPlacement:"bottom"}),j.a.createElement(wt,{filter:s,onFilterChange:function(e){a(r,e)},fieldsList:n}))},kt=function(e){var t=e.filters,r=void 0===t?[]:t,s=e.onFiltersChange,n=e.fieldsList,a=void 0===n?[]:n,o=P.QueryEditor.QueryBuilder.WHERE,l=o.label,i=o.tooltip,c=o.AddLabel,p=o.RemoveLabel,u=function(){s([].concat(ct(r),[Object.assign({},$t)]))},m=function(e,t){var n=ct(r);n[e]=t,s(n)};return j.a.createElement(j.a.Fragment,null,0===r.length&&j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:i},l),j.a.createElement(R.Button,{"data-testid":"query-builder-filters-add-button",icon:"plus-circle",variant:"secondary",size:"sm",className:re.Common.smallBtn,onClick:u},c)),r.map((function(e,t){return j.a.createElement("div",{className:"gf-form",key:t},0===t?j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:i},l):j.a.createElement("div",{className:"width-8 ".concat(re.Common.firstLabel)}),j.a.createElement(vt,{fieldsList:a,filter:e,onFilterChange:m,index:t}),j.a.createElement(R.Button,{"data-testid":"query-builder-filters-remove-button",icon:"trash-alt",variant:"destructive",size:"sm",className:re.Common.smallBtn,onClick:function(){return function(e){var t=ct(r);t.splice(e,1),s(t)}(t)}},p))})),0!==r.length&&j.a.createElement("div",{className:"gf-form"},j.a.createElement("div",{className:"width-8 ".concat(re.Common.firstLabel)}),j.a.createElement(R.Button,{"data-testid":"query-builder-filters-inline-add-button",icon:"plus-circle",variant:"secondary",size:"sm",className:re.Common.smallBtn,onClick:u},c)))};function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var At=function(e){var t=(e.fieldsList||[]).map((function(e){return{label:e.label,value:e.name}})),r=gt(Object(I.useState)(!1),2),s=r[0],n=r[1],a=gt(Object(I.useState)(e.groupBy||[]),2),o=a[0],l=a[1],i=P.QueryEditor.QueryBuilder.GROUP_BY,c=i.label,p=i.tooltip;return o.filter((function(e){return!t.some((function(t){return t.value===e}))})).forEach((function(e){return t.push({value:e,label:e})})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:p},c),j.a.createElement("div",{"data-testid":"query-builder-group-by-multi-select-container",className:re.Common.selectWrapper},j.a.createElement(R.MultiSelect,{options:t,placeholder:"(Optional) Click here to choose",isOpen:s,onOpenMenu:function(){return n(!0)},onCloseMenu:function(){return n(!1)},onChange:function(e){n(!1),l(e.map((function(e){return e.value})))},onBlur:function(){return e.onGroupByChange(o)},value:o,allowCustomValue:!0,menuPlacement:"bottom"})))};function Ot(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return St(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return St(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Tt=function(e){var t=e.fieldsList||[],r=e.index,s=e.orderByItem,n=[{value:p.ASC,label:"ASC"},{value:p.DESC,label:"DESC"}];return j.a.createElement(j.a.Fragment,null,j.a.createElement(R.Select,{value:s.name,className:re.Common.inlineSelect,width:20,options:t,onChange:function(t){return s=t.value,n=Ot(e.orderBy).map((function(e,t){return Object.assign(Object.assign({},e),{name:t===r?s:e.name})})),void e.onOrderByItemsChange(n);var s,n},allowCustomValue:!0,menuPlacement:"bottom"}),j.a.createElement(R.Select,{value:s.dir,className:re.Common.inlineSelect,width:12,options:n,onChange:function(t){return s=t.value,n=Ot(e.orderBy).map((function(e,t){return Object.assign(Object.assign({},e),{dir:t===r?s:e.dir})})),void e.onOrderByItemsChange(n);var s,n},menuPlacement:"bottom"}))},Ct=function(e){var t=e.fieldsList||[],r=P.QueryEditor.QueryBuilder.ORDER_BY,s=r.label,n=r.tooltip,a=r.AddLabel,o=r.RemoveLabel,l=function(){var r,s=Ot(e.orderBy);s.push({name:(null===(r=t[0])||void 0===r?void 0:r.value)||"Name",dir:p.ASC}),e.onOrderByItemsChange(s)};return 0===t.length?null:j.a.createElement(j.a.Fragment,null,0===e.orderBy.length?j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:n},s),j.a.createElement(R.Button,{"data-testid":"query-builder-orderby-add-button",icon:"plus-circle",variant:"secondary",size:"sm",onClick:l,className:re.Common.smallBtn},a)):j.a.createElement(j.a.Fragment,null,e.orderBy.map((function(t,r){return j.a.createElement("div",{className:"gf-form",key:r,"data-testid":"query-builder-orderby-item-wrapper"},0===r?j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword","data-testid":"query-builder-orderby-item-label",tooltip:n},s):j.a.createElement("div",{className:"width-8 ".concat(re.Common.firstLabel)}),j.a.createElement(Tt,{index:r,orderBy:e.orderBy,orderByItem:t,onOrderByItemsChange:e.onOrderByItemsChange,fieldsList:e.fieldsList}),j.a.createElement(R.Button,{"data-testid":"query-builder-orderby-remove-button",className:re.Common.smallBtn,variant:"destructive",size:"sm",icon:"trash-alt",onClick:function(){return function(t){var r=Ot(e.orderBy);r.splice(t,1),e.onOrderByItemsChange(r)}(r)}},o))})),j.a.createElement("div",{className:"gf-form"},j.a.createElement("div",{className:"width-8 ".concat(re.Common.firstLabel)}),j.a.createElement(R.Button,{"data-testid":"query-builder-orderby-inline-add-button",icon:"plus-circle",variant:"secondary",size:"sm",onClick:l,className:re.Common.smallBtn},a))))},Lt=function(e,t){var r,s=[];switch(e.mode){case i.Aggregate:s=[].concat(Ot((e.fields||[]).map((function(e){return{value:e,label:e}}))),Ot((e.metrics||[]).map((function(e){return{value:"".concat(e.aggregation,"(").concat(e.field,")"),label:"".concat(e.aggregation,"(").concat(e.field,")")}}))),Ot((e.groupBy||[]).map((function(e){return{value:e,label:e}}))));break;case i.List:default:s=t.map((function(e){return{value:e.name,label:e.label}}))}return null===(r=e.orderBy)||void 0===r||r.filter((function(e){return!s.some((function(t){return t.value===e.name}))})).forEach((function(e){return s.push({value:e.name,label:e.name})})),s};function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return It(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var jt=function(e){var t=Nt(Object(I.useState)(e.limit||10),2),r=t[0],s=t[1],n=P.QueryEditor.QueryBuilder.LIMIT,a=n.label,o=n.tooltip;return j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:o},a),j.a.createElement(R.Input,{width:10,value:r,type:"number",min:1,onChange:function(e){return s(e.currentTarget.valueAsNumber)},onBlur:function(){return e.onLimitChange(r)}}))};function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qt(){qt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function i(e,t,r,s){var n=t&&t.prototype instanceof u?t:u,a=Object.create(n.prototype),o=new k(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return E()}for(r.method=n,r.arg=a;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var i=c(e,t,r);if("normal"===i.type){if(s=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(s="completed",r.method="throw",r.arg=i.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function u(){}function m(){}function y(){}var b={};l(b,n,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(g([])));f&&f!==t&&r.call(f,n)&&(b=f);var $=y.prototype=u.prototype=Object.create(b);function d(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function h(e,t){var s;this._invoke=function(n,a){function o(){return new t((function(s,o){!function s(n,a,o,l){var i=c(e[n],e,a);if("throw"!==i.type){var p=i.arg,u=p.value;return u&&"object"==Rt(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):t.resolve(u).then((function(e){p.value=e,o(p)}),(function(e){return s("throw",e,o,l)}))}l(i.arg)}(n,a,s,o)}))}return s=s?s.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function g(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function t(){for(;++s<e.length;)if(r.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,l($,"constructor",y),l(y,"constructor",m),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create($),e},e.awrap=function(e){return{__await:e}},d(h.prototype),l(h.prototype,a,(function(){return this})),e.AsyncIterator=h,e.async=function(t,r,s,n,a){void 0===a&&(a=Promise);var o=new h(i(t,r,s,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},d($),l($,o,"Generator"),l($,n,(function(){return this})),l($,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},e.values=g,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(r,s){return o.type="throw",o.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(l&&i){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;v(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Bt=function(e){var t=e.datasource,r=e.onChange,s=e.value,a=Ft(Object(I.useState)([]),2),o=a[0],l=a[1],i=P.QueryEditor.QueryBuilder.DATABASE,c=i.label,p=i.tooltip;Object(I.useEffect)((function(){!function(){n(this,void 0,void 0,qt().mark((function e(){var r,n;return qt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchDatabases();case 2:r=e.sent,n=r.map((function(e){return{label:e,value:e}})),s&&!r.find((function(e){return e===s}))&&n.push({label:s,value:s}),l(n);case 6:case"end":return e.stop()}}),e)})))}()}),[t,s]);var u=t.settings.jsonData.defaultDatabase,m=null!=s?s:u;return j.a.createElement(j.a.Fragment,null,j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:p},c),j.a.createElement(R.Select,{className:"width-15 ".concat(re.Common.inlineSelect),onChange:function(e){return r(e.value)},options:o,value:m,menuPlacement:"bottom",allowCustomValue:!0}))};function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(){Dt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},n=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",o=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function i(e,t,r,s){var n=t&&t.prototype instanceof u?t:u,a=Object.create(n.prototype),o=new k(s||[]);return a._invoke=function(e,t,r){var s="suspendedStart";return function(n,a){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===n)throw a;return E()}for(r.method=n,r.arg=a;;){var o=r.delegate;if(o){var l=x(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===s)throw s="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);s="executing";var i=c(e,t,r);if("normal"===i.type){if(s=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(s="completed",r.method="throw",r.arg=i.arg)}}}(e,r,o),a}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=i;var p={};function u(){}function m(){}function y(){}var b={};l(b,n,(function(){return this}));var _=Object.getPrototypeOf,f=_&&_(_(g([])));f&&f!==t&&r.call(f,n)&&(b=f);var $=y.prototype=u.prototype=Object.create(b);function d(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function h(e,t){var s;this._invoke=function(n,a){function o(){return new t((function(s,o){!function s(n,a,o,l){var i=c(e[n],e,a);if("throw"!==i.type){var p=i.arg,u=p.value;return u&&"object"==Ut(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){s("next",e,o,l)}),(function(e){s("throw",e,o,l)})):t.resolve(u).then((function(e){p.value=e,o(p)}),(function(e){return s("throw",e,o,l)}))}l(i.arg)}(n,a,s,o)}))}return s=s?s.then(o,o):o()}}function x(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var s=c(r,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,p;var n=s.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function g(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,a=function t(){for(;++s<e.length;)if(r.call(e,s))return t.value=e[s],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return m.prototype=y,l($,"constructor",y),l(y,"constructor",m),m.displayName=l(y,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,o,"GeneratorFunction")),e.prototype=Object.create($),e},e.awrap=function(e){return{__await:e}},d(h.prototype),l(h.prototype,a,(function(){return this})),e.AsyncIterator=h,e.async=function(t,r,s,n,a){void 0===a&&(a=Promise);var o=new h(i(t,r,s,n),a);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},d($),l($,o,"Generator"),l($,n,(function(){return this})),l($,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var s=t.pop();if(s in e)return r.value=s,r.done=!1,r}return r.done=!0,r}},e.values=g,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function s(r,s){return o.type="throw",o.arg=e,t.next=r,s&&(t.method="next",t.arg=void 0),!!s}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],o=a.completion;if("root"===a.tryLoc)return s("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(l&&i){if(this.prev<a.catchLoc)return s(a.catchLoc,!0);if(this.prev<a.finallyLoc)return s(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return s(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return s(a.finallyLoc)}}}},abrupt:function(e,t){for(var s=this.tryEntries.length-1;s>=0;--s){var n=this.tryEntries[s];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),v(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var s=r.completion;if("throw"===s.type){var n=s.arg;v(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Ht=function(e){var t=Mt(Object(I.useState)([]),2),r=t[0],s=t[1],a=Ge()(e.builderOptions,y.builderOptions);Object(I.useEffect)((function(){var t,r;a.table&&(t=a.database,r=a.table,n(void 0,void 0,void 0,Dt().mark((function o(){return Dt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.datasource.fetchFieldsFull(t,r).then((function(t){return n(void 0,void 0,void 0,Dt().mark((function r(){var n,o,l,c,p;return Dt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.push({name:"*",label:"ALL",type:"string",picklistValues:[]}),s(t),(null===(n=a.fields)||void 0===n?void 0:n.length)>0&&(o=a.fields[0],l=t.filter((function(e){return Ae(e.type)})),(c=l.find((function(e){return e.name===o})))&&(p=Object.assign(Object.assign({},a),{timeField:c.name,timeFieldType:c.type,mode:i.Trend,fields:a.fields.slice(1,a.fields.length)}),e.onBuilderOptionsChange(p)));case 3:case"end":return r.stop()}}),r)})))})).catch((function(e){throw e}));case 1:case"end":return o.stop()}}),o)}))))}),[e.datasource,a.table]);var o,l=(o=[],r.forEach((function(e){o.push(e)})),o);return a?j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{className:"gf-form"},j.a.createElement(Bt,{datasource:e.datasource,value:a.database,onChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";s([]);var r=Object.assign(Object.assign({},a),{database:t,table:"",fields:[],filters:[],orderBy:[]});e.onBuilderOptionsChange(r)}}),j.a.createElement(Ve,{mode:a.mode,onModeChange:function(t){if(t===i.List){var r=Object.assign(Object.assign({},a),{mode:t,fields:a.fields||[],orderBy:[]});e.onBuilderOptionsChange(r)}else if(t===i.Aggregate){var s=Object.assign(Object.assign({},a),{mode:t,orderBy:[],metrics:a.metrics||[]});e.onBuilderOptionsChange(s)}else if(t===i.Trend){var n=Object.assign(Object.assign({},a),{mode:i.Trend,timeField:a.timeField||"",timeFieldType:a.timeFieldType||"datetime",metrics:a.metrics||[]});e.onBuilderOptionsChange(n)}}})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(Qe,{datasource:e.datasource,database:a.database,table:a.table,onTableChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=Object.assign(Object.assign({},a),{table:t,fields:[],filters:[],orderBy:[]});e.onBuilderOptionsChange(r)}})),a.mode===i.Trend&&j.a.createElement(it,{timeField:a.timeField,timeFieldType:a.timeFieldType,onTimeFieldChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=Object.assign(Object.assign({},a),{timeField:t,timeFieldType:r});e.onBuilderOptionsChange(s)},fieldsList:l}),a.mode!==i.Trend&&j.a.createElement(et,{fields:a.fields||[],onFieldsChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=Object.assign(Object.assign({},a),{fields:t});e.onBuilderOptionsChange(r)},fieldsList:l}),(a.mode===i.Aggregate||a.mode===i.Trend)&&j.a.createElement(lt,{metrics:a.metrics||[],onMetricsChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=Object.assign(Object.assign({},a),{metrics:t});e.onBuilderOptionsChange(r)},fieldsList:l}),j.a.createElement(kt,{filters:a.filters||[],onFiltersChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=Object.assign(Object.assign({},a),{filters:t});e.onBuilderOptionsChange(r)},fieldsList:l}),(a.mode===i.Aggregate||a.mode===i.Trend)&&j.a.createElement(At,{groupBy:a.groupBy||[],onGroupByChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=Object.assign(Object.assign({},a),{groupBy:t});e.onBuilderOptionsChange(r)},fieldsList:l}),j.a.createElement(j.a.Fragment,null,j.a.createElement(Ct,{orderBy:a.orderBy||[],onOrderByItemsChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=Object.assign(Object.assign({},a),{orderBy:t});e.onBuilderOptionsChange(r)},fieldsList:Lt(a,l)}),j.a.createElement(jt,{limit:a.limit||20,onLimitChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,r=Object.assign(Object.assign({},a),{limit:t});e.onBuilderOptionsChange(r)}}))):null},zt=function(e){var t=P.QueryEditor.QueryBuilder.PREVIEW,r=t.label,s=t.tooltip;return j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:s},r),j.a.createElement("pre",null,e.sql))};function Wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var s,n,a=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(s=r.next()).done)&&(a.push(s.value),!t||a.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw n}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Qt=function(e){var t=e.query,r=e.onChange,s=P.QueryEditor.Types,n=s.label,a=s.tooltip,i=s.options,c=s.switcher,p=t.queryType||(t.rawSql&&!t.queryType?l.SQL:l.Builder),u=Wt(Object(I.useState)(p),2),m=u[0],b=u[1],_=Wt(Object(I.useState)(!1),2),f=_[0],$=_[1],d=[{label:i.SQLEditor,value:l.SQL},{label:i.QueryBuilder,value:l.Builder}],h=function(e){var s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.queryType!==l.SQL||e!==l.Builder||s){var n;switch(b(e),t.queryType){case l.Builder:n=t.builderOptions;break;case l.SQL:n=Be(t.rawSql)||y.builderOptions;break;default:n=y.builderOptions}e===l.SQL?r(Object.assign(Object.assign({},t),{queryType:e,rawSql:Pe(n),meta:{builderOptions:n},format:o.TABLE})):e===l.Builder&&r(Object.assign(Object.assign({},t),{queryType:e,rawSql:Pe(n),builderOptions:n}))}else $(!0)};return j.a.createElement(j.a.Fragment,null,j.a.createElement(R.InlineFormLabel,{width:8,className:"query-keyword",tooltip:a},n),j.a.createElement(R.RadioButtonGroup,{options:d,value:m,onChange:function(e){return h(e)}}),j.a.createElement(R.ConfirmModal,{isOpen:f,title:c.title,body:c.body,confirmText:c.confirmText,dismissText:c.dismissText,icon:"exclamation-triangle",onConfirm:function(){h(l.Builder,!0),$(!1)},onDismiss:function(){return $(!1)}}))},Vt=function(e){var t=e.query,r=e.onChange;switch(t.queryType){case l.SQL:return j.a.createElement("div",{"data-testid":"query-editor-section-sql"},j.a.createElement(xe,Object.assign({},e)));case l.Builder:default:var s=Object.assign({},t);if(t.rawSql&&!t.builderOptions)return j.a.createElement("div",{"data-testid":"query-editor-section-sql"},j.a.createElement(xe,Object.assign({},e)));if(!t.rawSql||!t.builderOptions){var n=y.rawSql,a=y.builderOptions;s=Object.assign(Object.assign({},s),{rawSql:n,builderOptions:a})}return j.a.createElement("div",{"data-testid":"query-editor-section-builder"},j.a.createElement(Ht,{datasource:e.datasource,builderOptions:s.builderOptions,onBuilderOptionsChange:function(e){var s=Pe(e),n=e.mode===i.Trend?o.TIMESERIES:o.TABLE;r(Object.assign(Object.assign({},t),{queryType:l.Builder,rawSql:s,builderOptions:e,format:n}))}}),j.a.createElement(zt,{sql:s.rawSql}))}};r.d(t,"plugin",(function(){return Yt}));var Yt=new s.DataSourcePlugin(N).setConfigEditor((function(e){var t,r=Object(R.useTheme)(),n=R.LegacyForms.FormField,o=R.LegacyForms.SecretFormField,l=e.options,i=e.onOptionsChange,c=l.jsonData,p=l.secureJsonFields,u=l.secureJsonData||{},m=p&&p.tlsCACert,y=p&&p.tlsClientCert,b=p&&p.tlsClientKey,_=[{label:"Native",value:a.NATIVE},{label:"HTTP",value:a.HTTP}],f={padding:"0 ".concat(r.spacing.sm),height:"".concat(r.spacing.formInputHeight,"px"),display:"flex",alignItems:"center"},$=function(e,t){i(Object.assign(Object.assign({},l),{jsonData:Object.assign(Object.assign({},l.jsonData),B({},e,t))}))},d=function(e,t){i(Object.assign(Object.assign({},l),{jsonData:Object.assign(Object.assign({},l.jsonData),B({},e,t))}))},h=function(e,t){i(Object.assign(Object.assign({},l),{secureJsonData:Object.assign(Object.assign({},u),B({},e,t))}))},x=function(e){i(Object.assign(Object.assign({},l),{secureJsonFields:Object.assign(Object.assign({},p),B({},e,!1)),secureJsonData:Object.assign(Object.assign({},u),B({},e,""))}))};return j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{className:"gf-form-group"},j.a.createElement("h3",null,"Server"),j.a.createElement("br",null),j.a.createElement("div",{className:"gf-form"},j.a.createElement(n,{name:"server",labelWidth:12,inputWidth:20,value:c.server||"",onChange:Object(s.onUpdateDatasourceJsonDataOption)(e,"server"),label:F.ConfigEditor.ServerAddress.label,"aria-label":F.ConfigEditor.ServerAddress.label,placeholder:F.ConfigEditor.ServerAddress.placeholder,tooltip:F.ConfigEditor.ServerAddress.tooltip})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(n,{name:"port",labelWidth:12,inputWidth:20,type:"number",value:c.port||"",onChange:function(e){return t=e.currentTarget.value,void i(Object.assign(Object.assign({},l),{jsonData:Object.assign(Object.assign({},l.jsonData),{port:+t})}));var t},label:F.ConfigEditor.ServerPort.label,"aria-label":F.ConfigEditor.ServerPort.label,placeholder:F.ConfigEditor.ServerPort.placeholder((null===(t=c.secure)||void 0===t?void 0:t.toString())||"false"),tooltip:F.ConfigEditor.ServerPort.tooltip})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:12,tooltip:F.ConfigEditor.Protocol.tooltip},F.ConfigEditor.Protocol.label),j.a.createElement(R.RadioButtonGroup,{options:_,disabledOptions:[],value:c.protocol||a.NATIVE,onChange:function(e){return t=e,void i(Object.assign(Object.assign({},l),{jsonData:Object.assign(Object.assign({},l.jsonData),{protocol:t})}));var t}})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:12,tooltip:F.ConfigEditor.Secure.tooltip},F.ConfigEditor.Secure.label),j.a.createElement("div",{style:f},j.a.createElement(R.Switch,{id:"secure",className:"gf-form",value:c.secure||!1,onChange:function(e){return d("secure",e.currentTarget.checked)}})))),j.a.createElement("div",{className:"gf-form-group"},j.a.createElement("h3",null,"Credentials"),j.a.createElement("br",null),j.a.createElement("div",{className:"gf-form"},j.a.createElement(n,{name:"user",labelWidth:12,inputWidth:20,value:c.username||"",onChange:Object(s.onUpdateDatasourceJsonDataOption)(e,"username"),label:F.ConfigEditor.Username.label,"aria-label":F.ConfigEditor.Username.label,placeholder:F.ConfigEditor.Username.placeholder,tooltip:F.ConfigEditor.Username.tooltip})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(o,{name:"pwd",labelWidth:12,inputWidth:20,required:!0,value:u.password||"",isConfigured:p&&p.password,onReset:function(){i(Object.assign(Object.assign({},l),{secureJsonFields:Object.assign(Object.assign({},l.secureJsonFields),{password:!1}),secureJsonData:Object.assign(Object.assign({},l.secureJsonData),{password:""})}))},onChange:Object(s.onUpdateDatasourceSecureJsonDataOption)(e,"password"),label:F.ConfigEditor.Password.label,"aria-label":F.ConfigEditor.Password.label,placeholder:F.ConfigEditor.Password.placeholder,tooltip:F.ConfigEditor.Password.tooltip}))),j.a.createElement("div",{className:"gf-form-group"},j.a.createElement("h3",null,"TLS / SSL Settings"),j.a.createElement("br",null),j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:12,tooltip:F.ConfigEditor.TLSSkipVerify.tooltip},F.ConfigEditor.TLSSkipVerify.label),j.a.createElement("div",{style:f},j.a.createElement(R.Switch,{className:"gf-form",value:c.tlsSkipVerify||!1,onChange:function(e){return $("tlsSkipVerify",e.currentTarget.checked)}}))),j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:12,tooltip:F.ConfigEditor.TLSClientAuth.tooltip},F.ConfigEditor.TLSClientAuth.label),j.a.createElement("div",{style:f},j.a.createElement(R.Switch,{className:"gf-form",value:c.tlsAuth||!1,onChange:function(e){return $("tlsAuth",e.currentTarget.checked)}})),j.a.createElement(R.InlineFormLabel,{width:12,tooltip:F.ConfigEditor.TLSAuthWithCACert.tooltip},F.ConfigEditor.TLSAuthWithCACert.label),j.a.createElement("div",{style:f},j.a.createElement(R.Switch,{className:"gf-form",value:c.tlsAuthWithCACert||!1,onChange:function(e){return $("tlsAuthWithCACert",e.currentTarget.checked)}}))),c.tlsAuthWithCACert&&j.a.createElement(q,{hasCert:!!m,onChange:function(e){return h("tlsCACert",e.currentTarget.value)},placeholder:F.ConfigEditor.TLSCACert.placeholder,label:F.ConfigEditor.TLSCACert.label,onClick:function(){return x("tlsCACert")}}),c.tlsAuth&&j.a.createElement(j.a.Fragment,null,j.a.createElement(q,{hasCert:!!y,onChange:function(e){return h("tlsClientCert",e.currentTarget.value)},placeholder:F.ConfigEditor.TLSClientCert.placeholder,label:F.ConfigEditor.TLSClientCert.label,onClick:function(){return x("tlsClientCert")}}),j.a.createElement(q,{hasCert:!!b,placeholder:F.ConfigEditor.TLSClientKey.placeholder,label:F.ConfigEditor.TLSClientKey.label,onChange:function(e){return h("tlsClientKey",e.currentTarget.value)},onClick:function(){return x("tlsClientKey")}}))),j.a.createElement("div",{className:"gf-form-group"},j.a.createElement("h3",null,"Additional Properties"),j.a.createElement("br",null),j.a.createElement("div",{className:"gf-form"},j.a.createElement(n,{labelWidth:12,inputWidth:20,value:c.defaultDatabase||"",onChange:Object(s.onUpdateDatasourceJsonDataOption)(e,"defaultDatabase"),label:F.ConfigEditor.DefaultDatabase.label,"aria-label":F.ConfigEditor.DefaultDatabase.label,placeholder:F.ConfigEditor.DefaultDatabase.placeholder,tooltip:F.ConfigEditor.DefaultDatabase.tooltip})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(n,{labelWidth:12,inputWidth:20,value:c.timeout||"",onChange:Object(s.onUpdateDatasourceJsonDataOption)(e,"timeout"),label:F.ConfigEditor.Timeout.label,"aria-label":F.ConfigEditor.Timeout.label,placeholder:F.ConfigEditor.Timeout.placeholder,tooltip:F.ConfigEditor.Timeout.tooltip,type:"number"})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(n,{labelWidth:12,inputWidth:20,value:c.queryTimeout||"",onChange:Object(s.onUpdateDatasourceJsonDataOption)(e,"queryTimeout"),label:F.ConfigEditor.QueryTimeout.label,"aria-label":F.ConfigEditor.QueryTimeout.label,placeholder:F.ConfigEditor.QueryTimeout.placeholder,tooltip:F.ConfigEditor.QueryTimeout.tooltip,type:"number"})),j.a.createElement("div",{className:"gf-form"},j.a.createElement(R.InlineFormLabel,{width:12,tooltip:F.ConfigEditor.Validate.tooltip},F.ConfigEditor.Validate.label),j.a.createElement("div",{style:f},j.a.createElement(R.Switch,{className:"gf-form",value:c.validate||!1,onChange:function(e){return d("validate",e.currentTarget.checked)}})))))})).setQueryEditor((function(e){var t=e.query,r=e.onChange,s=e.onRunQuery;return j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{className:"gf-form "+re.QueryEditor.queryType},j.a.createElement("span",null,j.a.createElement(Qt,Object.assign({},e))),j.a.createElement(R.Button,{onClick:function(){return function(){if(t.queryType===l.SQL){var e=ye(t.rawSql);e!==t.format&&r(Object.assign(Object.assign({},t),{format:e}))}s()}()}},"Run Query")),j.a.createElement(Vt,Object.assign({},e)))}))}])}));
//# sourceMappingURL=module.js.map